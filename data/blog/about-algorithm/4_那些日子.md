---
title: é‚£äº›æ—¥å­
date: Sun Nov 19 2023 16:06:28 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)
lastmod: 2023/11/19
tags: [day, å·©å›º]
draft: false
summary: è¦æƒ³çœ‹èµ·æ¥æ¯«ä¸è´¹åŠ›,å°±éœ€è¦èƒŒåç”¨å°½å…¨åŠ›
layout: PostSimple
bibliography: references-data.bib
canonicalUrl: https://dume.vercel.app/blog/about-algorithm/4_é‚£äº›æ—¥å­.md
---

## 20231201 å‘¨äº”

### vue3 ä¸ vue2 çš„åŒºåˆ«

#### diff ç®—æ³•åŒºåˆ«

Vue 3.x ä¸ Vue 2.x åœ¨ diff ç®—æ³•ä¸Šæœ‰å¾ˆå¤§çš„ä¸åŒã€‚Vue 3.0 é‡‡ç”¨äº†åŸºäº Proxy çš„å“åº”å¼ç³»ç»Ÿï¼Œé‡å†™äº†è™šæ‹Ÿ DOM çš„å†…éƒ¨å®ç°ï¼Œç›¸å¯¹äº Vue 2.x çš„ diff ç®—æ³•ï¼Œæœ‰ä»¥ä¸‹ä¸åŒä¹‹å¤„ï¼š

- Vue 2 ä½¿ç”¨çš„æ˜¯åŸºäºé€’å½’çš„åŒæŒ‡é’ˆçš„ diff ç®—æ³•ï¼Œè€Œ Vue 3 ä½¿ç”¨çš„æ˜¯åŸºäºæ•°ç»„çš„åŠ¨æ€è§„åˆ’çš„ diff ç®—æ³•ã€‚Vue 3 çš„ç®—æ³•æ•ˆç‡æ›´é«˜ï¼Œå› ä¸ºå®ƒä½¿ç”¨äº†ä¸€äº›ä¼˜åŒ–æŠ€å·§ï¼Œä¾‹å¦‚æŒ‰éœ€æ›´æ–°ã€é™æ€æ ‡è®°ç­‰ã€‚
- Vue 2 çš„ diff ç®—æ³•ä¼šå¯¹æ•´ä¸ªç»„ä»¶æ ‘è¿›è¡Œå®Œæ•´çš„éå†å’Œæ¯”è¾ƒï¼Œè€Œ Vue 3 çš„ diff ç®—æ³•ä¼šè·³è¿‡é™æ€å­æ ‘çš„æ¯”è¾ƒï¼Œåªå¯¹åŠ¨æ€èŠ‚ç‚¹è¿›è¡Œæ›´æ–°ã€‚è¿™å‡å°‘äº†ä¸å¿…è¦çš„æ¯”è¾ƒæ“ä½œï¼Œæé«˜äº†æ€§èƒ½ã€‚
- Vue 2 çš„ diff ç®—æ³•å¯¹äºåˆ—è¡¨æ¸²æŸ“ï¼ˆv-forï¼‰æ—¶çš„å…ƒç´ é‡æ–°æ’åºä¼šæ¯”è¾ƒä½æ•ˆï¼Œéœ€è¦é€šè¿‡ç»™æ¯ä¸ªå…ƒç´ è®¾ç½®å”¯ä¸€çš„ key æ¥æé«˜æ€§èƒ½ã€‚è€Œ Vue 3 çš„ diff ç®—æ³•åœ¨åˆ—è¡¨æ¸²æŸ“æ—¶ï¼Œé€šè¿‡è·Ÿè¸ªå…ƒç´ çš„ç§»åŠ¨ï¼Œå¯ä»¥æ›´å¥½åœ°å¤„ç†å…ƒç´ çš„é‡æ–°æ’åºï¼Œæ— éœ€è®¾ç½® keyã€‚
- Vue 3 çš„ diff ç®—æ³•å¯¹äºé™æ€èŠ‚ç‚¹çš„å¤„ç†æ›´åŠ é«˜æ•ˆï¼Œé™æ€èŠ‚ç‚¹åªä¼šåœ¨é¦–æ¬¡æ¸²æŸ“æ—¶è¢«å¤„ç†ï¼Œåç»­æ›´æ–°æ—¶ä¼šç›´æ¥è·³è¿‡æ¯”è¾ƒå’Œæ›´æ–°æ“ä½œï¼Œå‡å°‘äº†ä¸å¿…è¦çš„è®¡ç®—ã€‚

1. é™æ€æå‡å’Œç»„åˆï¼šVue 2.x ä¸­é™æ€èŠ‚ç‚¹ä¼šåœ¨æ›´æ–°æ—¶é‡å¤æ¯”è¾ƒï¼Œä½†åœ¨ Vue 3.0 ä¸­ï¼Œé™æ€èŠ‚ç‚¹ä¼šè¢«é™æ€æå‡å¹¶ç¼“å­˜ï¼Œå¤§å¹…å‡å°‘äº†æ¯”è¾ƒæ—¶é—´ã€‚å¦å¤–ï¼ŒVue 3.0 å€Ÿé‰´äº† React çš„ fragments æŠ€æœ¯ï¼Œå¯ä»¥é€šè¿‡ createBlock() å‡½æ•°å°†å¤šä¸ªå­å…ƒç´ ç»„æˆä¸€ç»„è¿”å›ï¼Œé¿å…äº†ä¸å¿…è¦çš„åŒ…è£…å’Œæ¸²æŸ“ã€‚
2. æºç å·ç§¯ï¼šVue 3.0 æ˜¯ä½¿ç”¨æ¨¡å—åŒ–æºä»£ç ï¼Œå°¤å…¶æ˜¯åœ¨è™šæ‹Ÿ DOM ä¸­ï¼Œå°†æ‰€æœ‰åŠŸèƒ½éƒ½åˆ†è£…ä¸º create å‡½æ•°ï¼Œä¼˜åŒ–äº†ç»„ä»¶çš„è¿è¡Œæ—¶é€Ÿåº¦ã€‚
   æ”¯æŒ HOCï¼šå¯¹äºå¤æ‚ç»„ä»¶ï¼ŒVue 3.0 å¯ä»¥é€šè¿‡ defineComponent å’Œ withDirectives ç­‰æ–¹æ³•æ”¯æŒ HOC è£…é¥°å™¨å’ŒæŒ‡ä»¤åŠŸèƒ½ï¼Œè®©ç»„ä»¶å˜å¾—æ›´åŠ çµæ´»ã€å¯å¤ç”¨æ€§æ›´é«˜ã€‚
3. æ”¯æŒ HOCï¼šå¯¹äºå¤æ‚ç»„ä»¶ï¼ŒVue 3.0 å¯ä»¥é€šè¿‡ defineComponent å’Œ withDirectives ç­‰æ–¹æ³•æ”¯æŒ HOC è£…é¥°å™¨å’ŒæŒ‡ä»¤åŠŸèƒ½ï¼Œè®©ç»„ä»¶å˜å¾—æ›´åŠ çµæ´»ã€å¯å¤ç”¨æ€§æ›´é«˜ã€‚
4. vue 3.x åœ¨æ›´æ–°æ—¶é‡‡ç”¨äº†åŒç¼“å­˜æŠ€æœ¯å¹¶ä¼˜åŒ–äº†è™šæ‹Ÿ DOM çš„å®ç°åŸç†ï¼Œç›¸è¾ƒäº Vue 2.x çš„ diff ç®—æ³•ï¼Œæ›´æ–°çš„æ•ˆç‡å’Œæ€§èƒ½éƒ½æœ‰å¾ˆå¤§çš„æé«˜ã€‚

åœ¨ Vue 3 çš„ diff ç®—æ³•ä¸­ï¼Œå®ƒé€šè¿‡è·Ÿè¸ªå…ƒç´ çš„ç§»åŠ¨æ¥ç¡®å®šå…ƒç´ çš„é‡æ–°æ’åºï¼Œè€Œä¸ä¾èµ–äºè®¾ç½® keyã€‚å½“åˆ—è¡¨å‘ç”Ÿé‡æ’æ—¶ï¼ŒVue 3 ä¼šæ ¹æ®å…ƒç´ çš„èº«ä»½ï¼ˆidentityï¼‰æ¥åˆ¤æ–­å…ƒç´ çš„ç§»åŠ¨æ–¹å¼ï¼Œä»è€Œé¿å…äº†ä¸å¿…è¦çš„å…ƒç´ é”€æ¯å’Œé‡æ–°åˆ›å»ºçš„æ“ä½œï¼Œæé«˜äº†æ€§èƒ½ã€‚

è¿™ç§æ”¹è¿›æ˜¯é€šè¿‡ PatchFlagï¼ˆè¡¥ä¸æ ‡è®°ï¼‰å’ŒåŠ¨æ€æŒ‡ä»¤æä¾›çš„ä¼˜åŒ–æœºåˆ¶å®ç°çš„ã€‚PatchFlag è®°å½•äº†æ¯ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€ï¼ŒåŒ…æ‹¬æ˜¯å¦éœ€è¦æ›´æ–°ã€æ˜¯å¦éœ€è¦ç§»åŠ¨ç­‰ä¿¡æ¯ï¼Œä»è€Œä½¿å¾— Vue 3 åœ¨è¿›è¡Œ diff æ“ä½œæ—¶èƒ½å¤Ÿæ›´ç²¾ç¡®åœ°åˆ¤æ–­èŠ‚ç‚¹çš„å˜åŒ–ï¼Œé¿å…äº†ä¸å¿…è¦çš„æ“ä½œã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨æŸäº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œä»ç„¶å¯èƒ½éœ€è¦è®¾ç½® keyï¼Œä¾‹å¦‚åœ¨ä½¿ç”¨ç›¸åŒçš„æ•°æ®é›†è¿›è¡Œå¤šä¸ªåˆ—è¡¨æ¸²æŸ“æ—¶ï¼Œæˆ–è€…éœ€è¦ç¡®ä¿åˆ—è¡¨é¡¹çš„çŠ¶æ€ä¿æŒä¸€è‡´ã€‚ä½†æ˜¯ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåœ¨ Vue 3 ä¸­ï¼Œä¸å†å¼ºåˆ¶è¦æ±‚è®¾ç½® key æ¥æé«˜åˆ—è¡¨æ¸²æŸ“çš„æ€§èƒ½ï¼Œå› ä¸ºæ–°çš„ diff ç®—æ³•å·²ç»èƒ½å¤Ÿæ›´å¥½åœ°å¤„ç†å…ƒç´ çš„é‡æ–°æ’åºã€‚

### å‰ç«¯æ¡†æ¶

æ‰€æœ‰æ¡†æ¶ç›®å‰çš„å‘å±•æ–¹å‘éƒ½æ˜¯å‡å°‘å®¢æˆ·ç«¯ js ä»£ç ã€å‡å°‘ js è¿è¡Œæ—¶é—´ã€‚

ä¸ç®¡æ˜¯æ”¾åˆ°æœåŠ¡ç«¯ä¹Ÿå¥½ã€æ”¾åˆ°ç¼–è¯‘æ—¶ä¹Ÿå¥½ã€æŠ‘æˆ–æ˜¯åƒ signal è¿™æ · fine grained reactivity ä¹Ÿå¥½ï¼Œéƒ½æ˜¯ä¸ºäº†è¿™ä¸€ä¸ªç›®æ ‡åŠªåŠ›

- ç›®å‰å¸‚åœºå‡ºç°çš„ solid.jsï¼Œsvelte ç­‰ç­‰éƒ½æ˜¯ä¸ºäº†å‡å°‘ js ä»£ç ï¼Œå‡å°‘ js çš„è¿è¡Œæ—¶é—´ï¼Œæ¯”å¦‚å¹²æ‰ vdomï¼Œå¹²æ‰ diff
- ä½†è¿˜å¯ä»¥é€šè¿‡ rscï¼ˆreact-server-componentï¼‰ã€ssrï¼ˆserver side renderingï¼‰ã€ssg(static site generation)ã€isg()

RSCï¼ˆReact Server Componentï¼‰ï¼š

- RSC æ˜¯ React ç”Ÿæ€ç³»ç»Ÿä¸­çš„ä¸€é¡¹å®éªŒæ€§åŠŸèƒ½ï¼Œç”¨äºåœ¨æœåŠ¡å™¨ä¸Šå‘ˆç° React ç»„ä»¶ã€‚
- RSC å…è®¸åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œ React ç»„ä»¶ï¼Œå¹¶å°†å…¶æ¸²æŸ“ä¸º HTMLï¼Œç„¶åå°† HTML å‘é€ç»™å®¢æˆ·ç«¯è¿›è¡Œäº¤äº’ã€‚
- RSC çš„ç›®æ ‡æ˜¯æä¾›æ›´å¥½çš„æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§ï¼Œé€šè¿‡åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œç»„ä»¶é€»è¾‘ï¼Œå¯ä»¥å‡å°‘ç½‘ç»œä¼ è¾“å’Œå®¢æˆ·ç«¯è®¡ç®—è´Ÿè½½ã€‚

SSRï¼ˆServer-Side Renderingï¼‰ï¼š

- SSR æ˜¯ä¸€ç§å°† React æˆ–å…¶ä»–å‰ç«¯æ¡†æ¶çš„ç»„ä»¶åœ¨æœåŠ¡å™¨ä¸Šè¿›è¡Œæ¸²æŸ“ï¼Œå¹¶å°†æ¸²æŸ“ç»“æœä½œä¸º HTML å‘é€ç»™å®¢æˆ·ç«¯çš„æŠ€æœ¯ã€‚
- SSR çš„ç‰¹ç‚¹æ˜¯åœ¨æœåŠ¡ç«¯åŠ¨æ€ç”Ÿæˆå®Œæ•´çš„ HTMLï¼ŒåŒ…æ‹¬ç»„ä»¶å†…å®¹å’Œåˆå§‹çŠ¶æ€ï¼Œç„¶åå°†å…¶å‘é€ç»™å®¢æˆ·ç«¯ã€‚
- SSR å¯ä»¥æä¾›æ›´å¥½çš„é¦–æ¬¡åŠ è½½æ€§èƒ½å’Œæœç´¢å¼•æ“ä¼˜åŒ–ï¼ˆSEOï¼‰ï¼Œä½†åœ¨æ¯æ¬¡è¯·æ±‚æ—¶éƒ½éœ€è¦åŠ¨æ€æ¸²æŸ“ HTMLï¼Œå¯èƒ½ä¼šå¢åŠ æœåŠ¡å™¨è´Ÿè½½ã€‚

SSGï¼ˆStatic Site Generationï¼‰ï¼š

- SSG æ˜¯ä¸€ç§åœ¨æ„å»ºæ—¶ï¼ˆè€Œä¸æ˜¯åœ¨è¿è¡Œæ—¶ï¼‰ç”Ÿæˆé™æ€ HTML æ–‡ä»¶çš„æŠ€æœ¯ã€‚
- SSG çš„ç‰¹ç‚¹æ˜¯åœ¨æ„å»ºè¿‡ç¨‹ä¸­é¢„å…ˆç”Ÿæˆé¡µé¢çš„ HTMLï¼Œå°†å…¶ä¿å­˜ä¸ºé™æ€æ–‡ä»¶ï¼Œç„¶ååœ¨å®¢æˆ·ç«¯è¯·æ±‚æ—¶ç›´æ¥æä¾›é™æ€ HTMLã€‚
- SSG å¯ä»¥æä¾›éå¸¸å¿«é€Ÿçš„åŠ è½½é€Ÿåº¦ï¼Œå› ä¸ºæ¯ä¸ªé¡µé¢éƒ½æ˜¯é¢„å…ˆç”Ÿæˆçš„ï¼Œå¹¶ä¸”ä¸éœ€è¦æœåŠ¡å™¨è¿›è¡ŒåŠ¨æ€æ¸²æŸ“ã€‚
  ä½†æ˜¯ï¼ŒSSG å¯¹äºé‚£äº›åŒ…å«å®æ—¶æ•°æ®æˆ–é¢‘ç¹æ›´æ–°çš„é¡µé¢å¯èƒ½ä¸å¤ªé€‚ç”¨ï¼Œå› ä¸ºå®ƒä»¬éœ€è¦é‡æ–°æ„å»ºæ•´ä¸ªç«™ç‚¹æ‰èƒ½æ›´æ–°å†…å®¹ã€‚

ISGï¼ˆIncremental Static Generationï¼‰ï¼š

- ISG æ˜¯ä¸€ç§ç»“åˆäº† SSG å’ŒåŠ¨æ€æ¸²æŸ“çš„æŠ€æœ¯ï¼Œå®ƒå…è®¸åœ¨æ„å»ºæ—¶ç”Ÿæˆé™æ€ HTMLï¼Œå¹¶åœ¨è¿è¡Œæ—¶æ ¹æ®éœ€è¦å¢é‡åœ°æ›´æ–°é¡µé¢å†…å®¹ã€‚
- ISG çš„ç‰¹ç‚¹æ˜¯å°†ä¸€éƒ¨åˆ†é¡µé¢é¢„å…ˆç”Ÿæˆä¸ºé™æ€ HTMLï¼ŒåŒæ—¶ä¿ç•™ä¸€äº›éƒ¨åˆ†åœ¨è¿è¡Œæ—¶è¿›è¡ŒåŠ¨æ€æ¸²æŸ“ã€‚
- å½“å®¢æˆ·ç«¯è¯·æ±‚é¡µé¢æ—¶ï¼ŒISG å¯ä»¥ç«‹å³æä¾›é™æ€ HTMLï¼Œç„¶ååœ¨åå°å¼‚æ­¥ç”Ÿæˆå’Œç¼“å­˜å…¶ä»–éƒ¨åˆ†çš„å†…å®¹ï¼Œå®ç°å¢é‡æ›´æ–°ã€‚
- ISG å¯ä»¥æä¾›æ›´å¥½çš„æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒï¼ŒåŒæ—¶ä¹Ÿä¿ç•™äº†éƒ¨åˆ†åŠ¨æ€å†…å®¹çš„çµæ´»æ€§ã€‚

Next.js æ˜¯ä¸€ä¸ªå¹¿æ³›ä½¿ç”¨ ISGï¼ˆIncremental Static Generationï¼‰æŠ€æœ¯çš„æ¡†æ¶ã€‚Next.js æ˜¯ä¸€ä¸ªåŸºäº React çš„å‰ç«¯æ¡†æ¶ï¼Œå®ƒæä¾›äº†å¼ºå¤§çš„é™æ€ç«™ç‚¹ç”ŸæˆåŠŸèƒ½ï¼Œå…è®¸åœ¨æ„å»ºæ—¶ç”Ÿæˆé™æ€ HTMLï¼Œå¹¶åœ¨éœ€è¦æ—¶è¿›è¡Œå¢é‡æ›´æ–°ã€‚

Next.js æä¾›äº†ä¸€ä¸ªåä¸º "getStaticProps" çš„ç‰¹æ®Šå‡½æ•°ï¼Œç”¨äºåœ¨æ„å»ºæ—¶è·å–æ•°æ®å¹¶ç”Ÿæˆé™æ€ HTML é¡µé¢ã€‚è¿™æ ·ï¼Œéƒ¨åˆ†é¡µé¢çš„å†…å®¹å¯ä»¥åœ¨æ„å»ºæ—¶é¢„å…ˆç”Ÿæˆä¸ºé™æ€ HTMLï¼Œè€Œå…¶ä»–éƒ¨åˆ†å¯ä»¥åœ¨è¿è¡Œæ—¶æ ¹æ®éœ€è¦è¿›è¡Œå¢é‡æ›´æ–°ã€‚

é€šè¿‡ Next.js çš„ ISG åŠŸèƒ½ï¼Œå¯ä»¥å®ç°ä»¥ä¸‹åœºæ™¯ï¼š

éƒ¨åˆ†é¡µé¢å†…å®¹æ˜¯é™æ€çš„ï¼Œå¯ä»¥åœ¨æ„å»ºæ—¶é¢„å…ˆç”Ÿæˆä¸ºé™æ€ HTMLã€‚
éƒ¨åˆ†é¡µé¢å†…å®¹æ˜¯åŠ¨æ€çš„ï¼Œéœ€è¦åœ¨å®¢æˆ·ç«¯è¯·æ±‚æ—¶è¿›è¡Œæ¸²æŸ“ã€‚
Next.js è¿˜æä¾›äº†å…¶ä»–ä¸€äº›ä¼˜ç§€çš„åŠŸèƒ½ï¼Œå¦‚è‡ªåŠ¨ä»£ç åˆ†å‰²ã€æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ä»¥åŠå®¢æˆ·ç«¯è·¯ç”±ç­‰ï¼Œä½¿å¾—æ„å»ºç°ä»£åŒ–ã€é«˜æ€§èƒ½çš„ Web åº”ç”¨å˜å¾—æ›´åŠ æ–¹ä¾¿å’Œé«˜æ•ˆã€‚

é™¤äº†ä¸Šé¢çš„ä¸€äº›ï¼Œå…¶å®è¿˜æœ‰ å®ç°å­¤å²›æ¶æ„çš„å…¨æ ˆæ¡†æ¶ä¸»è¦æ˜¯ Astro ä¸ Qwik

#### vue

Vue.js ä½¿ç”¨äº†ä¸€ç§ç§°ä¸ºâ€œå“åº”å¼ä¾èµ–è¿½è¸ªâ€çš„æœºåˆ¶æ¥å®ç°å“åº”å¼æ›´æ–°ã€‚
åœ¨ç»„ä»¶åˆå§‹åŒ–æ—¶ï¼ŒVue.js ä¼šåœ¨æ•°æ®å±æ€§ä¸Šä½¿ç”¨ Object.defineProperty è¿›è¡ŒåŠ«æŒï¼Œä¸ºæ¯ä¸ªå±æ€§åˆ›å»ºä¸€ä¸ªä¾èµ–è¿½è¸ªå™¨ï¼ˆDepï¼‰ã€‚
å½“æ•°æ®å±æ€§è¢«è¯»å–æ—¶ï¼ŒVue.js ä¼šå°†å½“å‰ä¾èµ–ï¼ˆå¦‚ç»„ä»¶çš„æ¸²æŸ“å‡½æ•°ï¼‰ä¸è¯¥å±æ€§çš„ä¾èµ–è¿½è¸ªå™¨å»ºç«‹å…³è”ã€‚
å½“æ•°æ®å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒVue.js ä¼šé€šçŸ¥ç›¸å…³çš„ä¾èµ–ï¼Œè§¦å‘ç›¸åº”çš„æ›´æ–°ã€‚

#### react

åœ¨ React ä¸­ï¼Œä¾èµ–æ”¶é›†å’Œæ›´æ–°é¡µé¢çš„è¿‡ç¨‹æ˜¯é€šè¿‡ React çš„è°ƒå’Œï¼ˆreconciliationï¼‰å’Œ diff ç®—æ³•æ¥å®ç°çš„ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„æè¿°ï¼š

ä¾èµ–æ”¶é›†ï¼š

- åœ¨ç»„ä»¶æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼ŒReact ä¼šè·Ÿè¸ªç»„ä»¶ä¸­ä½¿ç”¨çš„çŠ¶æ€ï¼ˆå¦‚ state å’Œ propsï¼‰ä»¥åŠå…¶ä»–ä¸Šä¸‹æ–‡ï¼ˆå¦‚ contextï¼‰çš„è¯»å–æ“ä½œã€‚
- å½“ç»„ä»¶è¯»å–äº†æŸä¸ªçŠ¶æ€æˆ–ä¸Šä¸‹æ–‡æ—¶ï¼ŒReact ä¼šå°†è¯¥çŠ¶æ€æˆ–ä¸Šä¸‹æ–‡ä¸å½“å‰ç»„ä»¶å»ºç«‹å…³è”ï¼Œå½¢æˆä¸€ä¸ªä¾èµ–å…³ç³»ã€‚
- React ä½¿ç”¨ä¸€ç§ç§°ä¸º "Fiber" çš„æ•°æ®ç»“æ„æ¥è¡¨ç¤ºç»„ä»¶æ ‘ï¼Œå¹¶åœ¨ Fiber èŠ‚ç‚¹ä¸­è®°å½•è¿™äº›ä¾èµ–å…³ç³»ã€‚

æ•°æ®å˜åŒ–å’Œæ›´æ–°é¡µé¢ï¼š

- å½“ç»„ä»¶ä¸­çš„çŠ¶æ€æˆ–ä¸Šä¸‹æ–‡å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒReact ä¼šè§¦å‘é‡æ–°æ¸²æŸ“è¿‡ç¨‹ã€‚
- åœ¨é‡æ–°æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼ŒReact ä¼šé€šè¿‡æ¯”è¾ƒæ–°æ—§çŠ¶æ€æˆ–ä¸Šä¸‹æ–‡çš„å€¼æ¥ç¡®å®šæ˜¯å¦éœ€è¦æ›´æ–°ç»„ä»¶ã€‚
- React ä½¿ç”¨ diff ç®—æ³•æ¥æ¯”è¾ƒæ–°æ—§ Fiber æ ‘çš„å·®å¼‚ï¼Œå¹¶æ‰¾å‡ºéœ€è¦è¿›è¡Œæ›´æ–°çš„éƒ¨åˆ†ã€‚
- é€šè¿‡ diff ç®—æ³•ï¼ŒReact å¯ä»¥é«˜æ•ˆåœ°ç¡®å®šéœ€è¦æ·»åŠ ã€ç§»åŠ¨æˆ–åˆ é™¤çš„ DOM å…ƒç´ ï¼Œå¹¶ç”Ÿæˆç›¸åº”çš„æ›´æ–°æ“ä½œã€‚
- ä¸€æ—¦ç¡®å®šäº†éœ€è¦æ›´æ–°çš„éƒ¨åˆ†ï¼ŒReact ä¼šæ ¹æ®æ›´æ–°æ“ä½œå¯¹ DOM è¿›è¡Œç›¸åº”çš„æ“ä½œï¼Œå°†é¡µé¢æ›´æ–°ä¸ºæœ€æ–°çš„çŠ¶æ€ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒReact å¹¶ä¸ç›´æ¥å¯¹æ¯ä¸ªçŠ¶æ€æˆ–ä¸Šä¸‹æ–‡çš„å˜åŒ–è¿›è¡Œç›‘å¬ï¼Œè€Œæ˜¯åœ¨ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œé€šè¿‡å¯¹æ–°æ—§çŠ¶æ€æˆ–ä¸Šä¸‹æ–‡çš„æ¯”è¾ƒï¼Œæ¥ç¡®å®šæ˜¯å¦éœ€è¦æ›´æ–°é¡µé¢ã€‚è¿™ç§åŸºäºæ¯”è¾ƒçš„æ›´æ–°æ–¹å¼å¯ä»¥æé«˜æ€§èƒ½ï¼Œé¿å…äº†é¢‘ç¹çš„ç›‘å¬å’Œå›è°ƒæ“ä½œã€‚

æ­¤å¤–ï¼ŒReact è¿˜æä¾›äº†ä¸€äº›ä¼˜åŒ–æ‰‹æ®µï¼Œå¦‚ shouldComponentUpdateã€React.memo å’Œ React.useMemo ç­‰ï¼Œæ¥å¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°æ§åˆ¶ç»„ä»¶çš„æ›´æ–°è¿‡ç¨‹ï¼Œé¿å…ä¸å¿…è¦çš„æ¸²æŸ“ã€‚

- åŸºäºè™šæ‹Ÿ DOMï¼ˆVirtual DOMï¼‰å®ç°é«˜æ•ˆçš„ UI æ›´æ–°
- React ä½¿ç”¨è™šæ‹Ÿ DOMï¼ˆVirtual DOMï¼‰å’Œä¸€ç§ç§°ä¸ºåè°ƒï¼ˆReconciliationï¼‰çš„ç®—æ³•æ¥å®ç°å“åº”å¼æ›´æ–°ã€‚å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒReact ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„è™šæ‹Ÿ DOM æ ‘ä¸ä¹‹å‰çš„è™šæ‹Ÿ DOM æ ‘è¿›è¡Œæ¯”è¾ƒï¼Œæ‰¾å‡ºå·®å¼‚ã€‚

ç„¶åï¼ŒReact ä»…æ›´æ–°å‘ç”Ÿå˜åŒ–çš„éƒ¨åˆ†ï¼Œå°†è¿™äº›å˜åŒ–æ‰¹é‡åº”ç”¨åˆ°å®é™…çš„ DOM ä¸­ï¼Œä»¥æé«˜æ€§èƒ½

æ€»ç»“ï¼š

- react æ˜¯ä½¿ç”¨ setState æ¥ä¸»åŠ¨é€šçŸ¥æ¡†æ¶ï¼Œç°åœ¨éœ€è¦æ›´æ–°ï¼Œç„¶åå†æ ¹æ®æ ¸å¿ƒçš„ view=fn(state) å…¬å¼ï¼ŒæŠŠå‘ç”ŸçŠ¶æ€å˜åŒ–çš„ç»„ä»¶åŠå®ƒçš„ props å‘ç”Ÿå˜åŒ–çš„å­ç»„ä»¶é‡æ–°æ‰§è¡Œä¸€éï¼Œå½¢æˆæ–°çš„ vdomï¼Œç„¶åæ‰æ˜¯ diff ä¹‹ç±»çš„
- è¿™æ ·çš„æ•ˆæœå°±æ˜¯ï¼Œæ¯æ¬¡æ•°æ®å‘ç”Ÿå˜æ›´ï¼Œéƒ½éœ€è¦é‡æ–°ç”Ÿæˆå¯¹åº”ç»„ä»¶çš„ vdom
- ç›¸æ¯”äº svelte çš„ singal æ–¹å¼ï¼Œæ˜¯åœ¨ç¼–è¯‘æ—¶ï¼Œå°±å·²ç»ç²¾ç»†åŒ–çš„ç¡®å®šçš„å¾…æ›´æ–°çš„èŒƒå›´ï¼Œåç»­ä»…ä»…æ›´æ–°æŒ‡å®šåŒºåŸŸå³å¯ã€‚

1ã€svelte ç¼–è¯‘æ—¶å°±çŸ¥é“æœ‰å“ªäº›çŠ¶æ€
2ã€svelte ç¼–è¯‘æ—¶å°±çŸ¥é“æ¯ä¸ªçŠ¶æ€å¯¹åº”å“ªä¸ªèŠ‚ç‚¹
3ã€svelte ç¼–è¯‘æ—¶å°±çŸ¥é“æ¯ä¸ªçŠ¶æ€ä½•æ—¶æ”¹å˜

æ‰€ä»¥ç¼–è¯‘å™¨æ˜¯ä¸æ˜¯å¯ä»¥é’ˆå¯¹æ¯ä¸ªçŠ¶æ€çš„å˜åŒ–ï¼Œç”Ÿæˆæ›´æ–°å¯¹åº”ä¾èµ–è¿™ä¸ªçŠ¶æ€çš„èŠ‚ç‚¹çš„ä»£ç ï¼Ÿ
æ˜¯ä¸æ˜¯å¯ä»¥åœ¨æ¯ä¸ªçŠ¶æ€å‘ç”Ÿæ”¹å˜çš„åœ°æ–¹ä¸‹ä¸€è¡Œæ’ä¸€ä¸ªè¯­å¥æ¥è§¦å‘æ›´æ–°ï¼Ÿ

#### anglar

#### svelte

Svelte æ˜¯ä¸€ä¸ªç»„ä»¶æ¡†æ¶ï¼Œç±»ä¼¼äº React æˆ– Vueï¼Œä½†æœ‰ä¸€ä¸ªé‡è¦çš„åŒºåˆ«ã€‚ä¼ ç»Ÿæ¡†æ¶å…è®¸ä½ ç¼–å†™å£°æ˜æ€§çŠ¶æ€é©±åŠ¨çš„ä»£ç ï¼Œä½†æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼šæµè§ˆå™¨å¿…é¡»åšé¢å¤–çš„å·¥ä½œæ¥å°†è¿™äº›å£°æ˜æ€§ç»“æ„è½¬æ¢ä¸º DOM æ“ä½œï¼Œä½¿ç”¨è™šæ‹Ÿ DOM diffing ç­‰æŠ€æœ¯ï¼Œè¿™äº›æŠ€æœ¯ä¼šå ç”¨ä½ çš„å¸§é¢„ç®—å¹¶ç»™åƒåœ¾æ”¶é›†å™¨å¸¦æ¥è´Ÿæ‹…ã€‚

ç›¸åï¼ŒSvelte åœ¨æ„å»ºæ—¶è¿è¡Œï¼Œå°†æ‚¨çš„ç»„ä»¶è½¬æ¢ä¸ºé«˜æ•ˆçš„å‘½ä»¤å¼ä»£ç ï¼Œä»¥å¤–ç§‘æ‰‹æœ¯æ–¹å¼æ›´æ–° DOMã€‚æŸ¥çœ‹ç¼–è¯‘åçš„ä»£ç ï¼Œå‘ç°å¾ˆå¤šéƒ½æ˜¯ç›´æ¥æ“ä½œ domã€‚

- Svelte æ˜¯ä¸€ä¸ªç¼–è¯‘å‹çš„å‰ç«¯æ¡†æ¶ï¼Œå°†ç»„ä»¶è½¬æ¢ä¸ºé«˜æ•ˆã€å¯å¤ç”¨çš„çº¯ JavaScript ä»£ç ã€‚
- åœ¨æ„å»ºæ—¶å°†ç»„ä»¶è½¬æ¢ä¸ºåŸç”Ÿçš„ JavaScript ä»£ç ï¼Œä¸éœ€è¦åœ¨è¿è¡Œæ—¶è¿›è¡Œæ¡†æ¶è§£æå’Œè™šæ‹Ÿ DOM æ“ä½œã€‚
- ç”Ÿæˆçš„ä»£ç ä½“ç§¯å°ã€è¿è¡Œå¿«é€Ÿï¼Œé€‚ç”¨äºå¯¹æ€§èƒ½è¦æ±‚è¾ƒé«˜çš„åº”ç”¨ã€‚

```js
// ä½¿ç”¨ signal
import { createSignal, onCleanup } from 'svelte';

// ä½¿ç”¨ signal å£°æ˜ä¸€ä¸ªå“åº”å¼å˜é‡
const [count, setCount] = createSignal(0);

// å®šä¹‰ä¸€ä¸ªè‡ªåŠ¨æ›´æ–°çš„è®¡æ—¶å™¨
const interval = setInterval(() => {
  setCount(count() + 1);
}, 1000);

// å½“ç»„ä»¶é”€æ¯æ—¶æ¸…é™¤è®¡æ—¶å™¨
onCleanup(() => {
  clearInterval(interval);
});

// Svelte ç»„ä»¶æ¨¡æ¿
<script>
  export let count;
</script>

<h1>Count: {count}</h1>
```

ä¸‹é¢æ˜¯ä¸ä½¿ç”¨ singal

```js
import { reactive, onCleanup } from 'svelte';

// åˆ›å»ºä¸€ä¸ªæ™®é€šçš„ reactive å¯¹è±¡
const state = reactive({
  count: 0,
});

// å®šä¹‰ä¸€ä¸ªè‡ªåŠ¨æ›´æ–°çš„è®¡æ—¶å™¨
const interval = setInterval(() => {
  state.count += 1;
}, 1000);

// å½“ç»„ä»¶é”€æ¯æ—¶æ¸…é™¤è®¡æ—¶å™¨
onCleanup(() => {
  clearInterval(interval);
});

// Svelte ç»„ä»¶æ¨¡æ¿
<script>
  export let count;
</script>

<h1>Count: {state.count}</h1>
```

è¿™ä¸¤ä¸ªç¤ºä¾‹ä»£ç å±•ç¤ºäº†ä½¿ç”¨ signal å’Œä¸ä½¿ç”¨ signal çš„æ–¹å¼æ¥å®ç°ä¸€ä¸ªè®¡æ—¶å™¨ã€‚ä½¿ç”¨ signal å¯ä»¥æ›´æ˜¾å¼åœ°å£°æ˜ä¾èµ–å…³ç³»ï¼Œå¹¶ä¸”åœ¨æ›´æ–°æ—¶åªæ›´æ–°å˜åŒ–çš„éƒ¨åˆ†ã€‚è€Œä¸ä½¿ç”¨ signal åˆ™æ˜¯ä¸€ç§æ›´ä¼ ç»Ÿçš„å“åº”å¼æ–¹å¼ï¼Œç›´æ¥ä¿®æ”¹å±æ€§å€¼æ¥è§¦å‘æ›´æ–°ã€‚

#### solid.js

- æ— è™šæ‹Ÿ DOMï¼šä¸ä¼ ç»Ÿçš„è™šæ‹Ÿ DOM ä¸åŒï¼ŒSolid.js é‡‡ç”¨äº†ä¸€ç§å«åšâ€œfine-grained reactivityâ€çš„æ–¹æ³•ã€‚å®ƒä½¿ç”¨ç»†ç²’åº¦çš„å“åº”è¿½è¸ªå’Œç›´æ¥çš„ DOM æ›´æ–°ï¼Œä»¥å‡å°‘ä¸å¿…è¦çš„å¼€é”€ï¼Œæé«˜æ¸²æŸ“æ€§èƒ½ã€‚
- å“åº”å¼ï¼šSolid.js æ”¯æŒå“åº”å¼ç¼–ç¨‹ï¼Œé€šè¿‡è¿½è¸ªæ•°æ®çš„ä¾èµ–å…³ç³»ï¼Œå®ç°äº†é«˜æ•ˆçš„é‡æ–°æ¸²æŸ“æœºåˆ¶ã€‚åªæœ‰å‘ç”Ÿå˜åŒ–çš„éƒ¨åˆ†ä¼šè¢«æ›´æ–°ï¼Œä»è€Œæä¾›äº†æ›´å¥½çš„æ€§èƒ½ã€‚

- Solid.js ä½¿ç”¨äº†ä¸€ç§ç§°ä¸ºâ€œç»†ç²’åº¦å“åº”è¿½è¸ªâ€çš„æ–¹æ³•æ¥å®ç°å“åº”å¼æ›´æ–°ã€‚
- Solid.js é€šè¿‡è¿½è¸ª JavaScript è¡¨è¾¾å¼ä¸­çš„æ•°æ®ä¾èµ–å…³ç³»ï¼Œè€Œä¸æ˜¯è¿½è¸ªæ•´ä¸ªç»„ä»¶æ ‘çš„å˜åŒ–ã€‚
- å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒSolid.js å¯ä»¥ç²¾ç¡®åœ°ç¡®å®šå“ªäº›è¡¨è¾¾å¼ä¾èµ–äºè¯¥æ•°æ®ï¼Œå¹¶ä»…æ›´æ–°ç›¸å…³çš„éƒ¨åˆ†ã€‚
- Solid.js é‡‡ç”¨ç›´æ¥çš„ DOM æ›´æ–°æ–¹å¼ï¼Œè€Œä¸ä½¿ç”¨è™šæ‹Ÿ DOMï¼Œä»¥å‡å°‘ä¸å¿…è¦çš„å¼€é”€ï¼Œæé«˜æ¸²æŸ“æ€§èƒ½ã€‚

### è·¨ç«¯æ–¹æ¡ˆ

æ—©æœŸ H5 å’Œ Hybrid æ–¹æ¡ˆçš„æœ¬è´¨æ˜¯ï¼Œåˆ©ç”¨å®¢æˆ·ç«¯ App çš„å†…ç½®æµè§ˆå™¨ï¼ˆä¹Ÿå°±æ˜¯ webviewï¼‰åŠŸèƒ½ï¼Œé€šè¿‡å¼€å‘å‰ç«¯çš„ H5 é¡µé¢æ»¡è¶³è·¨å¹³å°éœ€æ±‚ã€‚æ¯”å¦‚ PhoneGap cordova ionic

#### weex

Weex é‡‡ç”¨äº†ä¸€ç§å°†ç»„ä»¶æ ‘è½¬æ¢ä¸ºåŸç”Ÿæ§ä»¶çš„æ–¹å¼è¿›è¡Œæ¸²æŸ“ã€‚åœ¨è¿è¡Œæ—¶ï¼ŒWeex çš„æ¸²æŸ“å¼•æ“ä¼šè§£æç»„ä»¶æ ‘ï¼Œå¹¶é€šè¿‡ä¸åº•å±‚çš„åŸç”Ÿæ¸²æŸ“å¼•æ“è¿›è¡Œé€šä¿¡ï¼Œå°†ç»„ä»¶æ˜ å°„ä¸ºå¯¹åº”çš„åŸç”Ÿæ§ä»¶ã€‚

Weex çš„æ¸²æŸ“åŸç†ä¸­ï¼Œåº•å±‚çš„åŸç”Ÿæ¸²æŸ“å¼•æ“è´Ÿè´£å®é™…çš„ UI æ¸²æŸ“å·¥ä½œï¼ŒWeex çš„æ¸²æŸ“å¼•æ“å……å½“ä¸€ä¸ªä¸­é—´å±‚ï¼Œè´Ÿè´£è½¬å‘æŒ‡ä»¤å’Œæ•°æ®æ›´æ–°ç­‰æ“ä½œã€‚

å’Œç›®å‰å°ç¨‹åºå¾ˆåƒ

#### react native

ä½¿ç”¨ React æ¥åˆ›å»º Android å’Œ iOS çš„åŸç”Ÿåº”ç”¨

React Native ä½¿ç”¨äº†ä¸€ç§æ¡¥æ¥æœºåˆ¶ï¼ˆBridgeï¼‰ï¼Œå®ƒçš„ä½œç”¨æ˜¯å°† React ç»„ä»¶æ˜ å°„åˆ°å¯¹åº”çš„åŸç”Ÿæ§ä»¶ã€‚è¿™æ„å‘³ç€ React Native åº”ç”¨çš„ç•Œé¢å¹¶éå®Œå…¨ç”±åŸç”Ÿæ§ä»¶æ„æˆï¼Œè€Œæ˜¯åœ¨åŸç”Ÿåº”ç”¨ä¸­åµŒå…¥äº†ä¸€ä¸ªç‰¹æ®Šçš„è§†å›¾å±‚ï¼Œè¯¥è§†å›¾å±‚è´Ÿè´£å¤„ç† React ç»„ä»¶çš„æ¸²æŸ“å’Œäº¤äº’ã€‚

å½“ React ç»„ä»¶éœ€è¦åœ¨å±å¹•ä¸Šæ˜¾ç¤ºæ—¶ï¼ŒReact Native çš„æ¡¥æ¥æœºåˆ¶ä¼šå°†ç»„ä»¶çš„æè¿°ä¿¡æ¯ä¼ é€’ç»™åŸç”Ÿå±‚ã€‚åŸç”Ÿå±‚æ ¹æ®è¿™äº›æè¿°ä¿¡æ¯ï¼Œå»åˆ›å»ºå¯¹åº”çš„åŸç”Ÿæ§ä»¶ï¼Œå¹¶å°†è¿™äº›æ§ä»¶æ”¾ç½®åœ¨æ­£ç¡®çš„ä½ç½®ä¸Šï¼Œå½¢æˆäº†ç»„ä»¶åœ¨å±å¹•ä¸Šçš„å¯è§éƒ¨åˆ†ã€‚

#### flutter

Flutter ä½¿ç”¨è‡ªç»˜å¼•æ“è¿›è¡Œæ¸²æŸ“ï¼Œä¹Ÿç§°ä¸º Skia æ¸²æŸ“å¼•æ“ã€‚å®ƒé€šè¿‡ä½¿ç”¨è‡ªå®šä¹‰çš„æ¸²æŸ“å¼•æ“ï¼Œç»•è¿‡äº†åŸç”Ÿå¹³å°çš„ UI ç»„ä»¶ï¼Œç›´æ¥åœ¨å±å¹•ä¸Šç»˜åˆ¶ UIã€‚

Flutter çš„è‡ªç»˜å¼•æ“ä½¿ç”¨ Skia å›¾å½¢åº“è¿›è¡Œç»˜åˆ¶ï¼Œå°†æ‰€æœ‰çš„ UI ç»„ä»¶éƒ½æŠ½è±¡ä¸ºç»˜åˆ¶æŒ‡ä»¤ï¼Œå¹¶é€šè¿‡ç¡¬ä»¶åŠ é€Ÿæ¥å®ç°é«˜æ€§èƒ½çš„å›¾å½¢æ¸²æŸ“ã€‚

Weex å’Œ Flutter åœ¨æ€§èƒ½æ–¹é¢æœ‰æ‰€ä¸åŒã€‚**Weex çš„æ¸²æŸ“å¼•æ“éœ€è¦ä¸åŸç”Ÿæ¸²æŸ“å¼•æ“è¿›è¡Œé€šä¿¡ï¼Œå¯èƒ½ä¼šå¼•å…¥ä¸€å®šçš„æ€§èƒ½å¼€é”€**ã€‚è€Œ Flutter çš„è‡ªç»˜å¼•æ“èƒ½å¤Ÿç›´æ¥æ“ä½œåº•å±‚å›¾å½¢åº“ï¼Œå…·æœ‰è¾ƒé«˜çš„æ¸²æŸ“æ€§èƒ½ã€‚

### ç¼–è¯‘å‹è¯­è¨€

- rust
  - ç±»ä¼¼ c++ï¼Œå¯ç›´æ¥æ“ä½œåº•å±‚ï¼Œæ›´å¿«ï¼Œæ²¡è¿è¡Œç¯å¢ƒï¼Œgc éœ€è¦æ‰‹åŠ¨ç»´æŠ¤
  - Rust é€Ÿåº¦æƒŠäººä¸”å†…å­˜åˆ©ç”¨ç‡æé«˜ã€‚ç”±äºæ²¡æœ‰è¿è¡Œæ—¶å’Œåƒåœ¾å›æ”¶ï¼Œå®ƒèƒ½å¤Ÿèƒœä»»å¯¹æ€§èƒ½è¦æ±‚ç‰¹åˆ«é«˜çš„æœåŠ¡ï¼Œå¯ä»¥åœ¨åµŒå…¥å¼è®¾å¤‡ä¸Šè¿è¡Œï¼Œè¿˜èƒ½è½»æ¾å’Œå…¶ä»–è¯­è¨€é›†æˆã€‚
    - é«˜æ€§èƒ½ï¼šrust æ²¡æœ‰è¿è¡Œç¯å¢ƒï¼ŒæŒ‡çš„æ˜¯ rust ç¼–è¯‘åç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶ä¸ä¾èµ–äºä»»ä½•è¿è¡Œæ—¶ç¯å¢ƒï¼Œè€Œ js åˆ™éœ€è¦è¿è¡Œæ—¶ç¯å¢ƒã€‚
    - å¯é æ€§ï¼šRust å¼•å…¥äº†æ‰€æœ‰æƒç³»ç»Ÿå’Œå€Ÿç”¨æ£€æŸ¥å™¨ï¼Œç”Ÿå‘½å‘¨æœŸç­‰æœºåˆ¶ã€‚è¿™äº›æœºåˆ¶ä½¿ç¼–è¯‘å™¨èƒ½å¤Ÿåœ¨ç¼–è¯‘æœŸé—´è¿›è¡Œé™æ€åˆ†æï¼Œç¡®ä¿æ²¡æœ‰æ•°æ®ç«äº‰å’Œå†…å­˜è®¿é—®é”™è¯¯ã€‚é€šè¿‡åœ¨ç¼–è¯‘æ—¶å¤„ç†å†…å­˜ç®¡ç†ï¼ŒRust å¯ä»¥é¿å…åŠ¨æ€è¿è¡Œæ—¶çš„å¼€é”€å’Œåƒåœ¾å›æ”¶å¸¦æ¥çš„æ€§èƒ½æŸå¤±ã€‚
- go
  - esbuild
  -

### æ„å»ºå·¥å…·

- webpack
  - æ’ä»¶ï¼Œloader
- vite
  - åœ¨æµè§ˆå™¨æ”¯æŒ ES æ¨¡å—ä¹‹å‰ï¼ŒJavaScript å¹¶æ²¡æœ‰æä¾›åŸç”Ÿæœºåˆ¶è®©å¼€å‘è€…ä»¥æ¨¡å—åŒ–çš„æ–¹å¼è¿›è¡Œå¼€å‘ã€‚
  - ä½¿ç”¨ ES æ¨¡å—åŸç”Ÿæ¨¡å—ï¼Œå°†æ¨¡å—çš„ä¾èµ–å…³ç³»æ¨è¿Ÿåˆ°æµè§ˆå™¨è¿è¡Œæ—¶ï¼Œä½¿å¾—å¯åŠ¨é˜¶æ®µå¾ˆå¿«
  - é¢„æ„å»ºï¼švite ä¼šä½¿ç”¨ esbuild é¢„æ„å»ºé‚£äº›ç¬¬ä¸‰æ–¹åŒ…ï¼Œé¦–æ¬¡è®¿é—®æŸä¸ªæ¨¡å—æ—¶ï¼Œå°†è¯¥æ¨¡å—ç‹¬ç«‹åœ°æ„å»ºä¸ºä¸€ä¸ªåŒ…ï¼Œå¹¶ç¼“å­˜èµ·æ¥
  - æŒ‰éœ€ç¼–è¯‘ï¼šVite åªç¼–è¯‘é‚£äº›è¢«å½“å‰é¡µé¢æ‰€éœ€è¦çš„æ¨¡å—ï¼Œè¿™æ˜¯å› ä¸ºå®ƒä¾èµ–äºæµè§ˆå™¨çš„ ES æ¨¡å—åŠ è½½èƒ½åŠ›ï¼Œå°†æ¨¡å—çš„ä¾èµ–å…³ç³»æ¨è¿Ÿåˆ°äº†æµè§ˆå™¨è¿è¡Œæ—¶
    - è¿™æ ·ï¼Œå½“æµè§ˆå™¨è¯·æ±‚ä¸€ä¸ªæ¨¡å—æ—¶ï¼ŒVite å¯ä»¥æ ¹æ®å®é™…éœ€è¦ï¼Œä»…æ„å»ºè¯¥æ¨¡å—åŠå…¶ç›¸å…³çš„ä¾èµ–æ¨¡å—ï¼Œè€Œæ— éœ€é‡æ–°æ„å»ºæ•´ä¸ªé¡¹ç›®
    - è€Œ webpack å°†æ‰€æœ‰æ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ªæ†ç»‘åŒ…ï¼Œä»¥ä¾¿åœ¨æµè§ˆå™¨ä¸­åŠ è½½ï¼Œæ— æ³•å®ç°ç²¾ç¡®çš„æŒ‰éœ€ç¼–è¯‘
  - ç¼“å­˜ï¼šå°†ç¼–è¯‘å¥½çš„èµ„æºç¼“å­˜èµ·æ¥
  - HMRï¼šåªæ›¿æ¢å˜æ›´çš„åœ°æ–¹ï¼Œæœ€å°åŒ–æ”¹åŠ¨ã€‚
  - ä¸ºä»€ä¹ˆç”Ÿäº§ç¯å¢ƒä¾ç„¶éœ€è¦æ‰“åŒ…
    - å°½ç®¡åŸç”Ÿ ESM ç°åœ¨å¾—åˆ°äº†å¹¿æ³›æ”¯æŒï¼Œä½†ç”±äº**åµŒå¥—å¯¼å…¥ä¼šå¯¼è‡´é¢å¤–çš„ç½‘ç»œå¾€è¿”**ï¼Œåœ¨**ç”Ÿäº§ç¯å¢ƒä¸­å‘å¸ƒæœªæ‰“åŒ…çš„ ESM ä»ç„¶æ•ˆç‡ä½ä¸‹ï¼ˆå³ä½¿ä½¿ç”¨ HTTP/2ï¼‰**
  - ä¸ºä»€ä¹ˆä¸ç”¨ esbuild æ‰“åŒ…
    - Vite ç›®å‰çš„æ’ä»¶ API ä¸ä½¿ç”¨ esbuild ä½œä¸ºæ‰“åŒ…å™¨å¹¶ä¸å…¼å®¹
    - Rollup å·²ç»å¼€å§‹ç€æ‰‹æ”¹è¿›æ€§èƒ½ï¼Œåœ¨ v4 ä¸­å°†å…¶è§£æå™¨åˆ‡æ¢åˆ° SWCã€‚å°±å¯ä»¥åœ¨ Vite ä¸­å–ä»£ Rollup å’Œ esbuildï¼Œæ˜¾è‘—æé«˜æ„å»ºæ€§èƒ½ï¼Œå¹¶æ¶ˆé™¤å¼€å‘å’Œæ„å»ºä¹‹é—´çš„ä¸ä¸€è‡´æ€§
    - SWC é€šè¿‡åˆ©ç”¨ Rust è¯­è¨€çš„ä¼˜åŠ¿å’Œå¹¶è¡Œå¤„ç†æŠ€æœ¯ï¼Œå®ç°äº†å‡ºè‰²çš„ç¼–è¯‘æ€§èƒ½ï¼Œå¯ä»¥å–ä»£ babelï¼Œä¾§é‡äºç¼–è¯‘å™¨ï¼Œè€Œ esbuild æ˜¯æ‰“åŒ…å™¨ã€‚
- rollup
- parcel
- esbuild
  - go
- respack
  - rust
- swc
  - rust

## 20231130 å‘¨å››

### æ‰¾å‡ºæ•°ç»„ä¸­ä¸åŒçš„å€¼

```js
const difference = (arr1, arr2) => {
  const map = {}
  const res = []
  arr1.forEach((v) => (map[v] = v))

  arr2.forEach((v) => {
    if (map[v] === void 0) {
      res.push(v)
    } else {
      delete map[v]
    }
  })
  return res.concat(Object.values(map))
}
difference([2, 1], [2, 3]) // [3, 1]

const difference = (arr1, arr2) => {
  const map = {}
  arr1.forEach((v) => (map[v] = v))

  return arr2.reduce((acc, cur) => {
    if (map[cur] === void 0) {
      acc.push(cur)
    } else {
      // åˆ é™¤å¤šä½™çš„
      delete map[cur]
    }
    console.log('djch acc', acc)
    // æ‹¼æ¥ä¹‹å‰çš„ï¼Œç„¶åå†å»é‡
    return [...new Set(acc.concat(Object.values(map)))]
  }, [])
}
difference([2, 1], [2, 3])

const difference = (arr1, arr2) => {
  const map = {}
  arr1.forEach((v) => (map[v] = v))

  arr2.forEach((v) => {
    if (map[v] === void 0) {
      map[v] = v
    } else {
      delete map[v]
    }
  })
  return Object.values(map)
}
difference([2, 1], [2, 3]) // [1, 3]
```

### ä½œç”¨åŸŸ

```js
function bar() {
  console.log(myName)
}
function foo() {
  var myName = 'æå®¢é‚¦'
  bar()
}
var myName = 'æå®¢æ—¶é—´'
foo() // æå®¢æ—¶é—´
```

å…¶å®åœ¨æ¯ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡ç¯å¢ƒä¸­ï¼Œéƒ½åŒ…å«äº†ä¸€ä¸ªå¤–éƒ¨å¼•ç”¨ï¼Œç”¨æ¥æŒ‡å‘å¤–éƒ¨çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªå¤–éƒ¨å¼•ç”¨ç§°ä¸º outerã€‚å½“ä¸€æ®µä»£ç ä½¿ç”¨äº†ä¸€ä¸ªå˜é‡æ—¶ï¼ŒJavaScript å¼•æ“é¦–å…ˆä¼šåœ¨â€œå½“å‰çš„æ‰§è¡Œä¸Šä¸‹æ–‡â€ä¸­æŸ¥æ‰¾è¯¥å˜é‡ï¼Œå¦‚æœåœ¨å½“å‰çš„å˜é‡ç¯å¢ƒä¸­æ²¡æœ‰æŸ¥æ‰¾åˆ°ï¼Œé‚£ä¹ˆ JavaScript å¼•æ“ä¼šç»§ç»­åœ¨ outer æ‰€æŒ‡å‘çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾ã€‚æˆ‘ä»¬æŠŠè¿™ä¸ª**é€šè¿‡ä½œç”¨åŸŸæŸ¥æ‰¾å˜é‡çš„é“¾æ¡å«åšä½œç”¨åŸŸé“¾ï¼Œåˆ‡è®°åˆ‡è®°ï¼šä½œç”¨åŸŸé“¾çš„é¡ºåºä¸æ‰§è¡Œæ ˆçš„é¡ºåºä¸ä¸€å®šç›¸åŒ**

ä½œç”¨åŸŸé“¾ï¼šé€šè¿‡ä½œç”¨åŸŸæŸ¥æ‰¾å˜é‡çš„é“¾æ¡ï¼Œè€Œä½œç”¨åŸŸå¯ä»¥ç†è§£ä¸ºæ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ä½†å’Œè°ƒç”¨æ ˆçš„é¡ºåºè¿˜ä¸ç›¸åŒ

**é‚£è¿™ä¸ªä½œç”¨åŸŸé“¾çš„é¡ºåºæ˜¯ç”±ä»€ä¹ˆç¡®å®šçš„å‘¢**ï¼Ÿ

ç­”æ¡ˆæ˜¯ï¼šè¯æ³•ä½œç”¨åŸŸï¼Œè¯æ³•ä½œç”¨åŸŸå°±æ˜¯æŒ‡ä½œç”¨åŸŸæ˜¯ç”±ä»£ç ä¸­**å‡½æ•°å£°æ˜çš„ä½ç½®**æ¥å†³å®šçš„ï¼Œæ‰€ä»¥è¯æ³•ä½œç”¨åŸŸæ˜¯é™æ€çš„ä½œç”¨åŸŸï¼Œé€šè¿‡å®ƒå°±èƒ½å¤Ÿé¢„æµ‹ä»£ç åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚ä½•æŸ¥æ‰¾æ ‡è¯†ç¬¦ã€‚è€Œè¯æ³•ä½œç”¨åŸŸæ˜¯ä»£ç é˜¶æ®µå°±å†³å®šå¥½çš„ï¼Œå’Œå‡½æ•°æ˜¯åœ¨å“ªè°ƒç”¨çš„æ²¡æœ‰å…³ç³»ã€‚

å› æ­¤ä¸Šé¢ bar å‡½æ•°è™½ç„¶åœ¨ foo å‡½æ•°å†…éƒ¨è°ƒç”¨çš„ï¼Œ**ä½† bar å®šä¹‰åœ¨å…¨å±€ï¼Œå› æ­¤ä¾ç„¶å»å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡ç¯å¢ƒä¸­å»æ‰¾ myNameã€‚**

åœ¨ JavaScript ä¸­ï¼Œæ ¹æ®è¯æ³•ä½œç”¨åŸŸçš„è§„åˆ™ï¼Œå†…éƒ¨å‡½æ•°æ€»æ˜¯å¯ä»¥è®¿é—®å…¶å¤–éƒ¨å‡½æ•°ä¸­å£°æ˜çš„å˜é‡ï¼Œå½“é€šè¿‡è°ƒç”¨ä¸€ä¸ªå¤–éƒ¨å‡½æ•°è¿”å›ä¸€ä¸ªå†…éƒ¨å‡½æ•°åï¼Œå³ä½¿è¯¥å¤–éƒ¨å‡½æ•°å·²ç»æ‰§è¡Œç»“æŸäº†ï¼Œä½†æ˜¯å†…éƒ¨å‡½æ•°å¼•ç”¨å¤–éƒ¨å‡½æ•°çš„å˜é‡ä¾ç„¶ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œæˆ‘ä»¬å°±æŠŠè¿™äº›å˜é‡çš„é›†åˆç§°ä¸ºé—­åŒ…ã€‚æ¯”å¦‚å¤–éƒ¨å‡½æ•°æ˜¯ fooï¼Œé‚£ä¹ˆè¿™äº›å˜é‡çš„é›†åˆå°±ç§°ä¸º foo å‡½æ•°çš„é—­åŒ…ã€‚

### å˜é‡æå‡

```js
showName()
var showName = function () {
  console.log(2)
}
function showName() {
  console.log(1)
}
```

### å †æ ˆæº¢å‡º

å› ä¸º V8 å¹¶ä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç³»ç»Ÿï¼Œæ‰€ä»¥åœ¨æ‰§è¡Œæ—¶ï¼Œå®ƒçš„ä¸€éƒ¨åˆ†åŸºç¡€ç¯å¢ƒæ˜¯ç”±å®¿ä¸»æä¾›çš„ï¼Œè¿™åŒ…æ‹¬äº†å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ã€äº‹ä»¶å¾ªç¯ç³»ç»Ÿï¼Œå †ç©ºé—´å’Œæ ˆç©ºé—´ã€‚é™¤äº†éœ€è¦å®¿ä¸»æä¾›çš„ä¸€äº›åŸºç¡€ç¯å¢ƒä¹‹å¤–ï¼ŒV8 è‡ªèº«ä¼šæä¾› JavaScript çš„æ ¸å¿ƒåŠŸèƒ½å’Œåƒåœ¾å›æ”¶ç³»ç»Ÿã€‚

å®¿ä¸»ç¯å¢ƒåœ¨å¯åŠ¨è¿‡ç¨‹ä¸­ï¼Œä¼šæ„é€ å †ç©ºé—´ï¼Œç”¨æ¥å­˜æ”¾ä¸€äº›å¯¹è±¡æ•°æ®ï¼Œè¿˜ä¼šæ„é€ æ ˆç©ºé—´ï¼Œç”¨æ¥å­˜æ”¾åŸç”Ÿæ•°æ®ã€‚ç”±äºå †ç©ºé—´ä¸­çš„æ•°æ®ä¸æ˜¯çº¿æ€§å­˜å‚¨çš„ï¼Œæ‰€ä»¥å †ç©ºé—´å¯ä»¥å­˜æ”¾å¾ˆå¤šæ•°æ®ï¼Œ**ä½†æ˜¯è¯»å–çš„é€Ÿåº¦ä¼šæ¯”è¾ƒæ…¢ï¼Œè€Œæ ˆç©ºé—´æ˜¯è¿ç»­çš„ï¼Œæ‰€ä»¥æ ˆç©ºé—´ä¸­çš„æŸ¥æ‰¾é€Ÿåº¦éå¸¸å¿«ï¼Œä½†æ˜¯è¦åœ¨å†…å­˜ä¸­æ‰¾åˆ°ä¸€å—è¿ç»­çš„åŒºåŸŸå´æ˜¾å¾—æœ‰ç‚¹éš¾åº¦ï¼Œäºæ˜¯æ‰€æœ‰çš„ç¨‹åºéƒ½é™åˆ¶æ ˆç©ºé—´çš„å¤§å°ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ç»å¸¸å®¹æ˜“å‡ºç°æ ˆæº¢å‡ºçš„ä¸€ä¸ªä¸»è¦åŸå› ã€‚**

```js
function getStackDepth() {
  let depth = 0

  function recursiveCall() {
    depth++
    recursiveCall()
  }

  try {
    recursiveCall()
  } catch (error) {
    // æ•è·å †æ ˆæº¢å‡ºé”™è¯¯
    // åœ¨è¿™é‡Œå¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œå¤„ç†
  }

  return depth
}

const stackDepth = getStackDepth()
console.log('Stack depth:', stackDepth) // 9177 è¿™ä¸ªä¸œè¥¿ä¸æ˜¯ä¸€å®šçš„ï¼Œåœ¨nodeç¯å¢ƒæ·±åº¦ä¸ºï¼š10514
```

## 20231128 å‘¨äºŒ

### è®¾è®¡ä¸€ä¸ªå…¨æ ˆç³»ç»Ÿéœ€è¦è€ƒè™‘å“ªäº›

- æ¶æ„è®¾è®¡ï¼šç¡®å®šç³»ç»Ÿçš„æ•´ä½“æ¶æ„ï¼ŒåŒ…æ‹¬å‰ç«¯ä¸åç«¯ä¹‹é—´çš„é€šä¿¡æ–¹å¼å’Œæ•°æ®ä¼ è¾“æ ¼å¼ã€‚å¸¸è§çš„é€‰æ‹©åŒ…æ‹¬ RESTful APIã€GraphQL ç­‰ã€‚ç¡®ä¿å‰åç«¯ä¹‹é—´çš„æ¥å£è®¾è®¡åˆç†ã€æ¸…æ™°ï¼Œå¹¶èƒ½å¤Ÿæ»¡è¶³ç³»ç»Ÿéœ€æ±‚ã€‚

- æ•°æ®æµç®¡ç†ï¼šé€‰æ‹©åˆé€‚çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼Œä¾‹å¦‚ Vue ä¸­çš„ Vuexï¼Œç”¨äºç®¡ç†å‰ç«¯åº”ç”¨ç¨‹åºçš„çŠ¶æ€å’Œæ•°æ®æµã€‚è€ƒè™‘å‰ç«¯ä¸åç«¯ä¹‹é—´çš„æ•°æ®äº¤äº’ï¼Œå¦‚ä½•å°†åç«¯è¿”å›çš„æ•°æ®åŒæ­¥åˆ°å‰ç«¯çš„çŠ¶æ€ç®¡ç†ä¸­ï¼Œä»¥åŠå¦‚ä½•å°†å‰ç«¯çš„ç”¨æˆ·æ“ä½œå‘é€ç»™åç«¯è¿›è¡Œå¤„ç†ã€‚

- æ¥å£è®¾è®¡ï¼šè®¾è®¡åç«¯çš„ API æ¥å£ï¼Œå®šä¹‰è¯·æ±‚å’Œå“åº”çš„æ•°æ®ç»“æ„ã€å‚æ•°éªŒè¯ã€é”™è¯¯å¤„ç†ç­‰ã€‚ç¡®ä¿æ¥å£è®¾è®¡ç¬¦åˆ RESTful åŸåˆ™æˆ–å…¶ä»–çº¦å®šï¼Œå¹¶èƒ½å¤Ÿæ»¡è¶³å‰ç«¯çš„æ•°æ®éœ€æ±‚ã€‚

- å®‰å…¨æ€§ï¼šç¡®ä¿ç³»ç»Ÿçš„å®‰å…¨æ€§ï¼ŒåŒ…æ‹¬å‰ç«¯ä¸åç«¯çš„èº«ä»½éªŒè¯å’Œæˆæƒæœºåˆ¶ï¼Œé˜²æ­¢æ½œåœ¨çš„å®‰å…¨æ¼æ´å’Œæ”»å‡»ã€‚ä½¿ç”¨é€‚å½“çš„å®‰å…¨æ€§æªæ–½ï¼Œå¦‚ HTTPSã€è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰é˜²æŠ¤ã€è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆCSRFï¼‰é˜²æŠ¤ç­‰ã€‚

- æ€§èƒ½ä¼˜åŒ–ï¼šè€ƒè™‘ç³»ç»Ÿçš„æ€§èƒ½ä¼˜åŒ–ï¼ŒåŒ…æ‹¬å‰ç«¯çš„åŠ è½½é€Ÿåº¦ã€æ¸²æŸ“æ€§èƒ½ä»¥åŠåç«¯çš„å“åº”æ—¶é—´å’Œååé‡ã€‚ä½¿ç”¨åˆé€‚çš„æŠ€æœ¯å’Œå·¥å…·ï¼Œå¦‚å‰ç«¯çš„ä»£ç å‹ç¼©ã€ç¼“å­˜æœºåˆ¶ã€æ‡’åŠ è½½ç­‰ï¼Œåç«¯çš„æ•°æ®åº“ç´¢å¼•ã€ç¼“å­˜ã€å¼‚æ­¥å¤„ç†ç­‰ã€‚

- æ—¥å¿—å’Œç›‘æ§ï¼šé…ç½®é€‚å½“çš„æ—¥å¿—è®°å½•å’Œç›‘æ§ç³»ç»Ÿï¼Œç”¨äºæ”¶é›†ç³»ç»Ÿçš„è¿è¡Œæ—¥å¿—å’Œæ€§èƒ½æŒ‡æ ‡ã€‚è¿™æ ·å¯ä»¥æ–¹ä¾¿æ’æŸ¥é—®é¢˜ã€ç›‘æ§ç³»ç»Ÿè¿è¡ŒçŠ¶æ€ï¼Œå¹¶åŠæ—¶å‘ç°å’Œè§£å†³æ½œåœ¨çš„å¼‚å¸¸æƒ…å†µã€‚

- éƒ¨ç½²å’Œè¿ç»´ï¼šè€ƒè™‘ç³»ç»Ÿçš„éƒ¨ç½²å’Œè¿ç»´æµç¨‹ï¼ŒåŒ…æ‹¬å‰ç«¯çš„æ‰“åŒ…å’Œå‘å¸ƒã€åç«¯çš„éƒ¨ç½²å’Œæ‰©å±•ã€‚é€‰æ‹©åˆé€‚çš„éƒ¨ç½²æ–¹å¼ï¼Œå¦‚å®¹å™¨åŒ–éƒ¨ç½²ï¼ˆå¦‚ Dockerï¼‰ã€è‡ªåŠ¨åŒ–éƒ¨ç½²å·¥å…·ï¼ˆå¦‚ Jenkinsï¼‰ç­‰ï¼Œä»¥ä¾¿æ›´é«˜æ•ˆåœ°è¿›è¡Œç³»ç»Ÿçš„éƒ¨ç½²å’Œç»´æŠ¤ã€‚

- æµ‹è¯•å’Œè´¨é‡ä¿è¯ï¼šå»ºç«‹é€‚å½“çš„æµ‹è¯•ç­–ç•¥å’Œæµç¨‹ï¼ŒåŒ…æ‹¬å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€ç«¯åˆ°ç«¯æµ‹è¯•ç­‰ï¼Œä»¥ç¡®ä¿ç³»ç»Ÿçš„è´¨é‡å’Œç¨³å®šæ€§ã€‚ä½¿ç”¨åˆé€‚çš„æµ‹è¯•å·¥å…·å’Œæ¡†æ¶ï¼Œå¦‚ Jestã€Mocha ç­‰ï¼Œè¿›è¡Œå…¨é¢çš„æµ‹è¯•è¦†ç›–ã€‚

### å¾®å‰ç«¯ã€å¾®æœåŠ¡

- å¾®å‰ç«¯ï¼šå¾®å‰ç«¯æ˜¯ä¸€ç§ç±»ä¼¼äºå¾®æœåŠ¡çš„æ¶æ„ï¼Œæ˜¯ä¸€ç§ç”±ç‹¬ç«‹äº¤ä»˜çš„å¤šä¸ªå‰ç«¯åº”ç”¨ç»„æˆæ•´ä½“çš„æ¶æ„é£æ ¼ï¼Œå°†å‰ç«¯åº”ç”¨åˆ†è§£æˆä¸€äº›æ›´å°ã€æ›´ç®€å•çš„èƒ½å¤Ÿç‹¬ç«‹å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²çš„åº”ç”¨ï¼Œè€Œåœ¨ç”¨æˆ·çœ‹æ¥ä»ç„¶æ˜¯å†…èšçš„å•ä¸ªäº§å“ã€‚æœ‰ä¸€ä¸ªåŸºåº§åº”ç”¨ï¼ˆä¸»åº”ç”¨ï¼‰ï¼Œæ¥ç®¡ç†å„ä¸ªå­åº”ç”¨çš„åŠ è½½å’Œå¸è½½ã€‚
- æ˜¯ä¸€ç§åç«¯æ¶æ„æ¨¡å¼ï¼Œå°†ä¸€ä¸ªå¤§å‹åº”ç”¨ç¨‹åºæ‹†åˆ†ä¸ºä¸€ç»„å°å‹ã€è‡ªæ²»çš„æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡ç‹¬ç«‹è¿è¡Œã€éƒ¨ç½²å’Œæ‰©å±•ã€‚æ¯ä¸ªæœåŠ¡è´Ÿè´£ç‰¹å®šçš„ä¸šåŠ¡åŠŸèƒ½ï¼Œå¯ä»¥ç”±ç‹¬ç«‹çš„å›¢é˜Ÿå¼€å‘å’Œç»´æŠ¤ï¼Œä½¿ç”¨é€‚åˆå…¶éœ€æ±‚çš„ç¼–ç¨‹è¯­è¨€å’ŒæŠ€æœ¯æ ˆã€‚å¾®æœåŠ¡é€šè¿‡è§£è€¦å’Œè‡ªæ²»çš„æœåŠ¡æ¶æ„ï¼Œæé«˜äº†ç³»ç»Ÿçš„å¯æ‰©å±•æ€§ã€çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚å¾®æœåŠ¡ä¹‹é—´é€šè¿‡ API è¿›è¡Œé€šä¿¡ï¼Œå¯ä»¥ä½¿ç”¨è½»é‡çº§çš„é€šä¿¡åè®®ï¼ˆå¦‚ HTTPã€RESTï¼‰æˆ–æ¶ˆæ¯é˜Ÿåˆ—ç­‰æ–¹å¼ã€‚
- Serverlessï¼ˆæ— æœåŠ¡å™¨ï¼‰æ˜¯ä¸€ç§äº‘è®¡ç®—æ¶æ„æ¨¡å¼ï¼Œå®ƒä½¿å¼€å‘è€…èƒ½å¤Ÿæ„å»ºå’Œè¿è¡Œåº”ç”¨ç¨‹åºè€Œæ— éœ€ç®¡ç†åº•å±‚çš„æœåŠ¡å™¨åŸºç¡€è®¾æ–½ã€‚åœ¨ä¼ ç»Ÿçš„æœåŠ¡å™¨æ¨¡å‹ä¸­ï¼Œå¼€å‘è€…éœ€è¦è‡ªè¡Œé…ç½®ã€ç®¡ç†å’Œæ‰©å±•æœåŠ¡å™¨ã€‚è€Œåœ¨ Serverless æ¨¡å‹ä¸­ï¼Œäº‘æœåŠ¡æä¾›å•†è´Ÿè´£ç®¡ç†åº•å±‚çš„æœåŠ¡å™¨èµ„æºï¼Œå¼€å‘è€…åªéœ€å…³æ³¨åº”ç”¨ç¨‹åºçš„ä¸šåŠ¡é€»è¾‘ã€‚

  - äº‹ä»¶é©±åŠ¨ï¼šServerless åº”ç”¨ç¨‹åºæ˜¯é€šè¿‡äº‹ä»¶è§¦å‘çš„ï¼Œä¾‹å¦‚ HTTP è¯·æ±‚ã€æ¶ˆæ¯é˜Ÿåˆ—ã€æ•°æ®åº“å˜æ›´ç­‰ã€‚å¼€å‘è€…ç¼–å†™å‡½æ•°ï¼ˆFunctionï¼‰æ¥å¤„ç†è¿™äº›äº‹ä»¶ï¼Œå¹¶å°†å‡½æ•°ä¸Šä¼ åˆ°äº‘å¹³å°ï¼Œäº‘å¹³å°ä¼šåœ¨äº‹ä»¶å‘ç”Ÿæ—¶è‡ªåŠ¨æ‰§è¡Œå‡½æ•°ã€‚
  - å¼¹æ€§æ‰©å±•ï¼šServerless å¹³å°æ ¹æ®äº‹ä»¶çš„è´Ÿè½½è‡ªåŠ¨è¿›è¡Œå¼¹æ€§æ‰©å±•ï¼Œæ ¹æ®éœ€è¦åˆ†é…å’Œé‡Šæ”¾èµ„æºï¼Œä½¿åº”ç”¨ç¨‹åºèƒ½å¤Ÿé€‚åº”ä¸åŒçš„è´Ÿè½½æƒ…å†µã€‚
  - ä»˜è´¹æ¨¡å‹ï¼š
  - æœåŠ¡ç®¡ç†ï¼šäº‘æœåŠ¡æä¾›å•†è´Ÿè´£ç®¡ç†åº•å±‚çš„æœåŠ¡å™¨åŸºç¡€è®¾æ–½ï¼ŒåŒ…æ‹¬æœåŠ¡å™¨çš„é…ç½®ã€éƒ¨ç½²ã€ç›‘æ§å’Œæ—¥å¿—è®°å½•ç­‰ï¼Œå¼€å‘è€…åªéœ€ä¸“æ³¨äºåº”ç”¨ç¨‹åºçš„å¼€å‘ã€‚

- ä¸ºä»€ä¹ˆä¸æ˜¯ iframe
  - iframe æœ€å¤§çš„ç‰¹æ€§å°±æ˜¯æä¾›äº†æµè§ˆå™¨åŸç”Ÿçš„ç¡¬éš”ç¦»æ–¹æ¡ˆï¼Œä¸è®ºæ˜¯æ ·å¼éš”ç¦»ã€js éš”ç¦»è¿™ç±»é—®é¢˜ç»Ÿç»Ÿéƒ½èƒ½è¢«å®Œç¾è§£å†³ã€‚
  - ä½†æœ€å¤§çš„é—®é¢˜ï¼ŒåŒæ ·ä¹Ÿåœ¨äºä»–çš„éš”ç¦»æ€§æ— æ³•è¢«çªç ´ï¼Œå¯¼è‡´åº”ç”¨é—´ä¸Šä¸‹æ–‡æ— æ³•è¢«å…±äº«ï¼Œéšä¹‹å¸¦æ¥çš„å¼€å‘ä½“éªŒã€äº§å“ä½“éªŒçš„é—®é¢˜ã€‚
    - url ä¸åŒæ­¥ã€‚æµè§ˆå™¨åˆ·æ–° iframe url çŠ¶æ€ä¸¢å¤±ã€åé€€å‰è¿›æŒ‰é’®æ— æ³•ä½¿ç”¨ã€‚
    - UI ä¸åŒæ­¥ï¼ŒDOM ç»“æ„ä¸å…±äº«ã€‚æƒ³è±¡ä¸€ä¸‹å±å¹•å³ä¸‹è§’ 1/4 çš„ iframe é‡Œæ¥ä¸€ä¸ªå¸¦é®ç½©å±‚çš„å¼¹æ¡†ï¼ŒåŒæ—¶æˆ‘ä»¬è¦æ±‚è¿™ä¸ªå¼¹æ¡†è¦æµè§ˆå™¨å±…ä¸­æ˜¾ç¤ºï¼Œè¿˜è¦æµè§ˆå™¨ resize æ—¶è‡ªåŠ¨å±…ä¸­..
    - å…¨å±€ä¸Šä¸‹æ–‡å®Œå…¨éš”ç¦»ï¼Œå†…å­˜å˜é‡ä¸å…±äº«ã€‚iframe å†…å¤–ç³»ç»Ÿçš„é€šä¿¡ã€æ•°æ®åŒæ­¥ç­‰éœ€æ±‚ï¼Œä¸»åº”ç”¨çš„ cookie è¦é€ä¼ åˆ°æ ¹åŸŸåéƒ½ä¸åŒçš„å­åº”ç”¨ä¸­å®ç°å…ç™»æ•ˆæœ
    - æ…¢ã€‚æ¯æ¬¡å­åº”ç”¨è¿›å…¥éƒ½æ˜¯ä¸€æ¬¡æµè§ˆå™¨ä¸Šä¸‹æ–‡é‡å»ºã€èµ„æºé‡æ–°åŠ è½½çš„è¿‡ç¨‹ã€‚

### å®ç°ä¸€ä¸ªç®€æ˜“çš„æ¨¡ç‰ˆå¼•æ“

é¡¾åæ€ä¹‰ï¼Œå…¶å®å°±æ˜¯è§£ææ¨¡ç‰ˆè€Œå·²

```js
function render(template, data) {
  const regex = /{{\s*([a-zA-Z0-9_.]+)\s*}}/g
  return template.replace(regex, (match, key) => {
    const keys = key.split('.')
    let value = data
    for (let k of keys) {
      value = value[k]
    }
    return value !== undefined ? value : match
  })
}

const template = 'Hello, {{ name }}! Today is {{ date.month }} {{ date.day }}.'

const data = {
  name: 'John Doe',
  date: {
    month: 'September',
    day: 28,
  },
}

const result = render(template, data)
console.log(result)
// è¾“å‡º: "Hello, John Doe! Today is September 28."
```

### å‘å¸ƒè®¢é˜…

```js
// å‘å¸ƒè®¢é˜…
class MyEvtEmitter {
  constructor() {
    this.map = new Map()
  }

  // æ·»åŠ äº‹ä»¶
  on(key, fn) {
    // ä¹‹å‰å­˜åœ¨è¿‡ï¼Œå°±å‹å…¥
    if (this.map.has(key)) {
      this.map.get(key).push(fn)
    } else {
      this.map.set(key, [fn])
    }
  }

  // è§¦å‘äº‹ä»¶
  emit(key) {
    if (!this.map.has(key)) {
      return 'äº‹ä»¶æœªå®šä¹‰'
    }

    this.map.get(key).forEach((fn) => fn())
  }

  del(key) {
    this.map.has(key) && this.map.delete(key)
  }

  once(key, fn) {
    const _fn = () => {
      // æ‰§è¡Œå®Œï¼Œå°±ç§»é™¤å¯¹åº”äº‹ä»¶
      fn()
      this.del(key)
    }
    this.on(key, _fn)
  }
}
```

### LRU ç¼“å­˜

```js
// æœ€å¤§size
//
class myLRU {
  constructor(size) {
    this.maxSize = size
    this.map = new Map()
  }
  get(key) {
    if (!this.map.has(key)) {
      return -1
    }

    // å¦‚æœå­˜åœ¨ï¼Œåˆ™æ‰¾åˆ°ï¼Œå¹¶é‡æ–°æ›´æ–°
    const val = this.map.get(key)
    this.del(key)
    this.set(key, val)
  }

  set(key, val) {
    // å¦‚æœæœ‰ï¼Œç›´æ¥åˆ é™¤
    if (this.map.has(key)) {
      this.del(key)
    }

    // åˆ¤æ–­æ˜¯å¦è¶…è¿‡é™åˆ¶
    if (this.map.size >= this.maxSize) {
      // åˆ é™¤æœ€åä¸€ä¸ª, this.map.keys() ç”Ÿæˆä¸€ä¸ªè¿­ä»£å™¨
      // è¿­ä»£å™¨è°ƒç”¨nextæ–¹æ³•ï¼Œå¾—åˆ°å¯¹åº”çš„å€¼ï¼Œvalueå°±æ˜¯å¯¹åº”çš„key
      this.del(this.map.keys().next().value)
    }
    this.map.set(key, val)
  }
  del(key) {
    this.map.delete(key)
  }
}

const cLru = new myLRU(2)
cLru.set('a', '111')
cLru.get('a')

// cLru.map.keys().next()
// {value: 'a', done: false}
```

### `console.log(1<2<3)`

- 1 < 2 è¿”å› true
- true < 3 è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œåˆä¼šè½¬åŒ–ä¸º 1 < 3 æœ€åè¿”å› true

### å†™ä¸€ä¸ª lodash çš„ get æ–¹æ³•

```js
const myGet = (obj, str, defaultValue) => {
  // str è‚¯å®šæ˜¯å­—ç¬¦ä¸²
  if (str === void 0) return obj

  return str.split('.').reduce((acc, cur) => {
    return acc[cur] ? acc[cur] : defaultValue || ''
  }, obj)
}

function myGet1(obj, path, defaultValue) {
  // åˆ¤æ–­æ˜¯æ•°ç»„è¿˜æ˜¯
  const keys = Array.isArray(path) ? path : path.split('.')
  let result = obj

  // éå†æ•°ç»„
  for (let key of keys) {
    // å¦‚æœ
    if (result && typeof result === 'object' && key in result) {
      result = result[key]
    } else {
      return defaultValue
    }
  }

  return result
}

// myGet({a: { b: 1 }}, 'a.b')
myGet1({ a: { b: 1 } }, 'a.b')
```

## 20231124 å‘¨äº”

### æœ‰åºæ•°ç»„çš„å¹³æ–¹

```js
var sortedSquares = function (nums) {
  // åˆ©ç”¨åŒæŒ‡é’ˆ
  let left = 0
  let right = nums.length - 1

  // ç„¶åç”Ÿæˆä¸€ä¸ªç©ºæ•°ç»„ï¼Œä½œä¸ºç»“æœæ•°ç»„
  let res = Array(nums.length).fill(0)
  let k = nums.length - 1

  while (left <= right) {
    let a = nums[left] * nums[left]
    let b = nums[right] * nums[right]

    if (a < b) {
      // å°†æœ€å¤§çš„æ”¾åœ¨æœ€å³ä¾§ï¼Œå› ä¸ºè´Ÿè´Ÿå¾—æ­£ï¼Œæœ€å¤§å€¼è‚¯å®šåœ¨ä¸¤ä¾§
      // å¦å¤–æ³¨æ„ï¼Œéœ€è¦æ–°å¢ä¸€ä¸ªæŒ‡é’ˆå’Œæ•°ç»„ï¼Œä½œä¸ºæœ€ç»ˆæ“ä½œçš„ï¼Œä¸è¦ä½¿ç”¨leftã€rightã€numsç­‰ï¼Œé˜²æ­¢å¹²æ‰°
      res[k--] = b
      right--
    } else {
      res[k--] = a
      left++
    }
  }
  return res
}
```

### ç¿»è½¬å­—ç¬¦ä¸²

- æ¯éš” 2k é¡¹ï¼Œç¿»è½¬å‰ k é¡¹

```js
var reverseStr = function (s, k) {
  // æ€è·¯ï¼šä»”ç»†å®¡é¢˜ï¼Œå…¶å®å°±æ˜¯ï¼Œå°†å­—ç¬¦ä¸²åˆ†å‰²æˆæ¯2kä¸ºä¸€ç»„ï¼Œç„¶åç¿»è½¬è¿™ä¸€ç»„ä¸­çš„å‰ké¡¹
  // å› æ­¤ï¼Œåªéœ€è¦åœ¨forå¾ªç¯ä¸Šåšæ–‡ç« å³å¯

  let len = s.length
  // ä¸è¦ç›´æ¥æ“ä½œå­—ç¬¦ä¸²ï¼Œ
  let resArr = s.split('')
  for (let i = 0; i < len; i += 2 * k) {
    // æ‰¾å‡ºæœ€å³ä¾§è¾¹ç•Œ
    let l = i
    let r = i + k - 1 > len ? len : i + k - 1

    while (l < r) {
      ;[resArr[l], resArr[r]] = [resArr[r], resArr[l]]
      l++
      r--
    }
  }
  return resArr.join('')
}
```

### æ‰‹å†™ä¸€ä¸ª new è¿ç®—ç¬¦

- new è¿ç®—ç¬¦æ˜¯å®ä¾‹åŒ–ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åå¾—åˆ°ä¸€ä¸ªå®ä¾‹
  - åˆ›å»ºä¸€ä¸ªå¯¹è±¡
  - è®©å¯¹è±¡çš„åŸå‹ç­‰äºå‡½æ•°çš„åŸå‹
  - æ‰§è¡Œå‡½æ•°
  - åˆ¤æ–­è¿”å›å€¼

```js
function Foo() {
  console.log('foo')
}
Foo.prototype.sayHi = () => console.log('hi')

let o = new Foo()

// ç­‰ä»·äº
function myNew() {
  // var o = Object.create(null);   //1ã€æ–°å»ºç©ºå¯¹è±¡ï¼Œè¿™é‡Œä¸è¦ä½¿ç”¨è¿™ä¸ªï¼Œå› ä¸ºä¼šæ–­æ‰ä¸€äº›é“¾æ¥
  var o = new Object() //1ã€æ–°å»ºç©ºå¯¹è±¡
  o.__proto__ = Foo.prototype //2ã€å»ºç«‹è¿æ¥
  let returnVal = Foo.call(o) //3ã€æ‰§è¡Œ
  if (typeof returnVal === 'object') {
    //4ã€åˆ¤æ–­è¿”å›å€¼
    return returnVal
  }
  return o
}
```

### js ä¸­ this çš„æŒ‡å‘

```js
// å› ä¸ºåœ¨ES5ä¸­ï¼Œå…¨å±€å˜é‡æ˜¯æŒ‚è½½åœ¨é¡¶å±‚å¯¹è±¡ï¼ˆæµè§ˆå™¨æ˜¯windowï¼‰ä¸­
var name = 'window'
var doSth = function () {
  console.log(this.name)
}
doSth() // window

// letæ²¡æœ‰ç»™é¡¶å±‚å¯¹è±¡ä¸­ï¼ˆæµè§ˆå™¨æ˜¯windowï¼‰æ·»åŠ å±æ€§ï¼Œwindow.name2å’Œwindow.doSthéƒ½æ˜¯undefinedã€‚
let name1 = 'window'
let doSth = function () {
  console.log(this === window)
  console.log(this.name1)
}
doSth() // trueï¼Œundefined
```

### å¤§æ•°å­—ç›¸ä¹˜

```js
var multiply = function (num1, num2) {
  // å¦‚æœæ²¡æœ‰è¿™ä¸ªåˆ¤æ–­ï¼Œä¼šè¶…æ—¶
  if (num1 === '0' || num2 === '0') {
    return '0'
  }
  // å­—ç¬¦ä¸²ç›¸åŠ çš„è¯ï¼Œåªéœ€è¦è¿›ä¸€æ¬¡ä½ï¼Œç›¸ä¹˜åˆ™å¯èƒ½è¿›ä½å¤šæ¬¡ã€‚ã€‚ã€‚
  // ä¸¤ä¸ªæ•°ç›¸ä¹˜ï¼Œæœ€å¤§ä½æ•°æ˜¯ m + n
  // å€’åºéå†ä¸¤ä¸ªæ•°,

  const len1 = num1.length
  const len2 = num2.length
  const res = Array(len1 + len2).fill(0)

  // è¿™é‡Œå…¶å®æ˜¯åŒå±‚å¾ªç¯ï¼Œæ‹¿ä¸€ä¸ªæ•°åˆ†åˆ«ä¹˜ä»¥å¦å¤–ä¸€ä¸ªæ•°å­—çš„å…¨éƒ¨ä½
  for (let i = len1 - 1; i >= 0; i--) {
    const a = +num1[i]
    for (let j = len2 - 1; j >= 0; j--) {
      const b = +num2[j]
      const multi = a * b // å­—ç¬¦ä¸²ç›¸ä¹˜ï¼Œç›´æ¥å˜æˆæ•°ç»„
      const sum = res[i + j + 1] + multi //

      res[i + j + 1] = sum % 10
      // æ•°ç»„çš„æ¯ä¸€é¡¹ï¼Œå¯ä»¥æ˜¯å¤šä¸ªä½æ•°
      // æ³¨æ„è¿™é‡Œæ˜¯ res[i + j] = res[i + j] + sum / 10 | 0
      res[i + j] += (sum / 10) | 0
    }
  }
  // å»é™¤å¤´éƒ¨0
  while (!res[0]) res.shift()

  return res.length ? res.join('') : '0'
}
```

### å¤§æ•°å­—ç›¸åŠ 

```js
// ä¸¤ä¸ªå¤§æ•°ç›¸åŠ 
var addStrings = function (num1, num2) {
    let result = '';
    let i = num1.length - 1, j = num2.length - 1, carry = 0;

    while (i >= 0 || j >= 0) {
        let n1 = i >= 0 ? +num1[i] : 0;
        let n2 = j >= 0 ? +num2[j] : 0;
        const temp = n1 + n2 + carry;
        // ğŸ”¥æ³¨æ„è¿™é‡Œï¼šä¸0æŒ‰ä½æˆ–ï¼Œäº§ç”Ÿçš„æ•ˆæœæ˜¯æŠŠå°æ•°éƒ¨åˆ†å¹²æ‰äº†
        // å…¶å®æœ¬è´¨æ˜¯ åœ¨ä½æ“ä½œç¬¦ | åœ¨æ‰§è¡Œä¹‹å‰ä¼šå°†æµ®ç‚¹æ•° xxx è½¬æ¢ä¸º32ä½ ğŸ”¥å¸¦ç¬¦å·æ•´æ•°ğŸ”¥ ã€‚è½¬æ¢è¿‡ç¨‹ä¸­ï¼Œæ•´æ•°éƒ¨åˆ†ä¿æŒä¸å˜ï¼Œå°æ•°éƒ¨åˆ†è¢«æˆªæ–­ã€‚
        // è€Œåé¢çš„0å°±æ˜¯ä¸€ä¸ªé™ªè¡¬ï¼Œç›¸æ¯”ä¸ Math.floor æ˜¯å‘ä¸‹å–æ•´ï¼ŒäºŒè€…çš„å«ä¹‰ä¸ä¸€æ ·
        carry = temp / 10 | 0;
        result = `${temp % 10}${result}`;
        i--; j--;
    }
    // å¤„ç†æœ€åä¸€ä¸ªè¿›ä½
    if (carry === 1) result = `1${result}`;

    return result;
};

// å…³äºè¿›åˆ¶è½¬åŒ– ï¼šå°æ•°éƒ¨åˆ†å¯ä»¥é€šè¿‡ä¹˜ä»¥ 2 å¹¶æå–æ•´æ•°éƒ¨åˆ†çš„æ–¹å¼é€æ­¥è½¬æ¢ä¸ºäºŒè¿›åˆ¶
0.58 * 2 = 1.16   // æ•´æ•°éƒ¨åˆ†ä¸º 1
0.16 * 2 = 0.32   // æ•´æ•°éƒ¨åˆ†ä¸º 0
0.32 * 2 = 0.64   // æ•´æ•°éƒ¨åˆ†ä¸º 0
0.64 * 2 = 1.28   // æ•´æ•°éƒ¨åˆ†ä¸º 1
0.28 * 2 = 0.56   // æ•´æ•°éƒ¨åˆ†ä¸º 0
0.56 * 2 = 1.12   // æ•´æ•°éƒ¨åˆ†ä¸º 1

// é‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œç›´åˆ°å°æ•°éƒ¨åˆ†ä¸º 0ï¼Œæˆ–è€…è¾¾åˆ°æ‰€éœ€çš„ç²¾åº¦ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¿ç•™å°æ•°ç‚¹åé¢çš„ä½æ•°ã€‚
// å› æ­¤ï¼Œ`0.58` çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸º `0.1001011001...`ï¼ˆæ— é™å¾ªç¯ï¼‰ã€‚
```

### ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ

```js
// å‡½æ•°å†…éƒ¨åˆ›å»ºçš„å‡½æ•°ä»¥åŠè¯¥å‡½æ•°èƒ½å¤Ÿè®¿é—®çš„å¤–éƒ¨å‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡çš„ç»„åˆ
```

### NaN null

```js
// åœ¨åŸºç¡€åº“é‡Œï¼Œåœ¨ç»è¿‡bridgeæ—¶ä¼šåºåˆ—åŒ–å¯¼è‡´ NaN å˜ä¸ºäº†ï¼Œå­—ç¬¦ä¸²çš„ 'null'
JSON.stringify(NaN) // 'null'
JSON.parse(JSON.stringify(NaN)) // null

// è€Œç»„ä»¶åœ¨å¤„ç†propsæ—¶ï¼Œåˆä¼šæ ¹æ®typeç±»å‹åšå¤„ç†
val === null ? '' : String(val)
```

### IIFE (Immediately Invoked Function Expressions)

```js
// function foo(){ }()  // ä¼šæŠ¥é”™ï¼Œä¼šè¢«è§£ææˆå‡½æ•°å®šä¹‰å’Œ () è€Œè°ƒç”¨æœ‰æ²¡æœ‰å…·ä½“çš„å‡½æ•°å

// åœ¨æ‰§è¡Œæ—¶ï¼Œå‡½æ•°è¡¨è¾¾å¼ (function foo(){ }) è¢«ç«‹å³è°ƒç”¨ï¼Œå‡½æ•°å foo åœ¨å‡½æ•°å¤–éƒ¨æ˜¯ä¸å¯è§çš„
// ğŸ”¥ fooæ‰§è¡Œå®Œå°±ä¼šç«‹å³é‡Šæ”¾
// ç”±äºè‡ªæ‰§è¡Œå‡½æ•°åœ¨å®šä¹‰æ—¶å°±è¢«ç«‹å³è°ƒç”¨ï¼Œå®ƒçš„ä¸»è¦ç›®çš„é€šå¸¸æ˜¯ä¸ºäº†åˆ›å»ºä¸€ä¸ªå±€éƒ¨ä½œç”¨åŸŸï¼Œä»¥é¿å…å˜é‡æ±¡æŸ“å…¨å±€å‘½åç©ºé—´
;(function foo() {})()(function foo() {})()
```

### a == 1 && a == 2 && a ==3

```js
// å¯ä»¥ä½¿ç”¨ä»£ç†ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¯¹è±¡çš„valueOfæ–¹æ³•
var a = {
  value: [1, 2, 3],
  // valueOf() æ–¹æ³•ã€‚è¯¥æ–¹æ³•åœ¨è¿›è¡Œéšå¼ç±»å‹è½¬æ¢æ—¶è¢«è°ƒç”¨
  valueOf: this.value.shift(),
}

// æ¯”è¾ƒ a == 1ã€‚ç”±äº a æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œ 1 æ˜¯ä¸€ä¸ªæ•°å­—ï¼ŒJavaScript ä¼šå°è¯•å°†å¯¹è±¡ a è½¬æ¢ä¸ºä¸€ä¸ªåŸå§‹å€¼è¿›è¡Œæ¯”è¾ƒã€‚è¿™æ—¶ä¼šè°ƒç”¨ a çš„ valueOf() æ–¹æ³•
console.log(a == 1 && a == 2 && a == 3) // true
```

### ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè§£æä¸€ä¸ªæ ‘çŠ¶ç»“æ„é‡Œçš„å€¼

```js
var arr = [1, [2, 3, [4, 5, [6, 6]]]]

const formatArr = (data) => {
  const flatArr = data.flat(Infinity)
  const noRepeatArr = [...new Set(flatArr)]
  return noRepeatArr.sort((a, b) => b - a)
}

const formatArrV1 = (data) => {
  // é’ˆå¯¹æ•°ç»„åšåºåˆ—åŒ–ï¼Œä¼šè‡ªåŠ¨æ‹å¹³ï¼Œæ³¨æ„æ˜¯Stringï¼Œä¸æ˜¯JSON.stringify
  // const flatArr = JSON.stringify(data) // '[1,[2,3,[4,5,[6,6]]]]'
  // String([1,[2,3,[4,5]]]) => '1,2,3,4,5'
  const flatArr = String(data)
    .split(',')
    .map((v) => +v)
  const noRepeatArr = flatArr.filter((v, idx, arr) => idx === arr.indexOf(v))
  return noRepeatArr.sort((a, b) => b - a)
}

console.log(formatArr(arr))
```

### ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè§£æåµŒå¥—å¯¹è±¡é‡Œçš„å€¼

```js
var obj = {
  'a.b.c': 1,
  'a.d.e': 2,
}
// æœ€åè¾“å‡º
var result = {
  a: {
    b: { c: 1 },
    d: { e: 2 },
  },
}

// æ€è·¯ï¼Œå…³é”®ç‚¹åœ¨äºå¦‚ä½•å°†æ–°ç”Ÿæˆçš„å¯¹è±¡ï¼ŒæŒ‚è½½åˆ°ä¹‹å‰çš„å±æ€§ä¸Š
var obj = { 'a.b.c': 1, 'a.c.d': 2 }
function formatObj(data) {
  let res = {}

  for (const key in data) {
    if (data.hasOwnProperty(key)) {
      const keyArr = key.split('.')

      // å› ä¸ºresæ˜¯æœ€ç»ˆç»“æœï¼Œéœ€è¦ä¸€ä¸ªåŠ¨æ€æŒ‡é’ˆï¼Œç±»ä¼¼é“¾è¡¨é‡Œï¼Œä¸€ä¸ªheadä¸åŠ¨ï¼Œç„¶åæ“ä½œä¸€ä¸ªæ¸¸åŠ¨æŒ‡é’ˆ
      let tempRes = res

      // éœ€è¦åˆ¤æ–­æœ€åä¸€ä¸ªå€¼ï¼Œ
      keyArr.forEach((k, idx) => {
        // å¦‚æœæ˜¯æœ€åä¸€ä¸ªï¼Œåˆ™èµ‹å€¼
        if (idx === keyArr.length - 1) {
          tempRes[k] = data[key]
        } else {
          // æ­¤æ—¶éœ€è¦æ–°å»ºå¯¹è±¡ï¼Œä¸éœ€è¦å¤åˆ¶
          tempRes[k] = tempRes[k] || {}
          // æŒ‡é’ˆç§»åŠ¨ï¼Œå› ä¸ºä¸‹ä¸€ä¸ªçš„å€¼ï¼Œè‚¯å®šæ˜¯æŒ‚è½½åœ¨ tempRes[k] çš„
          tempRes = tempRes[k]
        }
      })
    }
  }
  return res
}
console.log(formatObj(obj))
```

## 20231123 å‘¨å››

### äº‹ä»¶å¾ªç¯é˜Ÿåˆ—

- æ³¨æ„ä¸»çº¿ç¨‹ï¼Œæ¯”å¦‚å„ä¸ªç”Ÿå‘½å‘¨æœŸçš„æ‰§è¡Œï¼Œå³ä½¿ onLoad é‡Œæœ‰ await å‡½æ•°ï¼Œä¹Ÿä¸ä¼šé˜»æ–­ onShow çš„æ‰§è¡Œ å¦‚ä¸‹
  - å› ä¸ºå†…éƒ¨çš„ä»»åŠ¡å¯ä»¥ç†è§£ä¸ºå½“å‰ä¸»çº¿ç¨‹çš„å®ä»»åŠ¡æˆ–è€…å¾®ä»»åŠ¡ï¼Œåªä¼šé˜»æ–­å½“å‰ç”Ÿå‘½å‘¨æœŸå†…éƒ¨çš„é€»è¾‘
  - é‚£è¿™æ ·çš„è¯ï¼Œé¡µé¢åˆå§‹åŒ–ï¼ŒæŒ‰ç†è¯´ä¸åº”è¯¥æ¸²æŸ“çš„æ…¢å•Šï¼Ÿï¼Ÿï¼Ÿ
- å¾®ä»»åŠ¡æ³¨å†Œæ˜¯æœ‰é¡ºåºçš„ï¼Œå¦‚æœå‰ä¸€ä¸ªå¾®ä»»åŠ¡æ²¡æœ‰æ‰§è¡Œï¼Œåˆ™å®ƒæ¥ä¸‹æ¥çš„é‚£ä¸ªå¾®ä»»åŠ¡è‚¯å®šä¹Ÿä¸ä¼šæ³¨å†Œ

```js
onLoad()
onShow()
```

### promiseLimit

æ€è·¯ï¼š

1. ä¸€ä¸ªå‡½æ•°è´Ÿè´£å¾€é‡Œé¢æ·»åŠ æ‰§è¡Œå‡½æ•°
2. å¦å¤–ä¸€ä¸ªå‡½æ•°ï¼Œè´Ÿè´£æ‰§è¡Œå…·ä½“çš„ä»»åŠ¡

```js
const promiseLimit = (ps, limit) => {
  const res = []
  let runing = 0
  let idx = 0
  let len = ps.length

  return new Promise((resolve, reject) => {
    const runTask = (p, index) => {
      runing++
      console.log('æ­£åœ¨æ‰§è¡Œçš„æ•°é‡', runing)
      p()
        .then((v) => {
          runing--
          res[index] = v

          // ä»»åŠ¡æ‰§è¡Œå®Œï¼Œç»§ç»­è§¦å‘walk
          walk()
        })
        .catch((err) => reject(err))
    }

    const walk = () => {
      // å¦‚æœæ­£åœ¨æ‰§è¡Œçš„å°äºlimitï¼Œä¸”å·²ç»æ‰§è¡Œçš„æ€»æ•°å°äº len
      while (runing < limit && idx < len) {
        runTask(ps[idx], idx)
        idx++
      }
      // å¦‚æœæ‰§è¡Œå®Œï¼Œåˆ™resolove
      if (!runing) resolve(res)
    }
    walk()
  })
}
```

## 20231122 å‘¨ä¸‰

### åˆå¹¶ä¹±åºåŒºé—´

### æ‰‹åŠ¨å®ç°ä¸€ä¸ª vue çš„æ•°æ®åŠ«æŒ

æ€è·¯ï¼šå…¶å®å°±æ˜¯é€’å½’ + Object.defineProperty æˆ–è€… proxy

```js
const observe = (obj) => {
  // åªé’ˆå¯¹å¯¹è±¡åšå“åº”å¼æ‹¦æˆª
  if (!obj || typeof obj !== 'object') return

  // éå†å¯¹è±¡å±æ€§
  Object.keys(obj).forEach((key) => {
    let val = obj[key]

    // é€’å½’å¤„ç†
    observe(val)

    // å¤„ç†å…·ä½“å€¼
    Object.defineProperty(obj, key, {
      enumerable: true, // å¯æšä¸¾
      configurable: true, // å¯ä¿®æ”¹
      get() {
        console.log('è®¿é—®å±æ€§', key, 'å€¼ä¸º', val)
        return val
      },
      set(newVal) {
        if (newVal === val) return
        console.log('è®¾ç½®å±æ€§', key, 'æ–°å€¼ä¸º', newVal)
        val = newVal
      },
    })
  })
}

var obj = {
  a: 1,
  b: { c: 'cc', d: 3 },
}
observe(obj)
obj.a //

// ä½¿ç”¨Proxy
const observeProxy = (obj) => {
  // å…¶å®å°±æ˜¯é’ˆå¯¹ä¸€ä¸ªå¯¹è±¡ï¼Œåšä¸€ä¸ªé…ç½®åŒ–çš„å¤„ç†
  return new Proxy(obj, {
    get(target, key) {
      console.log('è®¿é—®å±æ€§', key, 'å€¼ä¸º', target[key])
      if (key in target) {
        return target[key]
      }
    },
    set(target, key, val) {
      target[key] = val
      console.log('è®¾ç½®å±æ€§', key, 'å€¼ä¸º', target[key])
      return true // å¿…é¡»è¿”å›true
    },
    deleteProperty(target, key) {
      console.log('åˆ é™¤å±æ€§', key)
      delete target[key]
      return true // å¿…é¡»è¿”å›true
    },
  })
}
var newObj = observeProxy(obj)
newObj.a
```

- Proxy
  - åŠŸèƒ½æ›´å¼ºå¤§ï¼Œå¯ä»¥æ‹¦æˆªæ›´å¤šçš„æ“ä½œï¼ŒåŒ…æ‹¬å±æ€§è¯»å–ã€å±æ€§è®¾ç½®ã€å±æ€§åˆ é™¤ã€å‡½æ•°è°ƒç”¨ç­‰
  - ç›´æ¥ä»£ç†æ•´ä¸ªå¯¹è±¡ï¼Œè€Œä¸æ˜¯æ¯ä¸ªå±æ€§ï¼Œå¯ä»¥åŠ¨æ€å¤„ç†æ·»åŠ å’Œåˆ é™¤çš„å±æ€§
  - ä»£ç†å¯¹è±¡ï¼Œè¿˜å¯ä»¥æ‹¦æˆªå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨å’Œæ„é€ å‡½æ•°è°ƒç”¨
  - ç¼ºç‚¹ï¼šå…¼å®¹æ€§ã€æ€§èƒ½å¼€é”€ç¨é«˜
- Object.defineProperty
  - å…¼å®¹æ€§å¥½
  - ç²¾ç»†åŒ–æ§åˆ¶ï¼Œå…·ä½“æ¯ä¸ªå±æ€§çš„å¯æšä¸¾ã€å¯é…ç½®ã€å¯å†™ç­‰
  - åªé’ˆå¯¹å·²å­˜åœ¨çš„å±æ€§
  - æ— æ³•æ‹¦æˆªæ•´ä¸ªå¯¹è±¡

### åŸç”Ÿå®ç° ajax

æ€è·¯ï¼šåˆ©ç”¨ promiseï¼Œå°è£… XMLHttpRequest æ–¹æ³•

### åˆ¤æ–­äºŒå‰æ ‘æ˜¯å¦ä¸ºå¯¹ç§°äºŒå‰æ ‘

- æ€è·¯ï¼šæˆå¯¹å‹å…¥å †æ ˆï¼Œæ³¨æ„é¡ºåºï¼Œç„¶åå†æˆå¯¹å¼¹å‡ºï¼Œåˆ¤æ–­

```js
var isSymmetric = function (root) {
  if (!root) return true

  const stack = [root.left, root.right]
  while (stack.length) {
    const right = stack.pop()
    const left = stack.pop()

    // å¦‚æœäºŒè€…éƒ½æ²¡æœ‰ï¼Œåˆ™ç»§ç»­
    if (!right && !left) {
      continue
    }
    if (!right || !left) {
      return false
    }
    if (right.val !== left.val) {
      return false
    }

    // æˆå¯¹å‹å…¥å †æ ˆï¼Œæ³¨æ„é¡ºåºï¼Œä¸éœ€è¦è€ƒè™‘æœ‰æ²¡æœ‰å€¼
    stack.push(left.left, right.right)
    stack.push(left.right, right.left)
  }
  return true
}
```

### è¿›åˆ¶è½¬åŒ–

è€ƒå¯Ÿç‚¹

- ä½æ“ä½œè¿ç®—
- toStringã€parseInt æ“ä½œ
  - parseInt åªæ˜¯æ ¹æ®æŒ‡å®šçš„ radix è¿›åˆ¶æ•°ï¼Œ**è¯†åˆ«å­—ç¬¦ä¸²ä¸­å¯¹åº”è¿›åˆ¶çš„æ•°æ®**è€Œå·²ï¼Œé»˜è®¤ 10ã€‚å¦‚æœä¸æ˜¯å¯¹åº”è¿›åˆ¶ï¼Œåˆ™åœæ­¢è¯†åˆ«
    - é»˜è®¤ 10 è¿›åˆ¶
  - toString
    - å­—ç¬¦ä¸²ï¼ŒåŸæ ·è¿”å›
    - æ•°å­—ç±»å‹ï¼Œå¯ä»¥æ¥æ”¶ä¸€ä¸ªè¿›åˆ¶æ•°ï¼Œè¿›è€Œè½¬åˆ°å¯¹åº”è¿›åˆ¶
    - å¯¹äºæ•°ç»„ï¼Œå°†æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ è½¬ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶å,å·æ‹¼æ¥
      - ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ [1,3, [3,4, [3,4]]].toString() => '1,3,3,4,3,4' å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§æ‹å¹³æ•°ç»„å•Šã€‚ã€‚ã€‚
    - å¯¹è±¡ï¼Œè¿”å›"[object Object]"

```js
parseInt(234, 4) // 11 ï¼Œå› ä¸º4è¿›åˆ¶ï¼Œæœ€é«˜ä½å°±æ˜¯4ï¼Œæ‰€ä»¥åªèƒ½è¯†åˆ«åˆ° 23 ä¹Ÿå°±æ˜¯ 2 * 4 + 3 => 11
;(12).toString(10) // // 12
;(12).toString(8) // 14 , 1 * 8 + 4 => 12
;[(1, 3, [3, 4, [3, 4]])].toString() // '1,3,3,4,3,4'
```

å¦‚ä½•æ‰‹åŠ¨å®ç°ä¸€ä¸ªè¿›åˆ¶è½¬åŒ–å‘¢ï¼Ÿ

æˆ‘ä»¬è¦çŸ¥é“ï¼Œæ‰€è°“è¿›åˆ¶è½¬åŒ–ï¼Œå…¶å®å°±æ˜¯å°†æŸä¸ªæ•° ä»¥æŸä¸ª base åŸºæ•°è¿›è¡Œæ‹†åˆ†è€Œå·²

```js
function decimalToBase(decimalNumber, base) {
  if (base < 2 || base > 16) {
    throw new Error('Base out of range. Only supports base 2 to 16.')
  }

  const digits = '0123456789abcdef'
  const result = []

  while (decimalNumber > 0) {
    // å–ä½™å¾—åˆ° è¿›ä½ï¼Œä¹Ÿå°±æ­£å¥½æ˜ å°„ digits é‡Œçš„æ•°æ®
    const digit = decimalNumber % base
    result.unshift(digits[digit]) // ä»å‰åˆ°åå‹å…¥
    decimalNumber = Math.floor(decimalNumber / base) // é™¤æ•°ï¼Œå¾—åˆ°æœ€æ–°çš„å€¼ã€‚
  }

  return result.join('')
}

const decimalNumber = 42
const binaryNumber = decimalToBase(decimalNumber, 2)
const octalNumber = decimalToBase(decimalNumber, 8)
const hexadecimalNumber = decimalToBase(decimalNumber, 16)

console.log(binaryNumber) // Output: "101010"
console.log(octalNumber) // Output: "52"
console.log(hexadecimalNumber) // Output: "2a"
```

ä¸Šé¢çŸ¥é“è¿›åˆ¶è½¬åŒ–ï¼Œé‚£é¢œè‰²è½¬åŒ–æ˜¯ä¸æ˜¯å°±æ¸…æ™°äº†

- rgb æ ¼å¼ï¼šrgb(255, 121, 245)
- 16 è¿›åˆ¶ï¼š00ff00

```js
function rgbToHex(r, g, b) {
  // æœ€åçš„å­—ç¬¦ä¸² 00ff00 é«˜ä½åœ¨æœ€å·¦ä¾§
  // ç„¶åæ¯ä¸ªrgbï¼Œå…¶å®éƒ½æ˜¯ 2 çš„ 8æ¬¡æ–¹ä»¥å†…ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå­—èŠ‚ 8 ä½ï¼Œç„¶åæŠŠrgbå¹³é“ºåˆ°äºŒè¿›åˆ¶ä½ä¸Šï¼Œç„¶åå¾—å‡ºä¸€ä¸ªæ€»çš„äºŒè¿›åˆ¶æ•°ï¼Œç„¶åå†è½¬æˆ 16è¿›åˆ¶
  let rgbStr = ((r << 16) | (g << 8) | b).toString(16)
  // console.log('rgbStr', rgbStr)
  // (15).toString(16)  // 'f'

  // return '0x' + rgbStr.padStart(6, 0)
  return '0x' + `000000${rgbStr}`.slice(-6) // ä»å€’æ•°ç¬¬6ä¸ªå¼€å§‹æˆªå–
}
```

### æ•°ç»„å¸¸è§æ–¹æ³•

```js
// æ‹å¹³ï¼Œè½¬æ•°å­—ï¼Œå»é‡ï¼Œæ’åº
var arr = [1, 3, [3, 4, [3, 4]]]
const res = arr
  .toString()
  .split(',')
  .map((item) => +item)
  .filter((item, idx, arr) => idx === arr.indexOf(item))
  .sort((a, b) => b - a)
console.log(res) // [4, 3, 1]

// æ‹å¹³æ•°ç»„
const nestedArray = [1, [2, [3, 4]]]
const flattenedArray = nestedArray.flat() // [1, 2, [3, 4]]  é»˜è®¤æ·±åº¦ä¸€
const flattenedArray = nestedArray.flat(Infinity) // å¤§äºåˆ™è‡ªåŠ¨æœ€æ·±

// reduce
const numbers = [1, 2, 3, 4, 5, [1, 3]]

const flattenV1 = (arr) => {
  return arr.reduce((res, ele) => {
    return res.concat(Array.isArray(ele) ? flattenV1(ele) : ele)
  }, [])
}
console.log(flattenV1(numbers))

// åˆ©ç”¨é€’å½’
const flatArray = (arr, res = []) => {
  arr.forEach((item) => {
    if (Array.isArray(item)) {
      // æ³¨æ„è¿™é‡Œï¼Œæ˜¯å°†resä¼ å…¥
      flatArray(item, res)
    } else {
      res.push(item)
    }
  })
  return res
}

// åˆ©ç”¨è¿­ä»£
function flattenArrayIterative(arr) {
  const stack = [...arr]
  const result = []
  while (stack.length) {
    const next = stack.pop()
    if (Array.isArray(next)) {
      stack.push(...next)
    } else {
      result.unshift(next)
    }
  }
  return result
}
```

### åŠ¨æ€è§„åˆ’

#### æ–æ³¢é‚£å¥‘æ•°åˆ—

```js
var fib = function (n) {
  // åŠ¨æ€è§„åˆ’
  // 1ã€å®šä¹‰dpï¼šdp[i]è¡¨ç¤ºç¬¬ié¡¹çš„æ–æ³¢é‚£å¥‘æ•°
  // 2ã€å®šä¹‰å…¬å¼ï¼šdp[i] = dp[i-1] + dp[i-2]
  // 3ã€ç¡®å®šéå†é¡ºåºï¼šä»å°åˆ°å¤§
  // 4ã€åˆå§‹åŒ–ï¼šdp = [0, 1]
  // 5ã€æ¨å¯¼

  const dp = [0, 1]
  for (let i = 2; i <= n; i++) {
    dp[i] = dp[i - 1] + dp[i - 2]
  }
  return dp[n]
}
```

#### çˆ¬æ¥¼å™¨

çˆ¬åˆ°ç¬¬ä¸€å±‚æ¥¼æ¢¯æœ‰ä¸€ç§æ–¹æ³•ï¼Œçˆ¬åˆ°äºŒå±‚æ¥¼æ¢¯æœ‰ä¸¤ç§æ–¹æ³•ã€‚

é‚£ä¹ˆç¬¬ä¸€å±‚æ¥¼æ¢¯å†è·¨ä¸¤æ­¥å°±åˆ°ç¬¬ä¸‰å±‚ ï¼Œç¬¬äºŒå±‚æ¥¼æ¢¯å†è·¨ä¸€æ­¥å°±åˆ°ç¬¬ä¸‰å±‚ã€‚

æ‰€ä»¥åˆ°ç¬¬ä¸‰å±‚æ¥¼æ¢¯çš„çŠ¶æ€å¯ä»¥ç”±ç¬¬äºŒå±‚æ¥¼æ¢¯ å’Œ åˆ°ç¬¬ä¸€å±‚æ¥¼æ¢¯çŠ¶æ€æ¨å¯¼å‡ºæ¥ï¼Œé‚£ä¹ˆå°±å¯ä»¥æƒ³åˆ°åŠ¨æ€è§„åˆ’äº†ã€‚

```js
var climbStairs = function (n) {
  // dp[i] ä¸ºç¬¬ i é˜¶æ¥¼æ¢¯æœ‰å¤šå°‘ç§æ–¹æ³•çˆ¬åˆ°æ¥¼é¡¶
  // dp[i] = dp[i - 1] + dp[i - 2]
  let dp = [1, 2]
  for (let i = 2; i < n; i++) {
    dp[i] = dp[i - 1] + dp[i - 2]
  }
  return dp[n - 1]
}
```

### è´ªå¿ƒ

#### è·³è·ƒæ¸¸æˆ

å…¶å®è·³å‡ æ­¥æ— æ‰€è°“ï¼Œå…³é”®åœ¨äºå¯è·³çš„è¦†ç›–èŒƒå›´ï¼Œæ˜¯å¦èƒ½è¾¾åˆ°ç»ˆç‚¹ã€‚

è´ªå¿ƒç®—æ³•å±€éƒ¨æœ€ä¼˜è§£ï¼šæ¯æ¬¡å–æœ€å¤§è·³è·ƒæ­¥æ•°ï¼ˆå–æœ€å¤§è¦†ç›–èŒƒå›´ï¼‰ï¼Œæ•´ä½“æœ€ä¼˜è§£ï¼šæœ€åå¾—åˆ°æ•´ä½“æœ€å¤§è¦†ç›–èŒƒå›´ï¼Œçœ‹æ˜¯å¦èƒ½åˆ°ç»ˆç‚¹ã€‚

å±€éƒ¨æœ€ä¼˜æ¨å‡ºå…¨å±€æœ€ä¼˜ï¼Œæ‰¾ä¸å‡ºåä¾‹ï¼Œè¯•è¯•è´ªå¿ƒï¼

å› æ­¤æ¯æ¬¡ç§»åŠ¨éƒ½æ›´æ–°æœ€å¤§è¦†ç›–èŒƒå›´å³å¯ã€‚

```js
var canJump = function (nums) {
  // æ›´æ–°æœ€å¤§è·³è·ƒèŒƒå›´å³å¯
  let cover = 0 // å®šä¹‰å¯è¦†ç›–èŒƒå›´
  // ä¸‹é¢å¾ªç¯çš„å˜é‡ä¸å¯¹ï¼Œåº”è¯¥æ˜¯coverçš„é•¿åº¦ï¼Œå› ä¸ºåªæœ‰coverä½ æ‰å¯ä»¥åˆ°è¾¾
  // for (let i = 0; i <= nums.length; i++) {
  for (let i = 0; i <= cover; i++) {
    cover = Math.max(i + nums[i], cover)
    if (cover >= nums.length - 1) {
      return true
    }
  }
  return false
}
```

### å›æº¯

- for å¾ªç¯ï¼Œç›¸å½“äºæ¨ªå‘é€‰æ‹©ï¼Œé€‰æ‹©åŒä¸€å±‚çš„å…ƒç´ 
  - æ¯æ¬¡ä»é›†åˆä¸­é€‰å–å…ƒç´ ï¼Œå¯é€‰æ‹©çš„èŒƒå›´éšç€é€‰æ‹©çš„è¿›è¡Œè€Œæ”¶ç¼©ï¼Œè°ƒæ•´å¯é€‰æ‹©çš„èŒƒå›´ã€‚
  - è€Œå¦‚ä½•é€šè¿‡æ ‡è¯†ç¼©å°èŒƒå›´å†…ï¼Œå°±æ˜¯é€šè¿‡ ç´¢å¼• index
- è€Œå›æº¯å°±æ˜¯çºµå‘é€‰æ‹©ï¼ŒäºŒè€…ç»“åˆåï¼Œå°±å¯ä»¥éå†æ•´ä¸ªæ ‘
- å›æº¯æ³•å°±æ˜¯è§£å†³è¿™ç§ k å±‚ for å¾ªç¯åµŒå¥—çš„é—®é¢˜ã€‚

```js
for (int i = startIndex; i <= n; i++) { // æ§åˆ¶æ ‘çš„æ¨ªå‘éå†
    path.push_back(i);         // å¤„ç†èŠ‚ç‚¹
    backtracking(n, k, i + 1); // é€’å½’ï¼šæ§åˆ¶æ ‘çš„çºµå‘éå†ï¼Œæ³¨æ„ä¸‹ä¸€å±‚æœç´¢è¦ä»i+1å¼€å§‹ï¼Œä¹Ÿå°±ç¼©å°äº†èŒƒå›´
    path.pop_back();           // å›æº¯ï¼Œæ’¤é”€å¤„ç†çš„èŠ‚ç‚¹
}
```

## 20231121 å‘¨äºŒ

### äºŒå‰æ ‘

#### äºŒå‰æ ‘çš„æ‰€æœ‰è·¯å¾„

```js
function binaryTreePaths(root) {
  if (!root) return []
  const res = [],
    stack = [root],
    paths = ['']

  while (stack.length) {
    // èŠ‚ç‚¹å’Œpathæ˜¯æˆå¯¹å­˜åœ¨
    const node = stack.pop() // ä»æ ˆé¡¶å¼¹å‡º
    const path = paths.pop() // å§‹ç»ˆåªæœ‰åŒæ—¶å¼¹å‡ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œå› æ­¤è·¯å¾„ä¸ä¹‹åŒ¹é…

    // å¦‚æœå·¦å³å­èŠ‚ç‚¹éƒ½æ²¡æœ‰ï¼Œåˆ™è¿”å›
    if (!node.left && !node.right) {
      path += node.val // æœ€åä¸€ä¸ªä¸éœ€è¦æ‹¼æ¥ -> äº†
      paths.push(path)
      continue // ç»§ç»­ä¸‹ä¸€ä¸ª
    }

    // å¦‚æœæœ‰å·¦å³èŠ‚ç‚¹ï¼Œåˆ™å‹å…¥ï¼Œè¿™é‡Œä¸åŒºåˆ†é¡ºåº
    if (node.left) {
      stack.push(node.left)
      paths.push(path)
    }
    if (node.right) {
      stack.push(node.right)
      paths.push(path)
    }
  }
  return res
}
```

### hash è¡¨

#### æ±‚ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†

```js
var intersection = function (nums1, nums2) {
  let map = {}
  const res = []

  nums1.forEach((num) => {
    map[num] = true
  })

  nums2.forEach((num) => {
    if (map[num]) {
      res.push(num)
    }
  })

  return res.filter((item, idx) => idx === res.indexOf(item))
}
```

#### ä¸‰æ•°ä¹‹å’Œ

```js
var threeSum = function (nums) {
  const res = []
  nums.sort((a, b) => a - b)
  let len = nums.length

  for (let i = 0; i < len; i++) {
    let left = i + 1
    let right = len - 1

    // å»é‡ç¬¬ä¸€ä¸ª
    if (i > 0 && nums[i] === nums[i - 1]) continue

    // å¼€å§‹éå†å·¦å³æŒ‡é’ˆ
    while (left < right) {
      const sum = nums[i] + nums[left] + nums[right]

      if (sum === 0) {
        res.push([nums[i], nums[left], nums[right]])

        // åªæœ‰å’Œç­‰äº0äº†ï¼Œè¯´æ˜æ‰å¼€å§‹æ‰§è¡Œä¸‹é¢çš„
        while (left < right && nums[left] === nums[left + 1]) left++
        while (left < right && nums[right] === nums[right - 1]) right--

        left++
        right--
      } else if (sum > 0) {
        right--
      } else {
        left++
      }
    }
  }

  return res
}
```

## 20231119 å‘¨æ—¥

### å›æº¯

#### ç»„åˆæ€»æ•°

> ç»™ä½ ä¸€ä¸ª æ— é‡å¤å…ƒç´  çš„æ•´æ•°æ•°ç»„ candidates å’Œä¸€ä¸ªç›®æ ‡æ•´æ•° target ï¼Œæ‰¾å‡º candidates ä¸­å¯ä»¥ä½¿æ•°å­—å’Œä¸ºç›®æ ‡æ•° target çš„ æ‰€æœ‰ ä¸åŒç»„åˆ ï¼Œå¹¶ä»¥åˆ—è¡¨å½¢å¼è¿”å›ã€‚ä½ å¯ä»¥æŒ‰ ä»»æ„é¡ºåº è¿”å›è¿™äº›ç»„åˆã€‚

```js
var combinationSum = function (candidates, target) {
  // ç»„åˆé—®é¢˜ï¼Œä¹Ÿæ˜¯ä½¿ç”¨å›æº¯ï¼Œè€Œå›æº¯å°±æ˜¯å›æ¥æ›¿æ¢å¤šå±‚å¾ªç¯

  function backtrack(path, sum, start) {
    // æ»¡è¶³æ¡ä»¶ï¼Œè¿™é‡Œæ³¨æ„ï¼Œçœ‹ä¹‹å‰é”™è¯¯çš„æäº¤è®°å½•
    // if (sum === target) { è¿™æ ·ä¸è¡Œï¼Œå› ä¸ºå¤§äºçš„ä¹Ÿéœ€è¦è¿”å›
    if (sum >= target) {
      sum === target && res.push(path.slice())
      return
    }

    // ç›®å‰ç®—æ³•å¯ä»¥ç»Ÿè®¡å‡ºå…¨éƒ¨çš„ï¼Œä½†æ˜¯æœ‰é‡å¤çš„ [[2,2,3],[2,3,2],[3,2,2],[7]]
    // å¦‚ä½•å»é‡å‘¢ï¼Ÿå»é‡çš„è¯ï¼Œè¿˜æ˜¯éœ€è¦ä¸ªstartç´¢å¼•ã€‚ã€‚ã€‚
    // forå¾ªç¯ï¼Œæ¯ä¸ªå¾ªç¯éƒ½æ˜¯ä»0å¼€å§‹ï¼Œå› ä¸ºå¯ä»¥é‡å¤ï¼Œè¿™é‡Œçš„é‡å¤ä¸æ˜¯åœ¨è¿™é‡Œé…ç½®ï¼Œè€Œæ˜¯backtrackçš„å…¥å‚3æ˜¯iï¼Œä»è€Œå®ç°çš„é‡å¤ï¼Œå¦‚æœæ˜¯i+1ï¼Œåˆ™å°±æ˜¯ä¸é‡å¤çš„
    // è¿™å…¶å®ä¾ç„¶æ˜¯ä¸€ä¸ªé›†åˆï¼Œç„¶åç»„åˆé—®é¢˜ï¼Œæ­¤æ—¶å°±éœ€è¦ä½¿ç”¨startç´¢å¼•ï¼Œå¦‚æœæ˜¯å¤šä¸ªé›†åˆï¼Œæ¯”å¦‚æ‹¨å·é”®ç»„åˆï¼Œå°±ä¸éœ€è¦ç´¢å¼•
    for (let i = start; i < candidates.length; i++) {
      // å¦‚æœå·²ç»å¤§äºtargetå°±ä¸å†å‹å…¥äº†
      if (sum > target) break
      path.push(candidates[i])
      sum += candidates[i]
      backtrack(path, sum, i)
      sum -= candidates[i]
      path.pop()
    }
  }

  const res = []
  backtrack([], 0, 0)
  return res
}
```

#### å…¨æ’åˆ—

```js
var permute = function (nums) {
  const res = []
  const used = new Set() // éœ€è¦å°†è¿™ä¸ªusedæ”¾åœ¨æœ€å¤–å±‚ï¼Œè€Œä¸æ˜¯å†…éƒ¨
  backtrack([])
  return res

  function backtrack(path) {
    if (path.length === nums.length) {
      res.push(path.slice())
      return
    }

    // æ”¾åœ¨å†…éƒ¨ï¼Œåªèƒ½å»é™¤åŒå±‚ä¸Šçš„é‡å¤ï¼Œä½†æ˜¯æ— æ³•å»é™¤åŒä¸€ä¸ªæ ‘æä¸Šçš„æ•°æ®
    // const used = new Set() // éœ€è¦å°†è¿™ä¸ªusedæ”¾åœ¨æœ€å¤–å±‚ï¼Œè€Œä¸æ˜¯å†…éƒ¨
    // æ¯ä¸€æ¬¡éƒ½æ˜¯ä»0å¼€å§‹éå†
    for (let i = 0; i < nums.length; i++) {
      if (used.has(nums[i])) continue

      used.add(nums[i])
      path.push(nums[i])
      backtrack(path.slice())
      path.pop()
      used.delete(nums[i])
    }
  }
}
```

### äºŒå‰æ ‘

#### æœ€å¤§å®½åº¦

- åˆ©ç”¨ç´¢å¼•
- å±‚åºéå†ï¼Œç´¢å¼•

```js
function widthOfBinaryTree(root) {
  if (root === null) {
    return 0
  }

  let maxWidth = 0
  const queue = [{ node: root, index: 0 }]

  while (queue.length > 0) {
    const levelSize = queue.length
    let leftmostIndex = queue[0].index
    const currentWidth = queue[queue.length - 1].index - leftmostIndex + 1
    maxWidth = Math.max(maxWidth, currentWidth)

    for (let i = 0; i < levelSize; i++) {
      const { node, index } = queue.shift()

      if (node.left) {
        queue.push({ node: node.left, index: 2 * index })
      }

      if (node.right) {
        queue.push({ node: node.right, index: 2 * index + 1 })
      }
    }
  }

  return maxWidth
}
```

#### æœ€å°æ·±åº¦

```js
var minDepth = function (root) {
  // æœ€å°æ·±åº¦
  if (!root) return 0
  const queue = [root]

  let minHeight = 0

  while (queue.length) {
    const len = queue.length
    minHeight++

    for (let i = 0; i < len; i++) {
      const node = queue.shift()
      // å±‚åºéå†ï¼Œé˜Ÿåˆ—ï¼Œå¦‚æœå·¦å³èŠ‚ç‚¹éƒ½æ²¡æœ‰å€¼ï¼Œåˆ™å°±æ˜¯æœ€å°
      if (!node.left && !node.right) {
        return minHeight
      }
      node.left && queue.push(node.left)
      node.right && queue.push(node.right)
    }
  }
  return minHeight
}
```

#### æœ€å¤§æ·±åº¦

```js
var maxDepth = function (root) {
  if (!root) return 0
  const queue = [root]

  let height = 0
  while (queue.length) {
    const len = queue.length
    height++

    // è¿™é‡Œé¢çš„å¾ªç¯æœ‰å¿…è¦ï¼Œå› ä¸ºlenæ˜¯ä¹‹å‰è®°å½•çš„ä¸€å±‚çš„é•¿åº¦ï¼Œæ˜¯ä¸å˜çš„
    for (let i = 0; i < len; i++) {
      const node = queue.shift()
      node.left && queue.push(node.left)
      node.right && queue.push(node.right)
    }
  }
  return height
}
```

#### ç¿»è½¬äºŒå‰æ ‘

```js
var invertTree = function (root) {
  if (!root) return root
  const queue = [root]

  while (queue.length) {
    const node = queue.shift()
    // å·¦å³å­èŠ‚ç‚¹äº¤æ¢å³å¯ï¼Œç„¶åç»§ç»­æ’å…¥å­—èŠ‚ç‚¹
    ;[node.left, node.right] = [node.right, node.left]

    node.left && queue.push(node.left)
    node.right && queue.push(node.right)
  }
  return root
}
```

#### å±‚åºéå†

```js
var levelOrder = function (root) {
  const res = []
  const queue = []

  root && queue.push(root)

  while (queue.length) {
    const len = queue.length // å½“å‰å±‚çš„æ•°é‡
    const curLevel = []

    // éå†
    for (let i = 0; i < len; i++) {
      const node = queue.shift() // å¼¹å‡ºé˜Ÿåˆ—æœ€å‰é¢çš„
      curLevel.push(node.val)
      // å°†å½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ”¾åœ¨é˜Ÿåˆ—é‡Œ
      node.left && queue.push(node.left)
      node.right && queue.push(node.right)
    }
    // ä¸€ä¸ªforå¾ªç¯ç»“æŸï¼Œè¡¨ç¤ºä¸€å±‚å·²ç»éå†å®Œï¼Œéœ€è¦ä¸€å±‚ä¸€å±‚çš„è¿”å›
    res.push(curLevel)
  }

  return res
}
```

#### ä¸­åºéå†

```js
var inorderTraversal = (root) => {
  const res = [] // ç»“æœ
  const stack = [] // äºŒå‰æ ‘éå†ï¼Œåˆ©ç”¨æ·±åº¦ä¼˜å…ˆ

  root && stack.push(root) // stack = [root] ä¹Ÿè¡Œï¼Œå°±æ˜¯éœ€è¦letå£°æ˜

  while (stack.length) {
    // 1/å…¶å®å°±æ˜¯ä½¿ç”¨æ ˆæ¥éå†æ•´ä¸ªäºŒå‰æ ‘
    const node = stack.pop()

    // 3ã€å¼€å§‹å¤„ç†ä¹‹å‰æ”¾åœ¨é‡Œé¢çš„æ•°æ®
    // å…¶å®æ­¤æ—¶
    // console.log(stack)
    if (!node) {
      res.push(stack.pop().val)
      continue
    }

    // 2ã€å°†éå†çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½æ”¾åœ¨æ ˆé‡Œ
    // ä¸­åºï¼šå·¦ä¸­å³ -ã€‹å³ä¸­å·¦
    node.right && stack.push(node.right)
    stack.push(node)
    stack.push(null)
    node.left && stack.push(node.left)
  }

  return res
}
```

### hash è¡¨

#### ä¸‰æ•°ä¹‹å’Œ

```js
var threeSum = function (nums) {
  nums.sort((a, b) => a - b)

  // è¿™é‡Œä¹Ÿå¯ä»¥è¿”å›ï¼Œæ’åºåï¼Œå¦‚æœç¬¬ä¸€ä¸ªéƒ½å¤§äº0ï¼Œåˆ™ç›´æ¥è¿”å›ï¼Œä¸èƒ½ç›´æ¥ nums[0] å› ä¸ºæœ‰å¯èƒ½æœ‰è´Ÿå€¼
  if (nums[0] > 0) return []

  const len = nums.length
  const res = []

  for (let i = 0; i < len; i++) {
    let left = i + 1
    let right = len - 1

    // å¦‚æœä¸å¯¹ç¬¬ä¸€ä¸ªæ•°å»é‡ï¼Œåˆ™ä¼šå‡ºç°  [[-1,-1,2],[-1,0,1],[-1,0,1]] æƒ…å†µ
    if (nums[i] === nums[i - 1]) continue

    // ä¸€ä¸ªiï¼Œå°±éœ€è¦å¯¹åº”ä¸€æ¬¡ leftï¼Œrightçš„å¾ªç¯
    while (left < right) {
      const sum = nums[i] + nums[left] + nums[right]

      if (sum == 0) {
        res.push([nums[i], nums[left], nums[right]])

        // å»é‡ï¼Œä¸ä¸‹é¢bä½ç½®æ— å…³ï¼Œleft++åªæ˜¯èµ°åˆ°äº†ä¸‹ä¸€ä¸ªé‡å¤çš„ä½ç½®è€Œå·²
        // è¦ä¸åœçš„å»é‡ï¼Œè€Œä¸æ˜¯åªå»é‡ä¸€æ¬¡ï¼Œä¸èƒ½ä½¿ç”¨ifï¼Œè€Œåº”è¯¥ä½¿ç”¨while
        while (left < right && nums[left] === nums[left + 1]) left++
        while (left < right && nums[right] === nums[right - 1]) right--

        // bï¼šå½“å‰æ‰¾åˆ°ä¸€ä¸ªäº†ï¼Œé‚£å°±å¾—ç»§ç»­å¾€ä¸‹èµ°
        left++
        right--
      } else if (sum > 0) {
        right--
      } else {
        left++
      }
    }
  }

  return res
}
```

### é“¾è¡¨

#### åˆå¹¶é“¾è¡¨

```js
var mergeTwoLists = function (list1, list2) {
  let res = new ListNode(-1)
  let p = res // pæŒ‡é’ˆæ˜¯ç§»åŠ¨çš„ï¼Œ
  let p1 = list1
  let p2 = list2

  // å¦‚æœä¸¤ä¸ªæŒ‡é’ˆéƒ½æœ‰å€¼ï¼Œåˆ™å¯¹æ¯”
  while (p1 && p2) {
    if (p1.val > p2.val) {
      // å°†å°å€¼èµ‹å€¼ï¼ŒåŒæ—¶å‘ä¸‹ç§»åŠ¨æŒ‡é’ˆ
      // æ³¨æ„èµ‹å€¼çš„æ˜¯ä¸‹ä¸€ä¸ª
      // p = p2
      p.next = p2
      p2 = p2.next
    } else {
      p.next = p1
      p1 = p1.next
    }
    // æœ€åç§»åŠ¨pæŒ‡é’ˆ
    p = p.next
  }

  // ä¸Šé¢å¾ªç¯å®Œä»¥åï¼Œå°†å‰©ä½™çš„é“¾è¡¨ç»§ç»­æŒ‚ä¸Šå»ï¼ŒæŒ‚ä¸Šå»ä½¿ç”¨çš„p.nextï¼Œè€Œä¸æ˜¯p = p1
  // å› ä¸º p = p1 ç›¸å½“äºæŒ‡é’ˆç§»åŠ¨åˆ°p1
  p1 && (p.next = p1)
  p2 && (p.next = p2)

  // æ­¤æ—¶pä½äºæ–°å»ºé“¾è¡¨çš„ä¸­é—´æŸä¸ªä½ç½®ï¼Œéœ€è¦è¿”å›res.nextï¼Œä»¥ä¸ºå†…
  return res.next
}
```

#### é“¾è¡¨æ±‚å’Œ

```js
var addTwoNumbers = function (l1, l2) {
  // å› ä¸ºä¸¤ä¸ªé“¾è¡¨çš„å¤´ç»“ç‚¹éƒ½æ˜¯æœ€å°å€¼å¼€å§‹ï¼Œå› æ­¤å¯ä»¥ç›´æ¥éå†ç´¯åŠ 
  // å› ä¸ºéå†ä¸¤ä¸ªé“¾è¡¨åï¼Œè¿˜éœ€è¦ç”Ÿæˆä¸€ä¸ªæ–°çš„é“¾è¡¨ï¼Œå› æ­¤éœ€è¦é’ˆå¯¹æ–°é“¾è¡¨å®šä¹‰headã€tailå°¾
  let head = null
  let tail = null
  let carry = 0 // è¿›ä½

  while (l1 || l2) {
    // å–ä¸¤ä¸ªé“¾è¡¨çš„å€¼
    const n1 = l1 ? l1.val : 0
    const n2 = l2 ? l2.val : 0
    const sum = n1 + n2 + carry

    if (!head) {
      // å¦‚æœæ²¡æœ‰å¤´ç»“ç‚¹ï¼Œåˆ™éœ€è¦æ–°å»ºèŠ‚ç‚¹
      head = new ListNode(sum % 10)
      tail = head
    } else {
      // æ­¤æ—¶å·²ç»æœ‰é“¾è¡¨äº†ï¼Œåˆ™éœ€è¦è¿½åŠ ï¼Œæ¯è¿½åŠ ä¸€ä¸ªï¼Œéƒ½éœ€è¦æ–°å»ºèŠ‚ç‚¹
      tail.next = new ListNode(sum % 10)
      // ç§»åŠ¨tailæŒ‡é’ˆ
      tail = tail.next
    }
    carry = Math.floor(sum / 10)

    // ç§»åŠ¨ä¸¤ä¸ªé“¾è¡¨çš„æŒ‡é’ˆ
    l1 && (l1 = l1.next)
    l2 && (l2 = l2.next)
  }
  // å¾ªç¯ç»“æŸï¼Œå†åˆ¤æ–­è¿›ä½å³å¯
  carry && (tail.next = new ListNode(carry))

  return head
}
```

#### ç¯å½¢é“¾è¡¨ II

```js
var detectCycle = function (head) {
  const hasCircle = (head) => {
    let fast = (slow = head)

    while (fast && fast.next) {
      fast = fast.next.next
      slow = slow.next
      if (fast === slow) {
        mixed = slow
        return true
      }
    }
    return false
  }

  let mixed = null
  let start = head

  if (!hasCircle(head)) {
    return null
  } else {
    // å¦‚æœäºŒè€…ä¸ç­‰ï¼Œåˆ™ä¸€ç›´å¾ªç¯
    while (mixed !== start) {
      start = start.next
      mixed = mixed.next
    }
    return mixed
  }
}
```

#### åˆ é™¤é“¾è¡¨ä¸­å€’æ•°ç¬¬ n ä¸ªèŠ‚ç‚¹

```js
var removeNthFromEnd = function (head, n) {
  let newHead = new ListNode(0, head)

  // è™šæ‹Ÿå¤´èŠ‚ç‚¹
  let fast = newHead
  let slow = newHead

  // å¿«æŒ‡é’ˆå…ˆèµ°næ­¥ï¼Œè¿™é‡Œéœ€è¦ç­‰äºn
  for (let i = 0; i <= n; i++) {
    fast = fast.next
  }

  // ç„¶åå¿«æ…¢æŒ‡é’ˆä¸€å—èµ°
  while (fast) {
    fast = fast.next
    slow = slow.next
  }

  slow.next = slow.next.next

  return newHead.next
}
```

#### ç¿»è½¬é“¾è¡¨

```js
var reverseList = function (head) {
  let prev = null
  let cur = head
  // 1 -> 2 -> 3
  while (cur) {
    // æ¯”å¦‚ curä¸º1ï¼Œ åˆ™æš‚å­˜ 2
    const temp = cur.next
    cur.next = prev // ä¸Šé¢éƒ½å­˜èµ·æ¥äº†ï¼Œæ‰€ä»¥è¿™é‡Œç›´æ¥æ“ä½œ

    // ç»§ç»­ç§»åŠ¨prev
    // æƒ³è±¡ä¸‹ï¼šprev cur next ä¸‰è€…çš„å…³ç³»ï¼Œå› æ­¤å¦‚æœæƒ³ç»§ç»­è¿›è¡Œï¼Œåˆ™éœ€è¦å·¦ç§»
    prev = cur
    cur = temp
  }
  return prev
}
```

#### ç§»é™¤é“¾è¡¨ä¸­ç­‰äºæŸä¸ªå€¼çš„èŠ‚ç‚¹

```js
var removeElements = function (head, val) {
  // å¤´ç»“ç‚¹ä¹Ÿå¯èƒ½ç­‰äº valï¼Œå› æ­¤éœ€è¦ç»Ÿä¸€æ‰‹æ³•ï¼Œå› ä¸ºåˆ é™¤å¤´ç»“ç‚¹çš„æ“ä½œä¸æ–¹ä¾¿
  let virtual = new ListNode(0, head)

  let temp = virtual // æ¸¸èµ°æŒ‡é’ˆ

  while (temp.next) {
    if (temp.next.val === val) {
      temp.next = temp.next.next
    } else {
      temp = temp.next
    }
  }
  return virtual.next
}
```

### æ•°ç»„

#### [27]ç§»é™¤å…ƒç´ 

> ç»™ä½ ä¸€ä¸ªæ•°ç»„ nums å’Œä¸€ä¸ªå€¼ valï¼Œä½ éœ€è¦ åŸåœ° ç§»é™¤æ‰€æœ‰æ•°å€¼ç­‰äº val çš„å…ƒç´ ï¼Œå¹¶è¿”å›ç§»é™¤åæ•°ç»„çš„æ–°é•¿åº¦ã€‚

```js
var removeElement = function (nums, val) {
  // åˆ©ç”¨ä¸¤ä¸ªæŒ‡é’ˆ
  // ä¸€ä¸ªæŒ‡é’ˆå­˜å‚¨æœ‰æ•ˆçš„å€¼ï¼Œä¸€ä¸ªæŒ‡é’ˆåœ¨å‰é¢èµ°
  let left = 0
  for (let i = 0; i < nums.length; i++) {
    if (nums[i] !== val) {
      nums[left++] = nums[i]
    }
  }
  // å› ä¸ºåªè¦æ±‚æ–°é•¿åº¦ï¼Œleftå°±æ˜¯ï¼Œå…¶å®åé¢è¿˜æœ‰å†—ä½™çš„
  return left
}
```

#### [35]æ’å…¥ä½ç½®

```js
var searchInsert = function (nums, target) {
  let left = 0
  let right = nums.length - 1

  while (left <= right) {
    const mid = parseInt((left + right) / 2)
    // æ¯”æŸ¥æ‰¾æŸä¸ªæ•°å­—åœ¨æ•°ç»„çš„ä½ç½®ï¼Œè¦å¤šä¸€äº›é€»è¾‘
    if (nums[mid] === target) {
      return mid
    } else if (nums[mid] > target) {
      // å½“å¤§äºç›®æ ‡å€¼æ—¶ï¼Œç†è®ºä¸Šright - 1ï¼Œä½†æ­¤æ—¶è¦æ‰¾æ’å…¥çš„ä½ç½®ï¼Œå› æ­¤å°±æ˜¯mid
      right = mid - 1
    } else {
      // æ­¤æ—¶targetå¤§äºä¸­ä½æ•°çš„å€¼ï¼Œå·¦ä¾§ä¸€åŠéƒ½æ²¡æœ‰ç”¨
      left = mid + 1
    }
  }
  // å¦‚æœä¸åœ¨æ•°ç»„ä¸­ï¼Œåˆ™å¦‚æ­¤ï¼šnums[pos-1]<target<num[pos]
  // ä¹Ÿå°±æ˜¯ right + 1
  return right + 1
}
```

#### [704]äºŒåˆ†æŸ¥æ‰¾

> ç»™å®šä¸€ä¸ª n ä¸ªå…ƒç´ æœ‰åºçš„ï¼ˆå‡åºï¼‰æ•´å‹æ•°ç»„ nums å’Œä¸€ä¸ªç›®æ ‡å€¼ target ï¼Œå†™ä¸€ä¸ªå‡½æ•°æœç´¢ nums ä¸­çš„ targetï¼Œå¦‚æœç›®æ ‡å€¼å­˜åœ¨è¿”å›ä¸‹æ ‡ï¼Œå¦åˆ™è¿”å› -1ã€‚

```js
var search = function (nums, target) {
  let left = 0
  let right = nums.length - 1

  // è¿™é‡Œéœ€è¦ å°äºç­‰äº
  while (left <= right) {
    const mid = parseInt((left + right) / 2)

    if (nums[mid] === target) {
      return mid
    } else if (nums[mid] > target) {
      right = mid - 1
    } else {
      left = mid + 1
    }
  }
  return -1
}
```

#### ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº

```js
var maxProfit = function (prices) {
  // å‡å¦‚ç¬¬ 0 å¤©ä¹°å…¥ï¼Œç¬¬ 3 å¤©å–å‡ºï¼Œé‚£ä¹ˆåˆ©æ¶¦ä¸ºï¼šprices[3] - prices[0]ã€‚

  // ç›¸å½“äº(prices[3] - prices[2]) + (prices[2] - prices[1]) + (prices[1] - prices[0])ã€‚

  // æ­¤æ—¶å°±æ˜¯æŠŠåˆ©æ¶¦åˆ†è§£ä¸ºæ¯å¤©ä¸ºå•ä½çš„ç»´åº¦ï¼Œè€Œä¸æ˜¯ä» 0 å¤©åˆ°ç¬¬ 3 å¤©æ•´ä½“å»è€ƒè™‘ï¼

  // é‚£ä¹ˆæ ¹æ® prices å¯ä»¥å¾—åˆ°æ¯å¤©çš„åˆ©æ¶¦åºåˆ—ï¼š(prices[i] - prices[i - 1]).....(prices[1] - prices[0])ã€‚

  // å› æ­¤ï¼Œåªéœ€è¦ç»Ÿè®¡æ­£æ•°å³å¯
  let res = 0

  for (let i = 1; i < prices.length; i++) {
    const val = prices[i] - prices[i - 1]
    if (val > 0) {
      res += val
    }
  }
  return res
}
```

#### åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„

```js
var merge = function (nums1, m, nums2, n) {
  let len1 = m - 1 // ä¸¤ä¸ªæ•°ç»„æœ‰åºçš„æœ€åä¸€ä¸ªå€¼
  let len2 = n - 1
  let len = m + n - 1 // æœ€ç»ˆæ•°ç»„çš„é•¿åº¦

  // å…¶å®å°±æ˜¯ä¸¤ä¸ªæ•°ç»„æ¯”è¾ƒï¼Œç„¶åå°†æ¯”è¾ƒçš„æ–°å€¼æ”¾åœ¨æœ€å
  while (len1 >= 0 && len2 >= 0) {
    nums1[len--] = nums1[len1] > nums2[len2] ? nums1[len1--] : nums2[len2--]
  }
  // ä¸€éå¾ªç¯å®Œï¼Œè¦ä¹ˆå‰©ä½™ nums2æ²¡æ’å…¥è¿›å»ï¼Œæ­¤æ—¶må·²ç»éå†å®Œäº†ï¼Œä¹Ÿå°±æ˜¯ä¸€å®šåˆ°ç´¢å¼•0çš„ä½ç½®äº†ï¼Œå› æ­¤ä»0å¼€å§‹
  // è¦ä¹ˆå°±æ˜¯nums2æ’å…¥å®Œäº†ï¼Œæ‰§è¡Œä¸‹é¢çš„ä¹Ÿæ— æ‰€è°“
  nums1.splice(0, len2 + 1, ...nums2.slice(0, len2 + 1))
  return nums1
}
```

### å­—ç¬¦ä¸²

#### [344]ç¿»è½¬å­—ç¬¦ä¸²

```js
var reverseString = function (s) {
  let len = s.length

  let left = 0
  let right = len - 1

  while (left <= right) {
    ;[s[left], s[right]] = [s[right], s[left]]
    left++
    right--
  }
  return s
}
```

#### [1047]åˆ é™¤å­—ç¬¦ä¸²ä¸­ç›¸é‚»çš„å­—ç¬¦

```js
var removeDuplicates = function (s) {
  const stack = []
  for (const char of s) {
    // æ¯æ¬¡å¯¹æ¯”ä¸€ä¸ªï¼Œå¦‚æœç›¸åŒå°±å¼¹å‡ºï¼Œè¿™é‡Œä¸éœ€è¦whileå¾ªç¯
    if (stack[stack.length - 1] === char) {
      stack.pop()
    } else {
      stack.push(char)
    }
  }
  return stack.join('')
}
```

#### [3]æ— é‡å¤çš„æœ€é•¿å­ä¸²

```js
var lengthOfLongestSubstring = function (s) {
  let max = 0
  let str = ''

  for (let i = 0; i < s.length; i++) {
    const idx = str.indexOf(s[i])
    // å¦‚æœé‡å¤äº†ï¼Œå°±ä»ä¸‹ä¸€ä½å¼€å§‹æˆªå–
    // dvdy -ã€‹dv -> dv d idx ä¸º0ï¼Œéœ€è¦ä»vå¼€å§‹æˆªå–
    if (idx !== -1) {
      str = str.slice(idx + 1)
    }
    str += s[i]
    max = Math.max(str.length, max)
  }
  return max
}

// ç”¨æŒ‡é’ˆï¼Œç”¨æŒ‡é’ˆçš„è¯ï¼Œå°±å¯ä»¥é¿å…ä¸Šé¢iä¸€ç›´åœ¨æ‰§è¡Œçš„é—®é¢˜
var lengthOfLongestSubstring = function (s) {
  let right = 0
  let max = 0
  let str = ''

  // è¿™é‡Œè¿˜ä¸èƒ½ = s.lengthï¼Œå› ä¸ºç´¢å¼•å°±åˆ°length
  while (right < s.length) {
    if (str.indexOf(s[right]) === -1) {
      str += s[right]
      right++
      max = Math.max(max, str.length)
    } else {
      // åŒæ—¶å­—ç¬¦ä¸²ï¼Œè¿˜éœ€è¦å»æ‰ç¬¬ä¸€ä¸ªï¼Œå› ä¸ºå¿…å®šæ˜¯ç¬¬ä¸€ä¸ªå¼€å§‹ç›¸åŒ
      str = str.slice(1)
    }
  }
  return max
}
```

### å¸¸è§„ç®—æ³•

#### promiseLimit

```js
const promiseLimit = (ps, limit) => {
  // å¼‚æ­¥ç¼–ç¨‹ï¼Œè‚¯å®šéœ€è¦promise
  return new Promise((resolve, reject) => {
    let running = 0
    let idx = 0
    let results = []

    // runTask è¾…åŠ©å‡½æ•°ï¼šæ‰§è¡Œå…·ä½“çš„å¼‚æ­¥ä»»åŠ¡
    const runTask = (task) => {
      running++
      console.log('è¿è¡Œä¸­çš„æ•°é‡ï¼š', running)
      // taskæœ¬èº«æ˜¯promiseï¼Œæ‰€ä»¥ç›´æ¥then
      task()
        .then((res) => {
          // åˆ°è¿™é‡Œä¸€ä¸ªä»»åŠ¡å°±ç»“æŸäº†
          running--
          results.push(res)
          // ç„¶åå¼€å¯æ–°çš„ä»»åŠ¡
          walk()
        })
        .catch((err) => reject(err))
    }

    // ä¸»å‡½æ•°ï¼Œæ‰§è¡Œå…¥å£
    const walk = () => {
      // æ­£åœ¨è¿è¡Œçš„æ•°é‡å°äºlimitï¼Œåˆ™æŒç»­å‹å…¥
      while (running < limit && idx < ps.length) {
        runTask(ps[idx])
        idx++
      }
      // whileå¾ªç¯ç»“æŸåï¼Œå¦‚æœrunningä¸º0ï¼Œè¯´æ˜å·²ç»å…¨éƒ¨ç»“æŸ
      if (!running) resolve(results)
    }
    walk()
  })
}

const tasks = [
  () => new Promise((resolve) => setTimeout(() => resolve(1), 1000)),
  () => new Promise((resolve) => setTimeout(() => resolve(2), 2000)),
  () => new Promise((resolve) => setTimeout(() => resolve(3), 3000)),
  () => new Promise((resolve) => setTimeout(() => resolve(4), 4000)),
  () => new Promise((resolve) => setTimeout(() => resolve(5), 5000)),
  () => new Promise((resolve) => setTimeout(() => resolve(6), 6000)),
]

promiseLimit(tasks, 2)
  .then((results) => {
    console.log(results)
  })
  .catch((error) => {
    console.error(error)
  })
```

#### ç»§æ‰¿

##### 1ã€ åŸå‹é“¾ç»§æ‰¿

çˆ¶ç±»çš„å®ä¾‹ï¼Œä½œä¸ºå­ç±»çš„åŸå‹å¯¹è±¡

```js
function Parent() {
  this.name = 'parent'
}
Parent.prototype.sayHi = function () {
  console.log('hi')
}

function Child() {
  this.name = 'child'
  this.age = 12
}

Child.prototype = new Parent()

var child = new Child()

console.log(child.name, child.age) // parent 12
child.sayHi() // hi

child.name = 'child'
console.log(child.name) // child
console.log(new Parent().name) // child

// åŒ…å«å¼•ç”¨ç±»å‹å€¼çš„åŸå‹å±æ€§ä¼šè¢«æ‰€æœ‰å®ä¾‹å…±äº«
function SuperType() {
  this.colors = ['red', 'blue', 'green']
}

function SubType() {}

//inherit from SuperType
SubType.prototype = new SuperType()

var instance1 = new SubType()

instance1.colors.push('black')
console.log(instance1.colors) //"red,blue,green,black"

var instance2 = new SubType()
console.log(instance2.colors) //"red,blue,green,black"
```

ç‰¹ç‚¹ï¼š

- çˆ¶ç±»å¼•ç”¨ç±»å‹ï¼Œä¼šè¢«å­ç±»å®ä¾‹ç»§æ‰¿ï¼Œå®¹æ˜“é€ æˆä¿®æ”¹çš„ç›¸äº’å½±å“
- æ²¡åŠæ³•ä¼ å‚æ•°

##### 2ã€ å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿

```js
function Parent() {
  this.arr = [1, 2, 3]
}
function Child() {
  Parent.call(this)
}

var child1 = new Child()
child1.arr.push('4')
console.log(child1.arr) // [1,2,3,4]

var child2 = new Child()
console.log(child2.arr) // [1,2,3]
```

ä¸Šé¢çš„ä»£ç ï¼Œå¼•ç”¨ç±»å‹ï¼Œä¸ä¼šå†åœ¨æ‰€æœ‰å®ä¾‹é—´å…±äº«äº†

é‚£å‚æ•°å‘¢ï¼Ÿ

```js
function Parent(name = 'parent default') {
  this.name = name
}
function Child(name) {
  Parent.call(this, name)
  this.age = 18
}

var child1 = new Child()
console.log(child1.name) // parent default

var child2 = new Child('son')
console.log(child2.name) // son
```

##### 3ã€ç»„åˆç»§æ‰¿

å°†**åŸå‹é“¾ç»§æ‰¿å’Œå€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿**ï¼Œç»„åˆåˆ°ä¸€å—

```js
function Parent(name) {
  this.name = name
  this.arr = [1, 2, 3]
}
Parent.prototype.sayName = function () {
  console.log(this.name)
}

function Child(name, age) {
  Parent.call(this, name)
  this.age = age
}
Child.prototype = new Parent()
Child.prototype.sayAge = function () {
  console.log(this.age)
}

var c1 = new Child('c1', 20)
c1.arr.push(4)

console.log(c1.arr) // [1,2,3,4]
c1.sayAge() // 20
c1.sayName() // c1

var c2 = new Child('c2', 22)

console.log(c2.arr) // [1,2,3,4]
c2.sayAge() // 22
c2.sayName() // c2
```

##### 4ã€åŸå‹å¼ç»§æ‰¿

é€šè¿‡åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„ä¸­é—´å¯¹è±¡ï¼Œ å°†è¯¥å¯¹è±¡ä½œä¸ºæ–°åˆ›å»ºå¯¹è±¡çš„åŸå‹ï¼Œå®ç°ç»§æ‰¿

- å®šä¹‰ä¸€ä¸ªç©ºå‡½æ•° Fï¼Œè®¾ç½® F.prototype = objï¼Œç„¶åè¿”å› new F()

```js
function createObj(obj) {
  function F() {}
  // å’ŒåŸå‹é“¾å¼ç›¸æ¯”ï¼Œè¿™é‡Œç›´æ¥ä½¿ç”¨çš„objï¼Œè€Œä¸æ˜¯ æ–°å®ä¾‹
  F.prototype = obj
  return new F()
}
var person = {
  name: 'p1',
  friends: [1, 2, 3],
}
var p1 = createObj(person)
console.log(p1.name) // p1
p1.friends.push(4)
console.log(p1.friends) // [1,2,3,4]

var p2 = createObj(person)
console.log(p2.name) // p1
console.log(p2.friends) // [1,2,3,4]
```

##### 5ã€å¯„ç”Ÿå¼ç»§æ‰¿

å…¶å®å°±æ˜¯ä½¿ç”¨ Object.create åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åå†æ“ä½œå¯¹è±¡ï¼Œå¯ä»¥ç†è§£ä¸ºå¯„ç”Ÿåœ¨ Object.create é‡Œ

```js
function createObj(proto) {
  var obj = Object.create(proto)
  // ä¸ºå¯¹è±¡æ·»åŠ å‡½æ•°ï¼Œä¼šç”±äºä¸èƒ½åšåˆ°å‡½æ•°å¤ç”¨è€Œé™ä½æ•ˆç‡
  obj.greet = function () {
    console.log('hello')
  }
  return obj
}
var parent = {
  name: 'Parent',
  sayHello: function () {
    console.log('Hello')
  },
}

var child = createObj(parent)
console.log(child.name) // è¾“å‡ºï¼š'Parent'
```

##### 6ã€ç»„åˆå¼ç»§æ‰¿

ç»„åˆå¼æ˜¯ï¼šå€Ÿç”¨æ„é€ å‡½æ•°å¼ + å¯„ç”Ÿå¼

```js
function Parent(name) {
  this.name = name
}

Parent.prototype.sayHello = function () {
  console.log('Hello, I am ' + this.name)
}

function Child(name, age) {
  Parent.call(this, name)
  this.age = age
}

Child.prototype = Object.create(Parent.prototype)
Child.prototype.constructor = Child

Child.prototype.sayAge = function () {
  console.log('I am ' + this.age + ' years old')
}

var child = new Child('Alice', 10)
console.log(child.name) // è¾“å‡ºï¼š'Alice'
child.sayHello() // è¾“å‡ºï¼š'Hello, I am Alice'
child.sayAge() // è¾“å‡ºï¼š'I am 10 years old'
```

##### 7ã€å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿

- å…¶å®å°±æ˜¯ å€Ÿç”¨æ„é€ å‡½æ•° + åŸå‹å¼ + å¯„ç”Ÿå¼

```js
function object(o) {
  function F() {}
  F.prototype = o
  return new F()
}

function inheritPrototype(subType, superType) {
  var prototype = object(superType.prototype) // åˆ›å»ºå¯¹è±¡
  prototype.constructor = subType // å¢å¼ºå¯¹è±¡
  subType.prototype = prototype // æŒ‡å®šå¯¹è±¡
}

function SuperType(name) {
  this.name = name
  this.colors = ['red', 'blue', 'green']
}

SuperType.prototype.sayName = function () {
  alert(this.name)
}

function SubType(name, age) {
  SuperType.call(this, name)

  this.age = age
}

inheritPrototype(SubType, SuperType)

SubType.prototype.sayAge = function () {
  alert(this.age)
}

var instance1 = new SubType('Nicholas', 29)
instance1.colors.push('black')
alert(instance1.colors) //"red,blue,green,black"
instance1.sayName() //"Nicholas";
instance1.sayAge() //29

var instance2 = new SubType('Greg', 27)
alert(instance2.colors) //"red,blue,green"
instance2.sayName() //"Greg";
instance2.sayAge() //27
```

#### bindã€callã€apply å®ç°

æ‰‹åŠ¨å®ç° applyï¼Œæˆ‘ä»¬è¦çŸ¥é“ apply ï¼Œå°±æ˜¯ä¿®æ”¹ this æŒ‡å‘ï¼Œç„¶åç«‹å³æ‰§è¡Œå‡½æ•°ç½¢äº†

- è€Œå¦‚ä½•ä¿®æ”¹ this æŒ‡å‘å‘¢ï¼Ÿ å¯¹è±¡è°ƒç”¨å°± okï¼Œ
- æ³¨æ„åœ¨ä½¿ç”¨ this æ—¶ï¼Œç®­å¤´å‡½æ•°åŠ¡å¿…è¦æ³¨æ„

```js
// å®ç°apply
Function.prototype.myApply = function (ctx, args) {
  ctx = ctx || window

  const uuid = Symbol()
  ctx[uuid] = this // è¿™é‡ŒæŠŠthisï¼Œä¹Ÿå°±æ˜¯åç»­çš„å‡½æ•°ï¼ŒæŒ‚è½½åœ¨ä¸€ä¸ªå±æ€§ä¸Šï¼Œç±»ä¼¼ ctx.fn = this
  // const args = [...arguments].slice(1)[0] // applyçš„å‚æ•°äºŒæ˜¯ä¸ªæ•°ç»„ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨æˆªå–

  // è°ƒç”¨ // æ³¨æ„ï¼šè¿™é‡Œå‡½æ•°çš„å…¥å‚ ...args è¿™æ ·å†™ï¼Œç›®çš„æ˜¯ä¸ºäº†æ‹‰é½ï¼ŒåŸç”Ÿçš„applyï¼Œè™½ç„¶ä¸çŸ¥é“åŸç”Ÿåº•å±‚å¦‚ä½•å®ç°
  const res = ctx[uuid](...args)
  // åˆ é™¤å¤šä½™å±æ€§
  delete ctx[uuid]

  // è¿”å›ç»“æœ
  return res
}

// æ³¨æ„ï¼šè¿™é‡Œå‡½æ•°çš„å…¥å‚ ...arr è¿™æ ·å†™ï¼Œç›®çš„æ˜¯ä¸ºäº†æ‹‰é½ï¼ŒåŸç”Ÿçš„applyï¼Œè™½ç„¶ä¸çŸ¥é“åŸç”Ÿåº•å±‚å¦‚ä½•å®ç°
function greet(...arr) {
  // ...arr ç›¸å½“äºå°†å¤šä¸ªå‚æ•°ï¼Œæ”¾åœ¨æ•°ç»„arré‡Œ
  // console.log(arr) // æ‰“å°æ•°ç»„
  console.log('hello', this.name, arr.join(' '))
}

var obj = { name: 'test' }

console.log(greet.apply(obj, ['hi apply', 'hello'])) // hello test hi apply hello
console.log(greet.myApply(obj, ['hi myapply', 'hello'])) // hello test hi myapply hello

// å®ç° call
Function.prototype.myCall = function (ctx) {
  ctx = ctx || window

  // ç¬¬ä¸€é¡¹æ˜¯ ctxï¼Œç¬¬äºŒé¡¹æ‰æ˜¯ call çš„å…¥å‚
  const args = [...arguments].slice(1)

  const uuid = Symbol() // é˜²æ­¢é‡å¤
  ctx[uuid] = this // æŒ‡å‘æœªæ¥çš„å‡½æ•°

  const res = ctx[uuid](...args)
  delete ctx[uuid]
  return res
}

var obj = { name: 'obj' }
function greet(args) {
  console.log('hello', this.name, args.join(' '))
}

greet.myCall(obj, ['hello', 'mycall']) // hello obj hello mycall
greet.call(obj, ['hello', 'call']) // hello obj hello call

// å®ç°bind
Function.prototype.mybind = function (ctx) {
  ctx = ctx || window

  const uuid = Symbol()
  ctx[uuid] = this

  const args = [...arguments].slice(1)

  return function (...args1) {
    const res = ctx[uuid](...args1, ...args)
    delete ctx[uuid]
    return res
  }
}

var obj = { name: 'bind' }

function greet(...args) {
  console.log('hi', this.name, args.join(' '))
}

var myGreet = greet.bind(obj, 'outer', 'haha')
myGreet()

var myGreet1 = greet.mybind(obj, 'outer', 'haha')
myGreet1()
```

#### æ·±æ‹·è´

- æ€è·¯ï¼Œå…¶å®å°±æ˜¯éå†å¯¹è±¡ï¼Œç„¶åé€’å½’æ‹·è´
- éœ€è¦å¤„ç†ç‰¹æ®Šæ•°æ®ç±»å‹

```js
const originalObj1 = {
  name: 'John',
  age: 30,
  address: {
    city: 'New York',
    country: 'USA',
  },
  nu: null,
  undf: undefined,
  reg: /\d/g,
  arr: [1, 2],
  fn: () => console.log('fn'),
  date: new Date(),
  symbol: Symbol(), // ä¸æ˜¯æ„é€ å‡½æ•°ï¼Œä¸èƒ½ç”¨ new
}

const deepClone = (target) => {
  const wMap = new WeakMap()

  const isType = (v) => Object.prototype.toString.call(v).slice(8, -1)
  // éœ€è¦é€’å½’
  const _deep = (obj) => {
    // æ—¶é—´ç±»å‹
    if (isType(obj) === 'Date') {
      return new Date(obj)
    }
    // å¦‚æœä¸æ˜¯æ•°ç»„æˆ–è€…å¯¹è±¡ï¼Œç›´æ¥è¿”å›
    if (!['Array', 'Object'].includes(isType(obj))) {
      return obj
    }

    // å¦‚æœæ˜¯å¯¹è±¡ï¼Œåˆ™å¼€å§‹å¤„ç†å¯¹è±¡
    const res = Array.isArray(obj) ? [] : Object.create(null)

    // å·²å¯¹è±¡æœ¬èº«ä½œä¸ºkeyï¼Œç„¶åresä½œä¸ºvalï¼Œé˜²æ­¢å¾ªç¯å¼•ç”¨
    if (wMap.has(obj)) {
      return wMap.get(obj)
    }
    wMap.set(obj, res) // å¦åˆ™å°±å­˜å…¥map

    // éå†å¯¹è±¡ï¼Œé€’å½’æ‹·è´
    Object.keys(obj).forEach((key) => {
      if (res[key]) return // å¦‚æœå·²ç»å¤åˆ¶ï¼Œç›´æ¥è¿”å›
      res[key] = _deep(obj[key]) // é€’å½’æ‹·è´
    })

    // æœ€åè¿”å›
    return res
  }

  return _deep(target)
}

const originalObj2 = deepClone(originalObj1)

console.log(originalObj2.address === originalObj1.address) // false
```

#### èŠ‚æµ

æ€è·¯ï¼š

- å¦‚æœç«‹å³æ‰§è¡Œçš„è¯ï¼Œä¸éœ€è¦åƒé˜²æŠ–é‚£æ ·ç”¨ flag
- å¦‚æœæ²¡æœ‰å‰©ä½™æ—¶é—´ï¼Œåˆ™ç«‹å³æ‰§è¡Œï¼ŒåŒæ—¶æ¸…ç©º timer
- å¦‚æœæœ‰å‰©ä½™æ—¶é—´ï¼Œä¸”æ²¡æœ‰å®šæ—¶å™¨ï¼Œåˆ™æ–°å»ºå®šæ—¶å™¨

```js
const throttle = (fn, duration = 300) => {
  let timer = null
  let lastTime = 0

  return function (...args) {
    let currentTime = Date.now()
    let restTime = duration - (currentTime - lastTime)

    // å¦‚æœæ²¡æœ‰å‰©ä½™æ—¶é—´ï¼Œåˆ™ç«‹å³æ‰§è¡Œï¼ŒåŒæ—¶æ¸…é™¤å®šæ—¶å™¨
    if (restTime <= 0) {
      clearTimeout(timer) // å¯ä»¥é˜²æ­¢å®šæ—¶å™¨æ³„éœ²
      timer = null
      fn.apply(this, args)
      lastTime = currentTime // lastTimeæ˜¯ä¸Šæ¬¡æ‰§è¡Œçš„æ—¶é—´ï¼Œå› æ­¤è¿™é‡Œè¿™æ ·èµ‹å€¼
    } else if (!timer) {
      timer = setTimeout(() => {
        fn.apply(this, args)
        timer = null
        lastTime = Date.now()
      }, restTime)
    }
  }
}

window.addEventListener(
  'resize',
  throttleImmediate(() => {
    console.log('èŠ‚æµ')
  }, 1000)
)
```

#### é˜²æŠ–

æ€è·¯ï¼š

1. è¿”å›å‡½æ•°
2. å†æ¬¡è§¦å‘ï¼Œæ¸…ç©ºå®šæ—¶å™¨ï¼Œå¹¶å»¶è¿Ÿ

```js
// ç®€å•çš„
function debounce(fn, interval = 300) {
  let timer = null
  return () => {
    clearTimeout(timer)
    timer = setTimeout(fn, interval)
  }
}
const fun = () => console.log(1111)
window.addEventListener(
  'resize',
  debounce(() => console.log(1111), 1000)
)
window.addEventListener('resize', debounce(fun, 1000))
```

ä¸Šé¢çš„åªæ˜¯æ™®é€šçš„é˜²æŠ–ï¼Œè¿˜å¯ä»¥ç«‹å³æ‰§è¡Œ

```js
// å¸¦ç«‹å³æ‰§è¡Œçš„
function debounceImmediate(fn, interval = 300, immediate = true) {
  let timer = null
  return () => {
    clearTimeout(timer)
    if (immediate) {
      // å¦‚æœç«‹å³æ‰§è¡Œï¼Œåˆ™æ¸…é™¤å®šæ—¶å™¨ï¼Œå¹¶æ‰§è¡Œ
      immediate = false
      fn.apply(null)
    } else {
      timer = setTimeout(() => {
        fn.apply(null)
        immediate = true
      }, interval)
    }
  }
}

const fun2 = () => console.log(2222)
window.addEventListener('resize', debounceImmediate(fun2, 1000))
```
