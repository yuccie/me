---
title: é‚£äº›æ—¥å­
date: Sun Nov 19 2023 16:06:28 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)
lastmod: 2023/11/19
tags: [day, å·©å›º]
draft: false
summary: è¦æƒ³çœ‹èµ·æ¥æ¯«ä¸è´¹åŠ›,å°±éœ€è¦èƒŒåç”¨å°½å…¨åŠ›
layout: PostSimple
bibliography: references-data.bib
canonicalUrl: https://dume.vercel.app/blog/about-algorithm/4_é‚£äº›æ—¥å­.md
---

## 20231129 å‘¨ä¸‰

### 404 å¹¶ä¸ä¼šè§¦å‘ XMLHttpRequest çš„ onerror äº‹ä»¶

XMLHttpRequestï¼ˆXHRï¼‰å¯¹è±¡çš„ onerror äº‹ä»¶åœ¨ä»¥ä¸‹æƒ…å†µä¸‹å¯ä»¥è§¦å‘ï¼š

- ç½‘ç»œé”™è¯¯ï¼šå¦‚æœè¯·æ±‚æ— æ³•å‘é€æˆ–æ¥æ”¶ï¼ˆå¦‚æ–­ç½‘æˆ–è¯·æ±‚è¶…æ—¶ï¼‰ï¼Œonerror äº‹ä»¶å°†è§¦å‘ã€‚
- è·¨åŸŸé”™è¯¯ï¼šå¦‚æœè·¨åŸŸè¯·æ±‚ä¸è¢«æœåŠ¡å™¨æ¥å—ï¼Œä¹Ÿä¼šè§¦å‘ onerror äº‹ä»¶ã€‚è¿™æ˜¯ç”±äºæµè§ˆå™¨çš„åŒæºç­–ç•¥é™åˆ¶ï¼ŒXHR è¯·æ±‚å¿…é¡»éµå¾ªåŒæºç­–ç•¥ï¼Œé™¤éæœåŠ¡å™¨æ˜ç¡®å…è®¸è·¨åŸŸè¯·æ±‚ã€‚
  ç„¶è€Œï¼Œå¦‚æœ XHR è¯·æ±‚æˆåŠŸå‘é€åˆ°æœåŠ¡å™¨å¹¶è¿”å›å“åº”ï¼Œå³ä½¿ HTTP çŠ¶æ€ç æ˜¯ 404ï¼ˆèµ„æºæœªæ‰¾åˆ°ï¼‰ï¼Œonerror äº‹ä»¶ä¸ä¼šè§¦å‘ã€‚è¿™æ˜¯å› ä¸º HTTP çŠ¶æ€ç åœ¨ 2xx èŒƒå›´ä¹‹å¤–æ—¶ï¼ŒXHR å¯¹è±¡å¹¶ä¸è®¤ä¸ºæ˜¯é”™è¯¯çš„æƒ…å†µï¼Œå› æ­¤ä¸ä¼šè§¦å‘ onerror äº‹ä»¶ã€‚ç›¸åï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒXHR å¯¹è±¡ä¼šè§¦å‘ onload äº‹ä»¶ã€‚

è¦æ£€æµ‹ HTTP çŠ¶æ€ç æ˜¯å¦ä¸º 404ï¼Œå¯ä»¥ä½¿ç”¨ status å±æ€§æ¥è·å–è¿”å›çš„çŠ¶æ€ç ï¼Œå¹¶åœ¨ onload äº‹ä»¶å¤„ç†ç¨‹åºä¸­æ£€æŸ¥å®ƒã€‚ä¾‹å¦‚ï¼š

```js
var xhr = new XMLHttpRequest()
xhr.open('GET', 'http://example.com/nonexistent', true)
xhr.onload = function () {
  if (xhr.status === 404) {
    // å¤„ç†404é”™è¯¯
  } else {
    // è¯·æ±‚æˆåŠŸ
  }
}
xhr.onerror = function () {
  // å¤„ç†ç½‘ç»œé”™è¯¯
}
xhr.send()
```

### promise å¤±è´¥å›è°ƒ

```js
const tasks = [
  () => new Promise((resolve, reject) => reject(new Error('ddd'))),
  () => new Promise((resolve, reject) => reject(2)),
]
Promise.all(tasks)
  .then((res) => console.log('res', res))
  .catch((err) => console.log('err', err))
// ä¸Šé¢çš„é€»è¾‘ï¼Œå¹¶ä¸ä¼šæ‰§è¡Œ error

const tasks = [
  new Promise((resolve, reject) => reject(new Error('ddd'))),
  new Promise((resolve, reject) => reject(2)),
]
Promise.all(tasks)
  .then((res) => console.log('res', res))
  .catch((err) => console.log('err', err))
```

## 20231128 å‘¨äºŒ

### è®¾è®¡ä¸€ä¸ªå…¨æ ˆç³»ç»Ÿéœ€è¦è€ƒè™‘å“ªäº›

- æ¶æ„è®¾è®¡ï¼šç¡®å®šç³»ç»Ÿçš„æ•´ä½“æ¶æ„ï¼ŒåŒ…æ‹¬å‰ç«¯ä¸åç«¯ä¹‹é—´çš„é€šä¿¡æ–¹å¼å’Œæ•°æ®ä¼ è¾“æ ¼å¼ã€‚å¸¸è§çš„é€‰æ‹©åŒ…æ‹¬ RESTful APIã€GraphQL ç­‰ã€‚ç¡®ä¿å‰åç«¯ä¹‹é—´çš„æ¥å£è®¾è®¡åˆç†ã€æ¸…æ™°ï¼Œå¹¶èƒ½å¤Ÿæ»¡è¶³ç³»ç»Ÿéœ€æ±‚ã€‚

- æ•°æ®æµç®¡ç†ï¼šé€‰æ‹©åˆé€‚çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼Œä¾‹å¦‚ Vue ä¸­çš„ Vuexï¼Œç”¨äºç®¡ç†å‰ç«¯åº”ç”¨ç¨‹åºçš„çŠ¶æ€å’Œæ•°æ®æµã€‚è€ƒè™‘å‰ç«¯ä¸åç«¯ä¹‹é—´çš„æ•°æ®äº¤äº’ï¼Œå¦‚ä½•å°†åç«¯è¿”å›çš„æ•°æ®åŒæ­¥åˆ°å‰ç«¯çš„çŠ¶æ€ç®¡ç†ä¸­ï¼Œä»¥åŠå¦‚ä½•å°†å‰ç«¯çš„ç”¨æˆ·æ“ä½œå‘é€ç»™åç«¯è¿›è¡Œå¤„ç†ã€‚

- æ¥å£è®¾è®¡ï¼šè®¾è®¡åç«¯çš„ API æ¥å£ï¼Œå®šä¹‰è¯·æ±‚å’Œå“åº”çš„æ•°æ®ç»“æ„ã€å‚æ•°éªŒè¯ã€é”™è¯¯å¤„ç†ç­‰ã€‚ç¡®ä¿æ¥å£è®¾è®¡ç¬¦åˆ RESTful åŸåˆ™æˆ–å…¶ä»–çº¦å®šï¼Œå¹¶èƒ½å¤Ÿæ»¡è¶³å‰ç«¯çš„æ•°æ®éœ€æ±‚ã€‚

- å®‰å…¨æ€§ï¼šç¡®ä¿ç³»ç»Ÿçš„å®‰å…¨æ€§ï¼ŒåŒ…æ‹¬å‰ç«¯ä¸åç«¯çš„èº«ä»½éªŒè¯å’Œæˆæƒæœºåˆ¶ï¼Œé˜²æ­¢æ½œåœ¨çš„å®‰å…¨æ¼æ´å’Œæ”»å‡»ã€‚ä½¿ç”¨é€‚å½“çš„å®‰å…¨æ€§æªæ–½ï¼Œå¦‚ HTTPSã€è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰é˜²æŠ¤ã€è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆCSRFï¼‰é˜²æŠ¤ç­‰ã€‚

- æ€§èƒ½ä¼˜åŒ–ï¼šè€ƒè™‘ç³»ç»Ÿçš„æ€§èƒ½ä¼˜åŒ–ï¼ŒåŒ…æ‹¬å‰ç«¯çš„åŠ è½½é€Ÿåº¦ã€æ¸²æŸ“æ€§èƒ½ä»¥åŠåç«¯çš„å“åº”æ—¶é—´å’Œååé‡ã€‚ä½¿ç”¨åˆé€‚çš„æŠ€æœ¯å’Œå·¥å…·ï¼Œå¦‚å‰ç«¯çš„ä»£ç å‹ç¼©ã€ç¼“å­˜æœºåˆ¶ã€æ‡’åŠ è½½ç­‰ï¼Œåç«¯çš„æ•°æ®åº“ç´¢å¼•ã€ç¼“å­˜ã€å¼‚æ­¥å¤„ç†ç­‰ã€‚

- æ—¥å¿—å’Œç›‘æ§ï¼šé…ç½®é€‚å½“çš„æ—¥å¿—è®°å½•å’Œç›‘æ§ç³»ç»Ÿï¼Œç”¨äºæ”¶é›†ç³»ç»Ÿçš„è¿è¡Œæ—¥å¿—å’Œæ€§èƒ½æŒ‡æ ‡ã€‚è¿™æ ·å¯ä»¥æ–¹ä¾¿æ’æŸ¥é—®é¢˜ã€ç›‘æ§ç³»ç»Ÿè¿è¡ŒçŠ¶æ€ï¼Œå¹¶åŠæ—¶å‘ç°å’Œè§£å†³æ½œåœ¨çš„å¼‚å¸¸æƒ…å†µã€‚

- éƒ¨ç½²å’Œè¿ç»´ï¼šè€ƒè™‘ç³»ç»Ÿçš„éƒ¨ç½²å’Œè¿ç»´æµç¨‹ï¼ŒåŒ…æ‹¬å‰ç«¯çš„æ‰“åŒ…å’Œå‘å¸ƒã€åç«¯çš„éƒ¨ç½²å’Œæ‰©å±•ã€‚é€‰æ‹©åˆé€‚çš„éƒ¨ç½²æ–¹å¼ï¼Œå¦‚å®¹å™¨åŒ–éƒ¨ç½²ï¼ˆå¦‚ Dockerï¼‰ã€è‡ªåŠ¨åŒ–éƒ¨ç½²å·¥å…·ï¼ˆå¦‚ Jenkinsï¼‰ç­‰ï¼Œä»¥ä¾¿æ›´é«˜æ•ˆåœ°è¿›è¡Œç³»ç»Ÿçš„éƒ¨ç½²å’Œç»´æŠ¤ã€‚

- æµ‹è¯•å’Œè´¨é‡ä¿è¯ï¼šå»ºç«‹é€‚å½“çš„æµ‹è¯•ç­–ç•¥å’Œæµç¨‹ï¼ŒåŒ…æ‹¬å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€ç«¯åˆ°ç«¯æµ‹è¯•ç­‰ï¼Œä»¥ç¡®ä¿ç³»ç»Ÿçš„è´¨é‡å’Œç¨³å®šæ€§ã€‚ä½¿ç”¨åˆé€‚çš„æµ‹è¯•å·¥å…·å’Œæ¡†æ¶ï¼Œå¦‚ Jestã€Mocha ç­‰ï¼Œè¿›è¡Œå…¨é¢çš„æµ‹è¯•è¦†ç›–ã€‚

### å¾®å‰ç«¯ã€å¾®æœåŠ¡

- å¾®å‰ç«¯ï¼šå¾®å‰ç«¯æ˜¯ä¸€ç§ç±»ä¼¼äºå¾®æœåŠ¡çš„æ¶æ„ï¼Œæ˜¯ä¸€ç§ç”±ç‹¬ç«‹äº¤ä»˜çš„å¤šä¸ªå‰ç«¯åº”ç”¨ç»„æˆæ•´ä½“çš„æ¶æ„é£æ ¼ï¼Œå°†å‰ç«¯åº”ç”¨åˆ†è§£æˆä¸€äº›æ›´å°ã€æ›´ç®€å•çš„èƒ½å¤Ÿç‹¬ç«‹å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²çš„åº”ç”¨ï¼Œè€Œåœ¨ç”¨æˆ·çœ‹æ¥ä»ç„¶æ˜¯å†…èšçš„å•ä¸ªäº§å“ã€‚æœ‰ä¸€ä¸ªåŸºåº§åº”ç”¨ï¼ˆä¸»åº”ç”¨ï¼‰ï¼Œæ¥ç®¡ç†å„ä¸ªå­åº”ç”¨çš„åŠ è½½å’Œå¸è½½ã€‚
- æ˜¯ä¸€ç§åç«¯æ¶æ„æ¨¡å¼ï¼Œå°†ä¸€ä¸ªå¤§å‹åº”ç”¨ç¨‹åºæ‹†åˆ†ä¸ºä¸€ç»„å°å‹ã€è‡ªæ²»çš„æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡ç‹¬ç«‹è¿è¡Œã€éƒ¨ç½²å’Œæ‰©å±•ã€‚æ¯ä¸ªæœåŠ¡è´Ÿè´£ç‰¹å®šçš„ä¸šåŠ¡åŠŸèƒ½ï¼Œå¯ä»¥ç”±ç‹¬ç«‹çš„å›¢é˜Ÿå¼€å‘å’Œç»´æŠ¤ï¼Œä½¿ç”¨é€‚åˆå…¶éœ€æ±‚çš„ç¼–ç¨‹è¯­è¨€å’ŒæŠ€æœ¯æ ˆã€‚å¾®æœåŠ¡é€šè¿‡è§£è€¦å’Œè‡ªæ²»çš„æœåŠ¡æ¶æ„ï¼Œæé«˜äº†ç³»ç»Ÿçš„å¯æ‰©å±•æ€§ã€çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚å¾®æœåŠ¡ä¹‹é—´é€šè¿‡ API è¿›è¡Œé€šä¿¡ï¼Œå¯ä»¥ä½¿ç”¨è½»é‡çº§çš„é€šä¿¡åè®®ï¼ˆå¦‚ HTTPã€RESTï¼‰æˆ–æ¶ˆæ¯é˜Ÿåˆ—ç­‰æ–¹å¼ã€‚
- Serverlessï¼ˆæ— æœåŠ¡å™¨ï¼‰æ˜¯ä¸€ç§äº‘è®¡ç®—æ¶æ„æ¨¡å¼ï¼Œå®ƒä½¿å¼€å‘è€…èƒ½å¤Ÿæ„å»ºå’Œè¿è¡Œåº”ç”¨ç¨‹åºè€Œæ— éœ€ç®¡ç†åº•å±‚çš„æœåŠ¡å™¨åŸºç¡€è®¾æ–½ã€‚åœ¨ä¼ ç»Ÿçš„æœåŠ¡å™¨æ¨¡å‹ä¸­ï¼Œå¼€å‘è€…éœ€è¦è‡ªè¡Œé…ç½®ã€ç®¡ç†å’Œæ‰©å±•æœåŠ¡å™¨ã€‚è€Œåœ¨ Serverless æ¨¡å‹ä¸­ï¼Œäº‘æœåŠ¡æä¾›å•†è´Ÿè´£ç®¡ç†åº•å±‚çš„æœåŠ¡å™¨èµ„æºï¼Œå¼€å‘è€…åªéœ€å…³æ³¨åº”ç”¨ç¨‹åºçš„ä¸šåŠ¡é€»è¾‘ã€‚

  - äº‹ä»¶é©±åŠ¨ï¼šServerless åº”ç”¨ç¨‹åºæ˜¯é€šè¿‡äº‹ä»¶è§¦å‘çš„ï¼Œä¾‹å¦‚ HTTP è¯·æ±‚ã€æ¶ˆæ¯é˜Ÿåˆ—ã€æ•°æ®åº“å˜æ›´ç­‰ã€‚å¼€å‘è€…ç¼–å†™å‡½æ•°ï¼ˆFunctionï¼‰æ¥å¤„ç†è¿™äº›äº‹ä»¶ï¼Œå¹¶å°†å‡½æ•°ä¸Šä¼ åˆ°äº‘å¹³å°ï¼Œäº‘å¹³å°ä¼šåœ¨äº‹ä»¶å‘ç”Ÿæ—¶è‡ªåŠ¨æ‰§è¡Œå‡½æ•°ã€‚
  - å¼¹æ€§æ‰©å±•ï¼šServerless å¹³å°æ ¹æ®äº‹ä»¶çš„è´Ÿè½½è‡ªåŠ¨è¿›è¡Œå¼¹æ€§æ‰©å±•ï¼Œæ ¹æ®éœ€è¦åˆ†é…å’Œé‡Šæ”¾èµ„æºï¼Œä½¿åº”ç”¨ç¨‹åºèƒ½å¤Ÿé€‚åº”ä¸åŒçš„è´Ÿè½½æƒ…å†µã€‚
  - ä»˜è´¹æ¨¡å‹ï¼š
  - æœåŠ¡ç®¡ç†ï¼šäº‘æœåŠ¡æä¾›å•†è´Ÿè´£ç®¡ç†åº•å±‚çš„æœåŠ¡å™¨åŸºç¡€è®¾æ–½ï¼ŒåŒ…æ‹¬æœåŠ¡å™¨çš„é…ç½®ã€éƒ¨ç½²ã€ç›‘æ§å’Œæ—¥å¿—è®°å½•ç­‰ï¼Œå¼€å‘è€…åªéœ€ä¸“æ³¨äºåº”ç”¨ç¨‹åºçš„å¼€å‘ã€‚

- ä¸ºä»€ä¹ˆä¸æ˜¯ iframe
  - iframe æœ€å¤§çš„ç‰¹æ€§å°±æ˜¯æä¾›äº†æµè§ˆå™¨åŸç”Ÿçš„ç¡¬éš”ç¦»æ–¹æ¡ˆï¼Œä¸è®ºæ˜¯æ ·å¼éš”ç¦»ã€js éš”ç¦»è¿™ç±»é—®é¢˜ç»Ÿç»Ÿéƒ½èƒ½è¢«å®Œç¾è§£å†³ã€‚
  - ä½†æœ€å¤§çš„é—®é¢˜ï¼ŒåŒæ ·ä¹Ÿåœ¨äºä»–çš„éš”ç¦»æ€§æ— æ³•è¢«çªç ´ï¼Œå¯¼è‡´åº”ç”¨é—´ä¸Šä¸‹æ–‡æ— æ³•è¢«å…±äº«ï¼Œéšä¹‹å¸¦æ¥çš„å¼€å‘ä½“éªŒã€äº§å“ä½“éªŒçš„é—®é¢˜ã€‚
    - url ä¸åŒæ­¥ã€‚æµè§ˆå™¨åˆ·æ–° iframe url çŠ¶æ€ä¸¢å¤±ã€åé€€å‰è¿›æŒ‰é’®æ— æ³•ä½¿ç”¨ã€‚
    - UI ä¸åŒæ­¥ï¼ŒDOM ç»“æ„ä¸å…±äº«ã€‚æƒ³è±¡ä¸€ä¸‹å±å¹•å³ä¸‹è§’ 1/4 çš„ iframe é‡Œæ¥ä¸€ä¸ªå¸¦é®ç½©å±‚çš„å¼¹æ¡†ï¼ŒåŒæ—¶æˆ‘ä»¬è¦æ±‚è¿™ä¸ªå¼¹æ¡†è¦æµè§ˆå™¨å±…ä¸­æ˜¾ç¤ºï¼Œè¿˜è¦æµè§ˆå™¨ resize æ—¶è‡ªåŠ¨å±…ä¸­..
    - å…¨å±€ä¸Šä¸‹æ–‡å®Œå…¨éš”ç¦»ï¼Œå†…å­˜å˜é‡ä¸å…±äº«ã€‚iframe å†…å¤–ç³»ç»Ÿçš„é€šä¿¡ã€æ•°æ®åŒæ­¥ç­‰éœ€æ±‚ï¼Œä¸»åº”ç”¨çš„ cookie è¦é€ä¼ åˆ°æ ¹åŸŸåéƒ½ä¸åŒçš„å­åº”ç”¨ä¸­å®ç°å…ç™»æ•ˆæœ
    - æ…¢ã€‚æ¯æ¬¡å­åº”ç”¨è¿›å…¥éƒ½æ˜¯ä¸€æ¬¡æµè§ˆå™¨ä¸Šä¸‹æ–‡é‡å»ºã€èµ„æºé‡æ–°åŠ è½½çš„è¿‡ç¨‹ã€‚

### å®ç°ä¸€ä¸ªç®€æ˜“çš„æ¨¡ç‰ˆå¼•æ“

é¡¾åæ€ä¹‰ï¼Œå…¶å®å°±æ˜¯è§£ææ¨¡ç‰ˆè€Œå·²

```js
function render(template, data) {
  const regex = /{{\s*([a-zA-Z0-9_.]+)\s*}}/g
  return template.replace(regex, (match, key) => {
    const keys = key.split('.')
    let value = data
    for (let k of keys) {
      value = value[k]
    }
    return value !== undefined ? value : match
  })
}

const template = 'Hello, {{ name }}! Today is {{ date.month }} {{ date.day }}.'

const data = {
  name: 'John Doe',
  date: {
    month: 'September',
    day: 28,
  },
}

const result = render(template, data)
console.log(result)
// è¾“å‡º: "Hello, John Doe! Today is September 28."
```

### å‘å¸ƒè®¢é˜…

```js
// å‘å¸ƒè®¢é˜…
class MyEvtEmitter {
  constructor() {
    this.map = new Map()
  }

  // æ·»åŠ äº‹ä»¶
  on(key, fn) {
    // ä¹‹å‰å­˜åœ¨è¿‡ï¼Œå°±å‹å…¥
    if (this.map.has(key)) {
      this.map.get(key).push(fn)
    } else {
      this.map.set(key, [fn])
    }
  }

  // è§¦å‘äº‹ä»¶
  emit(key) {
    if (!this.map.has(key)) {
      return 'äº‹ä»¶æœªå®šä¹‰'
    }

    this.map.get(key).forEach((fn) => fn())
  }

  del(key) {
    this.map.has(key) && this.map.delete(key)
  }

  once(key, fn) {
    const _fn = () => {
      // æ‰§è¡Œå®Œï¼Œå°±ç§»é™¤å¯¹åº”äº‹ä»¶
      fn()
      this.del(key)
    }
    this.on(key, _fn)
  }
}
```

### LRU ç¼“å­˜

```js
// æœ€å¤§size
//
class myLRU {
  constructor(size) {
    this.maxSize = size
    this.map = new Map()
  }
  get(key) {
    if (!this.map.has(key)) {
      return -1
    }

    // å¦‚æœå­˜åœ¨ï¼Œåˆ™æ‰¾åˆ°ï¼Œå¹¶é‡æ–°æ›´æ–°
    const val = this.map.get(key)
    this.del(key)
    this.set(key, val)
  }

  set(key, val) {
    // å¦‚æœæœ‰ï¼Œç›´æ¥åˆ é™¤
    if (this.map.has(key)) {
      this.del(key)
    }

    // åˆ¤æ–­æ˜¯å¦è¶…è¿‡é™åˆ¶
    if (this.map.size >= this.maxSize) {
      // åˆ é™¤æœ€åä¸€ä¸ª, this.map.keys() ç”Ÿæˆä¸€ä¸ªè¿­ä»£å™¨
      // è¿­ä»£å™¨è°ƒç”¨nextæ–¹æ³•ï¼Œå¾—åˆ°å¯¹åº”çš„å€¼ï¼Œvalueå°±æ˜¯å¯¹åº”çš„key
      this.del(this.map.keys().next().value)
    }
    this.map.set(key, val)
  }
  del(key) {
    this.map.delete(key)
  }
}

const cLru = new myLRU(2)
cLru.set('a', '111')
cLru.get('a')

// cLru.map.keys().next()
// {value: 'a', done: false}
```

### `console.log(1<2<3)`

- 1 < 2 è¿”å› true
- true < 3 è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œåˆä¼šè½¬åŒ–ä¸º 1 < 3 æœ€åè¿”å› true

### å†™ä¸€ä¸ª lodash çš„ get æ–¹æ³•

```js
const myGet = (obj, str, defaultValue) => {
  // str è‚¯å®šæ˜¯å­—ç¬¦ä¸²
  if (str === void 0) return obj

  return str.split('.').reduce((acc, cur) => {
    return acc[cur] ? acc[cur] : defaultValue || ''
  }, obj)
}

function myGet1(obj, path, defaultValue) {
  // åˆ¤æ–­æ˜¯æ•°ç»„è¿˜æ˜¯
  const keys = Array.isArray(path) ? path : path.split('.')
  let result = obj

  // éå†æ•°ç»„
  for (let key of keys) {
    // å¦‚æœ
    if (result && typeof result === 'object' && key in result) {
      result = result[key]
    } else {
      return defaultValue
    }
  }

  return result
}

// myGet({a: { b: 1 }}, 'a.b')
myGet1({ a: { b: 1 } }, 'a.b')
```

## 20231124 å‘¨äº”

### æœ‰åºæ•°ç»„çš„å¹³æ–¹

```js
var sortedSquares = function (nums) {
  // åˆ©ç”¨åŒæŒ‡é’ˆ
  let left = 0
  let right = nums.length - 1

  // ç„¶åç”Ÿæˆä¸€ä¸ªç©ºæ•°ç»„ï¼Œä½œä¸ºç»“æœæ•°ç»„
  let res = Array(nums.length).fill(0)
  let k = nums.length - 1

  while (left <= right) {
    let a = nums[left] * nums[left]
    let b = nums[right] * nums[right]

    if (a < b) {
      // å°†æœ€å¤§çš„æ”¾åœ¨æœ€å³ä¾§ï¼Œå› ä¸ºè´Ÿè´Ÿå¾—æ­£ï¼Œæœ€å¤§å€¼è‚¯å®šåœ¨ä¸¤ä¾§
      // å¦å¤–æ³¨æ„ï¼Œéœ€è¦æ–°å¢ä¸€ä¸ªæŒ‡é’ˆå’Œæ•°ç»„ï¼Œä½œä¸ºæœ€ç»ˆæ“ä½œçš„ï¼Œä¸è¦ä½¿ç”¨leftã€rightã€numsç­‰ï¼Œé˜²æ­¢å¹²æ‰°
      res[k--] = b
      right--
    } else {
      res[k--] = a
      left++
    }
  }
  return res
}
```

### ç¿»è½¬å­—ç¬¦ä¸²

- æ¯éš” 2k é¡¹ï¼Œç¿»è½¬å‰ k é¡¹

```js
var reverseStr = function (s, k) {
  // æ€è·¯ï¼šä»”ç»†å®¡é¢˜ï¼Œå…¶å®å°±æ˜¯ï¼Œå°†å­—ç¬¦ä¸²åˆ†å‰²æˆæ¯2kä¸ºä¸€ç»„ï¼Œç„¶åç¿»è½¬è¿™ä¸€ç»„ä¸­çš„å‰ké¡¹
  // å› æ­¤ï¼Œåªéœ€è¦åœ¨forå¾ªç¯ä¸Šåšæ–‡ç« å³å¯

  let len = s.length
  // ä¸è¦ç›´æ¥æ“ä½œå­—ç¬¦ä¸²ï¼Œ
  let resArr = s.split('')
  for (let i = 0; i < len; i += 2 * k) {
    // æ‰¾å‡ºæœ€å³ä¾§è¾¹ç•Œ
    let l = i
    let r = i + k - 1 > len ? len : i + k - 1

    while (l < r) {
      ;[resArr[l], resArr[r]] = [resArr[r], resArr[l]]
      l++
      r--
    }
  }
  return resArr.join('')
}
```

### æ‰‹å†™ä¸€ä¸ª new è¿ç®—ç¬¦

- new è¿ç®—ç¬¦æ˜¯å®ä¾‹åŒ–ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åå¾—åˆ°ä¸€ä¸ªå®ä¾‹
  - åˆ›å»ºä¸€ä¸ªå¯¹è±¡
  - è®©å¯¹è±¡çš„åŸå‹ç­‰äºå‡½æ•°çš„åŸå‹
  - æ‰§è¡Œå‡½æ•°
  - åˆ¤æ–­è¿”å›å€¼

```js
function Foo() {
  console.log('foo')
}
Foo.prototype.sayHi = () => console.log('hi')

let o = new Foo()

// ç­‰ä»·äº
function myNew() {
  // var o = Object.create(null);   //1ã€æ–°å»ºç©ºå¯¹è±¡ï¼Œè¿™é‡Œä¸è¦ä½¿ç”¨è¿™ä¸ªï¼Œå› ä¸ºä¼šæ–­æ‰ä¸€äº›é“¾æ¥
  var o = new Object() //1ã€æ–°å»ºç©ºå¯¹è±¡
  o.__proto__ = Foo.prototype //2ã€å»ºç«‹è¿æ¥
  let returnVal = Foo.call(o) //3ã€æ‰§è¡Œ
  if (typeof returnVal === 'object') {
    //4ã€åˆ¤æ–­è¿”å›å€¼
    return returnVal
  }
  return o
}
```

### js ä¸­ this çš„æŒ‡å‘

```js
// å› ä¸ºåœ¨ES5ä¸­ï¼Œå…¨å±€å˜é‡æ˜¯æŒ‚è½½åœ¨é¡¶å±‚å¯¹è±¡ï¼ˆæµè§ˆå™¨æ˜¯windowï¼‰ä¸­
var name = 'window'
var doSth = function () {
  console.log(this.name)
}
doSth() // window

// letæ²¡æœ‰ç»™é¡¶å±‚å¯¹è±¡ä¸­ï¼ˆæµè§ˆå™¨æ˜¯windowï¼‰æ·»åŠ å±æ€§ï¼Œwindow.name2å’Œwindow.doSthéƒ½æ˜¯undefinedã€‚
let name1 = 'window'
let doSth = function () {
  console.log(this === window)
  console.log(this.name1)
}
doSth() // trueï¼Œundefined
```

### å¤§æ•°å­—ç›¸ä¹˜

```js
var multiply = function (num1, num2) {
  // å¦‚æœæ²¡æœ‰è¿™ä¸ªåˆ¤æ–­ï¼Œä¼šè¶…æ—¶
  if (num1 === '0' || num2 === '0') {
    return '0'
  }
  // å­—ç¬¦ä¸²ç›¸åŠ çš„è¯ï¼Œåªéœ€è¦è¿›ä¸€æ¬¡ä½ï¼Œç›¸ä¹˜åˆ™å¯èƒ½è¿›ä½å¤šæ¬¡ã€‚ã€‚ã€‚
  // ä¸¤ä¸ªæ•°ç›¸ä¹˜ï¼Œæœ€å¤§ä½æ•°æ˜¯ m + n
  // å€’åºéå†ä¸¤ä¸ªæ•°,

  const len1 = num1.length
  const len2 = num2.length
  const res = Array(len1 + len2).fill(0)

  // è¿™é‡Œå…¶å®æ˜¯åŒå±‚å¾ªç¯ï¼Œæ‹¿ä¸€ä¸ªæ•°åˆ†åˆ«ä¹˜ä»¥å¦å¤–ä¸€ä¸ªæ•°å­—çš„å…¨éƒ¨ä½
  for (let i = len1 - 1; i >= 0; i--) {
    const a = +num1[i]
    for (let j = len2 - 1; j >= 0; j--) {
      const b = +num2[j]
      const multi = a * b // å­—ç¬¦ä¸²ç›¸ä¹˜ï¼Œç›´æ¥å˜æˆæ•°ç»„
      const sum = res[i + j + 1] + multi //

      res[i + j + 1] = sum % 10
      // æ•°ç»„çš„æ¯ä¸€é¡¹ï¼Œå¯ä»¥æ˜¯å¤šä¸ªä½æ•°
      // æ³¨æ„è¿™é‡Œæ˜¯ res[i + j] = res[i + j] + sum / 10 | 0
      res[i + j] += (sum / 10) | 0
    }
  }
  // å»é™¤å¤´éƒ¨0
  while (!res[0]) res.shift()

  return res.length ? res.join('') : '0'
}
```

### å¤§æ•°å­—ç›¸åŠ 

```js
// ä¸¤ä¸ªå¤§æ•°ç›¸åŠ 
var addStrings = function (num1, num2) {
    let result = '';
    let i = num1.length - 1, j = num2.length - 1, carry = 0;

    while (i >= 0 || j >= 0) {
        let n1 = i >= 0 ? +num1[i] : 0;
        let n2 = j >= 0 ? +num2[j] : 0;
        const temp = n1 + n2 + carry;
        // ğŸ”¥æ³¨æ„è¿™é‡Œï¼šä¸0æŒ‰ä½æˆ–ï¼Œäº§ç”Ÿçš„æ•ˆæœæ˜¯æŠŠå°æ•°éƒ¨åˆ†å¹²æ‰äº†
        // å…¶å®æœ¬è´¨æ˜¯ åœ¨ä½æ“ä½œç¬¦ | åœ¨æ‰§è¡Œä¹‹å‰ä¼šå°†æµ®ç‚¹æ•° xxx è½¬æ¢ä¸º32ä½ ğŸ”¥å¸¦ç¬¦å·æ•´æ•°ğŸ”¥ ã€‚è½¬æ¢è¿‡ç¨‹ä¸­ï¼Œæ•´æ•°éƒ¨åˆ†ä¿æŒä¸å˜ï¼Œå°æ•°éƒ¨åˆ†è¢«æˆªæ–­ã€‚
        // è€Œåé¢çš„0å°±æ˜¯ä¸€ä¸ªé™ªè¡¬ï¼Œç›¸æ¯”ä¸ Math.floor æ˜¯å‘ä¸‹å–æ•´ï¼ŒäºŒè€…çš„å«ä¹‰ä¸ä¸€æ ·
        carry = temp / 10 | 0;
        result = `${temp % 10}${result}`;
        i--; j--;
    }
    // å¤„ç†æœ€åä¸€ä¸ªè¿›ä½
    if (carry === 1) result = `1${result}`;

    return result;
};

// å…³äºè¿›åˆ¶è½¬åŒ– ï¼šå°æ•°éƒ¨åˆ†å¯ä»¥é€šè¿‡ä¹˜ä»¥ 2 å¹¶æå–æ•´æ•°éƒ¨åˆ†çš„æ–¹å¼é€æ­¥è½¬æ¢ä¸ºäºŒè¿›åˆ¶
0.58 * 2 = 1.16   // æ•´æ•°éƒ¨åˆ†ä¸º 1
0.16 * 2 = 0.32   // æ•´æ•°éƒ¨åˆ†ä¸º 0
0.32 * 2 = 0.64   // æ•´æ•°éƒ¨åˆ†ä¸º 0
0.64 * 2 = 1.28   // æ•´æ•°éƒ¨åˆ†ä¸º 1
0.28 * 2 = 0.56   // æ•´æ•°éƒ¨åˆ†ä¸º 0
0.56 * 2 = 1.12   // æ•´æ•°éƒ¨åˆ†ä¸º 1

// é‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œç›´åˆ°å°æ•°éƒ¨åˆ†ä¸º 0ï¼Œæˆ–è€…è¾¾åˆ°æ‰€éœ€çš„ç²¾åº¦ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¿ç•™å°æ•°ç‚¹åé¢çš„ä½æ•°ã€‚
// å› æ­¤ï¼Œ`0.58` çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸º `0.1001011001...`ï¼ˆæ— é™å¾ªç¯ï¼‰ã€‚
```

### ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ

```js
// å‡½æ•°å†…éƒ¨åˆ›å»ºçš„å‡½æ•°ä»¥åŠè¯¥å‡½æ•°èƒ½å¤Ÿè®¿é—®çš„å¤–éƒ¨å‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡çš„ç»„åˆ
```

### NaN null

```js
// åœ¨åŸºç¡€åº“é‡Œï¼Œåœ¨ç»è¿‡bridgeæ—¶ä¼šåºåˆ—åŒ–å¯¼è‡´ NaN å˜ä¸ºäº†ï¼Œå­—ç¬¦ä¸²çš„ 'null'
JSON.stringify(NaN) // 'null'
JSON.parse(JSON.stringify(NaN)) // null

// è€Œç»„ä»¶åœ¨å¤„ç†propsæ—¶ï¼Œåˆä¼šæ ¹æ®typeç±»å‹åšå¤„ç†
val === null ? '' : String(val)
```

### IIFE (Immediately Invoked Function Expressions)

```js
// function foo(){ }()  // ä¼šæŠ¥é”™ï¼Œä¼šè¢«è§£ææˆå‡½æ•°å®šä¹‰å’Œ () è€Œè°ƒç”¨æœ‰æ²¡æœ‰å…·ä½“çš„å‡½æ•°å

// åœ¨æ‰§è¡Œæ—¶ï¼Œå‡½æ•°è¡¨è¾¾å¼ (function foo(){ }) è¢«ç«‹å³è°ƒç”¨ï¼Œå‡½æ•°å foo åœ¨å‡½æ•°å¤–éƒ¨æ˜¯ä¸å¯è§çš„
// ğŸ”¥ fooæ‰§è¡Œå®Œå°±ä¼šç«‹å³é‡Šæ”¾
// ç”±äºè‡ªæ‰§è¡Œå‡½æ•°åœ¨å®šä¹‰æ—¶å°±è¢«ç«‹å³è°ƒç”¨ï¼Œå®ƒçš„ä¸»è¦ç›®çš„é€šå¸¸æ˜¯ä¸ºäº†åˆ›å»ºä¸€ä¸ªå±€éƒ¨ä½œç”¨åŸŸï¼Œä»¥é¿å…å˜é‡æ±¡æŸ“å…¨å±€å‘½åç©ºé—´
;(function foo() {})()(function foo() {})()
```

### a == 1 && a == 2 && a ==3

```js
// å¯ä»¥ä½¿ç”¨ä»£ç†ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¯¹è±¡çš„valueOfæ–¹æ³•
var a = {
  value: [1, 2, 3],
  // valueOf() æ–¹æ³•ã€‚è¯¥æ–¹æ³•åœ¨è¿›è¡Œéšå¼ç±»å‹è½¬æ¢æ—¶è¢«è°ƒç”¨
  valueOf: this.value.shift(),
}

// æ¯”è¾ƒ a == 1ã€‚ç”±äº a æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œ 1 æ˜¯ä¸€ä¸ªæ•°å­—ï¼ŒJavaScript ä¼šå°è¯•å°†å¯¹è±¡ a è½¬æ¢ä¸ºä¸€ä¸ªåŸå§‹å€¼è¿›è¡Œæ¯”è¾ƒã€‚è¿™æ—¶ä¼šè°ƒç”¨ a çš„ valueOf() æ–¹æ³•
console.log(a == 1 && a == 2 && a == 3) // true
```

### ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè§£æä¸€ä¸ªæ ‘çŠ¶ç»“æ„é‡Œçš„å€¼

```js
var arr = [1, [2, 3, [4, 5, [6, 6]]]]

const formatArr = (data) => {
  const flatArr = data.flat(Infinity)
  const noRepeatArr = [...new Set(flatArr)]
  return noRepeatArr.sort((a, b) => b - a)
}

const formatArrV1 = (data) => {
  // é’ˆå¯¹æ•°ç»„åšåºåˆ—åŒ–ï¼Œä¼šè‡ªåŠ¨æ‹å¹³ï¼Œæ³¨æ„æ˜¯Stringï¼Œä¸æ˜¯JSON.stringify
  // const flatArr = JSON.stringify(data) // '[1,[2,3,[4,5,[6,6]]]]'
  // String([1,[2,3,[4,5]]]) => '1,2,3,4,5'
  const flatArr = String(data)
    .split(',')
    .map((v) => +v)
  const noRepeatArr = flatArr.filter((v, idx, arr) => idx === arr.indexOf(v))
  return noRepeatArr.sort((a, b) => b - a)
}

console.log(formatArr(arr))
```

### ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè§£æåµŒå¥—å¯¹è±¡é‡Œçš„å€¼

```js
var obj = {
  'a.b.c': 1,
  'a.d.e': 2,
}
// æœ€åè¾“å‡º
var result = {
  a: {
    b: { c: 1 },
    d: { e: 2 },
  },
}

// æ€è·¯ï¼Œå…³é”®ç‚¹åœ¨äºå¦‚ä½•å°†æ–°ç”Ÿæˆçš„å¯¹è±¡ï¼ŒæŒ‚è½½åˆ°ä¹‹å‰çš„å±æ€§ä¸Š
var obj = { 'a.b.c': 1, 'a.c.d': 2 }
function formatObj(data) {
  let res = {}

  for (const key in data) {
    if (data.hasOwnProperty(key)) {
      const keyArr = key.split('.')

      // å› ä¸ºresæ˜¯æœ€ç»ˆç»“æœï¼Œéœ€è¦ä¸€ä¸ªåŠ¨æ€æŒ‡é’ˆï¼Œç±»ä¼¼é“¾è¡¨é‡Œï¼Œä¸€ä¸ªheadä¸åŠ¨ï¼Œç„¶åæ“ä½œä¸€ä¸ªæ¸¸åŠ¨æŒ‡é’ˆ
      let tempRes = res

      // éœ€è¦åˆ¤æ–­æœ€åä¸€ä¸ªå€¼ï¼Œ
      keyArr.forEach((k, idx) => {
        // å¦‚æœæ˜¯æœ€åä¸€ä¸ªï¼Œåˆ™èµ‹å€¼
        if (idx === keyArr.length - 1) {
          tempRes[k] = data[key]
        } else {
          // æ­¤æ—¶éœ€è¦æ–°å»ºå¯¹è±¡ï¼Œä¸éœ€è¦å¤åˆ¶
          tempRes[k] = tempRes[k] || {}
          // æŒ‡é’ˆç§»åŠ¨ï¼Œå› ä¸ºä¸‹ä¸€ä¸ªçš„å€¼ï¼Œè‚¯å®šæ˜¯æŒ‚è½½åœ¨ tempRes[k] çš„
          tempRes = tempRes[k]
        }
      })
    }
  }
  return res
}
console.log(formatObj(obj))
```

## 20231123 å‘¨å››

### äº‹ä»¶å¾ªç¯é˜Ÿåˆ—

- æ³¨æ„ä¸»çº¿ç¨‹ï¼Œæ¯”å¦‚å„ä¸ªç”Ÿå‘½å‘¨æœŸçš„æ‰§è¡Œï¼Œå³ä½¿ onLoad é‡Œæœ‰ await å‡½æ•°ï¼Œä¹Ÿä¸ä¼šé˜»æ–­ onShow çš„æ‰§è¡Œ å¦‚ä¸‹
  - å› ä¸ºå†…éƒ¨çš„ä»»åŠ¡å¯ä»¥ç†è§£ä¸ºå½“å‰ä¸»çº¿ç¨‹çš„å®ä»»åŠ¡æˆ–è€…å¾®ä»»åŠ¡ï¼Œåªä¼šé˜»æ–­å½“å‰ç”Ÿå‘½å‘¨æœŸå†…éƒ¨çš„é€»è¾‘
  - é‚£è¿™æ ·çš„è¯ï¼Œé¡µé¢åˆå§‹åŒ–ï¼ŒæŒ‰ç†è¯´ä¸åº”è¯¥æ¸²æŸ“çš„æ…¢å•Šï¼Ÿï¼Ÿï¼Ÿ
- å¾®ä»»åŠ¡æ³¨å†Œæ˜¯æœ‰é¡ºåºçš„ï¼Œå¦‚æœå‰ä¸€ä¸ªå¾®ä»»åŠ¡æ²¡æœ‰æ‰§è¡Œï¼Œåˆ™å®ƒæ¥ä¸‹æ¥çš„é‚£ä¸ªå¾®ä»»åŠ¡è‚¯å®šä¹Ÿä¸ä¼šæ³¨å†Œ

```js
onLoad()
onShow()
```

### promiseLimit

æ€è·¯ï¼š

1. ä¸€ä¸ªå‡½æ•°è´Ÿè´£å¾€é‡Œé¢æ·»åŠ æ‰§è¡Œå‡½æ•°
2. å¦å¤–ä¸€ä¸ªå‡½æ•°ï¼Œè´Ÿè´£æ‰§è¡Œå…·ä½“çš„ä»»åŠ¡

```js
const promiseLimit = (ps, limit) => {
  const res = []
  let runing = 0
  let idx = 0
  let len = ps.length

  return new Promise((resolve, reject) => {
    const runTask = (p, index) => {
      runing++
      console.log('æ­£åœ¨æ‰§è¡Œçš„æ•°é‡', runing)
      p()
        .then((v) => {
          runing--
          res[index] = v

          // ä»»åŠ¡æ‰§è¡Œå®Œï¼Œç»§ç»­è§¦å‘walk
          walk()
        })
        .catch((err) => reject(err))
    }

    const walk = () => {
      // å¦‚æœæ­£åœ¨æ‰§è¡Œçš„å°äºlimitï¼Œä¸”å·²ç»æ‰§è¡Œçš„æ€»æ•°å°äº len
      while (runing < limit && idx < len) {
        runTask(ps[idx], idx)
        idx++
      }
      // å¦‚æœæ‰§è¡Œå®Œï¼Œåˆ™resolove
      if (!runing) resolve(res)
    }
    walk()
  })
}
```

## 20231122 å‘¨ä¸‰

### åˆå¹¶ä¹±åºåŒºé—´

### æ‰‹åŠ¨å®ç°ä¸€ä¸ª vue çš„æ•°æ®åŠ«æŒ

æ€è·¯ï¼šå…¶å®å°±æ˜¯é€’å½’ + Object.defineProperty æˆ–è€… proxy

```js
const observe = (obj) => {
  // åªé’ˆå¯¹å¯¹è±¡åšå“åº”å¼æ‹¦æˆª
  if (!obj || typeof obj !== 'object') return

  // éå†å¯¹è±¡å±æ€§
  Object.keys(obj).forEach((key) => {
    let val = obj[key]

    // é€’å½’å¤„ç†
    observe(val)

    // å¤„ç†å…·ä½“å€¼
    Object.defineProperty(obj, key, {
      enumerable: true, // å¯æšä¸¾
      configurable: true, // å¯ä¿®æ”¹
      get() {
        console.log('è®¿é—®å±æ€§', key, 'å€¼ä¸º', val)
        return val
      },
      set(newVal) {
        if (newVal === val) return
        console.log('è®¾ç½®å±æ€§', key, 'æ–°å€¼ä¸º', newVal)
        val = newVal
      },
    })
  })
}

var obj = {
  a: 1,
  b: { c: 'cc', d: 3 },
}
observe(obj)
obj.a //

// ä½¿ç”¨Proxy
const observeProxy = (obj) => {
  // å…¶å®å°±æ˜¯é’ˆå¯¹ä¸€ä¸ªå¯¹è±¡ï¼Œåšä¸€ä¸ªé…ç½®åŒ–çš„å¤„ç†
  return new Proxy(obj, {
    get(target, key) {
      console.log('è®¿é—®å±æ€§', key, 'å€¼ä¸º', target[key])
      if (key in target) {
        return target[key]
      }
    },
    set(target, key, val) {
      target[key] = val
      console.log('è®¾ç½®å±æ€§', key, 'å€¼ä¸º', target[key])
      return true // å¿…é¡»è¿”å›true
    },
    deleteProperty(target, key) {
      console.log('åˆ é™¤å±æ€§', key)
      delete target[key]
      return true // å¿…é¡»è¿”å›true
    },
  })
}
var newObj = observeProxy(obj)
newObj.a
```

- Proxy
  - åŠŸèƒ½æ›´å¼ºå¤§ï¼Œå¯ä»¥æ‹¦æˆªæ›´å¤šçš„æ“ä½œï¼ŒåŒ…æ‹¬å±æ€§è¯»å–ã€å±æ€§è®¾ç½®ã€å±æ€§åˆ é™¤ã€å‡½æ•°è°ƒç”¨ç­‰
  - ç›´æ¥ä»£ç†æ•´ä¸ªå¯¹è±¡ï¼Œè€Œä¸æ˜¯æ¯ä¸ªå±æ€§ï¼Œå¯ä»¥åŠ¨æ€å¤„ç†æ·»åŠ å’Œåˆ é™¤çš„å±æ€§
  - ä»£ç†å¯¹è±¡ï¼Œè¿˜å¯ä»¥æ‹¦æˆªå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨å’Œæ„é€ å‡½æ•°è°ƒç”¨
  - ç¼ºç‚¹ï¼šå…¼å®¹æ€§ã€æ€§èƒ½å¼€é”€ç¨é«˜
- Object.defineProperty
  - å…¼å®¹æ€§å¥½
  - ç²¾ç»†åŒ–æ§åˆ¶ï¼Œå…·ä½“æ¯ä¸ªå±æ€§çš„å¯æšä¸¾ã€å¯é…ç½®ã€å¯å†™ç­‰
  - åªé’ˆå¯¹å·²å­˜åœ¨çš„å±æ€§
  - æ— æ³•æ‹¦æˆªæ•´ä¸ªå¯¹è±¡

### åŸç”Ÿå®ç° ajax

æ€è·¯ï¼šåˆ©ç”¨ promiseï¼Œå°è£… XMLHttpRequest æ–¹æ³•

### åˆ¤æ–­äºŒå‰æ ‘æ˜¯å¦ä¸ºå¯¹ç§°äºŒå‰æ ‘

- æ€è·¯ï¼šæˆå¯¹å‹å…¥å †æ ˆï¼Œæ³¨æ„é¡ºåºï¼Œç„¶åå†æˆå¯¹å¼¹å‡ºï¼Œåˆ¤æ–­

```js
var isSymmetric = function (root) {
  if (!root) return true

  const stack = [root.left, root.right]
  while (stack.length) {
    const right = stack.pop()
    const left = stack.pop()

    // å¦‚æœäºŒè€…éƒ½æ²¡æœ‰ï¼Œåˆ™ç»§ç»­
    if (!right && !left) {
      continue
    }
    if (!right || !left) {
      return false
    }
    if (right.val !== left.val) {
      return false
    }

    // æˆå¯¹å‹å…¥å †æ ˆï¼Œæ³¨æ„é¡ºåºï¼Œä¸éœ€è¦è€ƒè™‘æœ‰æ²¡æœ‰å€¼
    stack.push(left.left, right.right)
    stack.push(left.right, right.left)
  }
  return true
}
```

### è¿›åˆ¶è½¬åŒ–

è€ƒå¯Ÿç‚¹

- ä½æ“ä½œè¿ç®—
- toStringã€parseInt æ“ä½œ
  - parseInt åªæ˜¯æ ¹æ®æŒ‡å®šçš„ radix è¿›åˆ¶æ•°ï¼Œ**è¯†åˆ«å­—ç¬¦ä¸²ä¸­å¯¹åº”è¿›åˆ¶çš„æ•°æ®**è€Œå·²ï¼Œé»˜è®¤ 10ã€‚å¦‚æœä¸æ˜¯å¯¹åº”è¿›åˆ¶ï¼Œåˆ™åœæ­¢è¯†åˆ«
    - é»˜è®¤ 10 è¿›åˆ¶
  - toString
    - å­—ç¬¦ä¸²ï¼ŒåŸæ ·è¿”å›
    - æ•°å­—ç±»å‹ï¼Œå¯ä»¥æ¥æ”¶ä¸€ä¸ªè¿›åˆ¶æ•°ï¼Œè¿›è€Œè½¬åˆ°å¯¹åº”è¿›åˆ¶
    - å¯¹äºæ•°ç»„ï¼Œå°†æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ è½¬ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶å,å·æ‹¼æ¥
      - ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ [1,3, [3,4, [3,4]]].toString() => '1,3,3,4,3,4' å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§æ‹å¹³æ•°ç»„å•Šã€‚ã€‚ã€‚
    - å¯¹è±¡ï¼Œè¿”å›"[object Object]"

```js
parseInt(234, 4) // 11 ï¼Œå› ä¸º4è¿›åˆ¶ï¼Œæœ€é«˜ä½å°±æ˜¯4ï¼Œæ‰€ä»¥åªèƒ½è¯†åˆ«åˆ° 23 ä¹Ÿå°±æ˜¯ 2 * 4 + 3 => 11
;(12).toString(10) // // 12
;(12).toString(8) // 14 , 1 * 8 + 4 => 12
;[(1, 3, [3, 4, [3, 4]])].toString() // '1,3,3,4,3,4'
```

å¦‚ä½•æ‰‹åŠ¨å®ç°ä¸€ä¸ªè¿›åˆ¶è½¬åŒ–å‘¢ï¼Ÿ

æˆ‘ä»¬è¦çŸ¥é“ï¼Œæ‰€è°“è¿›åˆ¶è½¬åŒ–ï¼Œå…¶å®å°±æ˜¯å°†æŸä¸ªæ•° ä»¥æŸä¸ª base åŸºæ•°è¿›è¡Œæ‹†åˆ†è€Œå·²

```js
function decimalToBase(decimalNumber, base) {
  if (base < 2 || base > 16) {
    throw new Error('Base out of range. Only supports base 2 to 16.')
  }

  const digits = '0123456789abcdef'
  const result = []

  while (decimalNumber > 0) {
    // å–ä½™å¾—åˆ° è¿›ä½ï¼Œä¹Ÿå°±æ­£å¥½æ˜ å°„ digits é‡Œçš„æ•°æ®
    const digit = decimalNumber % base
    result.unshift(digits[digit]) // ä»å‰åˆ°åå‹å…¥
    decimalNumber = Math.floor(decimalNumber / base) // é™¤æ•°ï¼Œå¾—åˆ°æœ€æ–°çš„å€¼ã€‚
  }

  return result.join('')
}

const decimalNumber = 42
const binaryNumber = decimalToBase(decimalNumber, 2)
const octalNumber = decimalToBase(decimalNumber, 8)
const hexadecimalNumber = decimalToBase(decimalNumber, 16)

console.log(binaryNumber) // Output: "101010"
console.log(octalNumber) // Output: "52"
console.log(hexadecimalNumber) // Output: "2a"
```

ä¸Šé¢çŸ¥é“è¿›åˆ¶è½¬åŒ–ï¼Œé‚£é¢œè‰²è½¬åŒ–æ˜¯ä¸æ˜¯å°±æ¸…æ™°äº†

- rgb æ ¼å¼ï¼šrgb(255, 121, 245)
- 16 è¿›åˆ¶ï¼š00ff00

```js
function rgbToHex(r, g, b) {
  // æœ€åçš„å­—ç¬¦ä¸² 00ff00 é«˜ä½åœ¨æœ€å·¦ä¾§
  // ç„¶åæ¯ä¸ªrgbï¼Œå…¶å®éƒ½æ˜¯ 2 çš„ 8æ¬¡æ–¹ä»¥å†…ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå­—èŠ‚ 8 ä½ï¼Œç„¶åæŠŠrgbå¹³é“ºåˆ°äºŒè¿›åˆ¶ä½ä¸Šï¼Œç„¶åå¾—å‡ºä¸€ä¸ªæ€»çš„äºŒè¿›åˆ¶æ•°ï¼Œç„¶åå†è½¬æˆ 16è¿›åˆ¶
  let rgbStr = ((r << 16) | (g << 8) | b).toString(16)
  // console.log('rgbStr', rgbStr)
  // (15).toString(16)  // 'f'

  // return '0x' + rgbStr.padStart(6, 0)
  return '0x' + `000000${rgbStr}`.slice(-6) // ä»å€’æ•°ç¬¬6ä¸ªå¼€å§‹æˆªå–
}
```

### æ•°ç»„å¸¸è§æ–¹æ³•

```js
// æ‹å¹³ï¼Œè½¬æ•°å­—ï¼Œå»é‡ï¼Œæ’åº
var arr = [1, 3, [3, 4, [3, 4]]]
const res = arr
  .toString()
  .split(',')
  .map((item) => +item)
  .filter((item, idx, arr) => idx === arr.indexOf(item))
  .sort((a, b) => b - a)
console.log(res) // [4, 3, 1]

// æ‹å¹³æ•°ç»„
const nestedArray = [1, [2, [3, 4]]]
const flattenedArray = nestedArray.flat() // [1, 2, [3, 4]]  é»˜è®¤æ·±åº¦ä¸€
const flattenedArray = nestedArray.flat(Infinity) // å¤§äºåˆ™è‡ªåŠ¨æœ€æ·±

//
const numbers = [1, 2, 3, 4, 5, [1, 3]]

const flattenV1 = (arr) => {
  return arr.reduce((res, ele) => {
    return res.concat(Array.isArray(ele) ? flattenV1(ele) : ele)
  }, [])
}
console.log(flattenV1(numbers))

//
const flatArray = (arr, res = []) => {
  arr.forEach((item) => {
    if (Array.isArray(item)) {
      // æ³¨æ„è¿™é‡Œï¼Œæ˜¯å°†resä¼ å…¥
      flatArray(item, res)
    } else {
      res.push(item)
    }
  })
  return res
}
```

### åŠ¨æ€è§„åˆ’

#### æ–æ³¢é‚£å¥‘æ•°åˆ—

```js
var fib = function (n) {
  // åŠ¨æ€è§„åˆ’
  // 1ã€å®šä¹‰dpï¼šdp[i]è¡¨ç¤ºç¬¬ié¡¹çš„æ–æ³¢é‚£å¥‘æ•°
  // 2ã€å®šä¹‰å…¬å¼ï¼šdp[i] = dp[i-1] + dp[i-2]
  // 3ã€ç¡®å®šéå†é¡ºåºï¼šä»å°åˆ°å¤§
  // 4ã€åˆå§‹åŒ–ï¼šdp = [0, 1]
  // 5ã€æ¨å¯¼

  const dp = [0, 1]
  for (let i = 2; i <= n; i++) {
    dp[i] = dp[i - 1] + dp[i - 2]
  }
  return dp[n]
}
```

#### çˆ¬æ¥¼å™¨

çˆ¬åˆ°ç¬¬ä¸€å±‚æ¥¼æ¢¯æœ‰ä¸€ç§æ–¹æ³•ï¼Œçˆ¬åˆ°äºŒå±‚æ¥¼æ¢¯æœ‰ä¸¤ç§æ–¹æ³•ã€‚

é‚£ä¹ˆç¬¬ä¸€å±‚æ¥¼æ¢¯å†è·¨ä¸¤æ­¥å°±åˆ°ç¬¬ä¸‰å±‚ ï¼Œç¬¬äºŒå±‚æ¥¼æ¢¯å†è·¨ä¸€æ­¥å°±åˆ°ç¬¬ä¸‰å±‚ã€‚

æ‰€ä»¥åˆ°ç¬¬ä¸‰å±‚æ¥¼æ¢¯çš„çŠ¶æ€å¯ä»¥ç”±ç¬¬äºŒå±‚æ¥¼æ¢¯ å’Œ åˆ°ç¬¬ä¸€å±‚æ¥¼æ¢¯çŠ¶æ€æ¨å¯¼å‡ºæ¥ï¼Œé‚£ä¹ˆå°±å¯ä»¥æƒ³åˆ°åŠ¨æ€è§„åˆ’äº†ã€‚

```js
var climbStairs = function (n) {
  // dp[i] ä¸ºç¬¬ i é˜¶æ¥¼æ¢¯æœ‰å¤šå°‘ç§æ–¹æ³•çˆ¬åˆ°æ¥¼é¡¶
  // dp[i] = dp[i - 1] + dp[i - 2]
  let dp = [1, 2]
  for (let i = 2; i < n; i++) {
    dp[i] = dp[i - 1] + dp[i - 2]
  }
  return dp[n - 1]
}
```

### è´ªå¿ƒ

#### è·³è·ƒæ¸¸æˆ

å…¶å®è·³å‡ æ­¥æ— æ‰€è°“ï¼Œå…³é”®åœ¨äºå¯è·³çš„è¦†ç›–èŒƒå›´ï¼Œæ˜¯å¦èƒ½è¾¾åˆ°ç»ˆç‚¹ã€‚

è´ªå¿ƒç®—æ³•å±€éƒ¨æœ€ä¼˜è§£ï¼šæ¯æ¬¡å–æœ€å¤§è·³è·ƒæ­¥æ•°ï¼ˆå–æœ€å¤§è¦†ç›–èŒƒå›´ï¼‰ï¼Œæ•´ä½“æœ€ä¼˜è§£ï¼šæœ€åå¾—åˆ°æ•´ä½“æœ€å¤§è¦†ç›–èŒƒå›´ï¼Œçœ‹æ˜¯å¦èƒ½åˆ°ç»ˆç‚¹ã€‚

å±€éƒ¨æœ€ä¼˜æ¨å‡ºå…¨å±€æœ€ä¼˜ï¼Œæ‰¾ä¸å‡ºåä¾‹ï¼Œè¯•è¯•è´ªå¿ƒï¼

å› æ­¤æ¯æ¬¡ç§»åŠ¨éƒ½æ›´æ–°æœ€å¤§è¦†ç›–èŒƒå›´å³å¯ã€‚

```js
var canJump = function (nums) {
  // æ›´æ–°æœ€å¤§è·³è·ƒèŒƒå›´å³å¯
  let cover = 0 // å®šä¹‰å¯è¦†ç›–èŒƒå›´
  // ä¸‹é¢å¾ªç¯çš„å˜é‡ä¸å¯¹ï¼Œåº”è¯¥æ˜¯coverçš„é•¿åº¦ï¼Œå› ä¸ºåªæœ‰coverä½ æ‰å¯ä»¥åˆ°è¾¾
  // for (let i = 0; i <= nums.length; i++) {
  for (let i = 0; i <= cover; i++) {
    cover = Math.max(i + nums[i], cover)
    if (cover >= nums.length - 1) {
      return true
    }
  }
  return false
}
```

### å›æº¯

- for å¾ªç¯ï¼Œç›¸å½“äºæ¨ªå‘é€‰æ‹©ï¼Œé€‰æ‹©åŒä¸€å±‚çš„å…ƒç´ 
  - æ¯æ¬¡ä»é›†åˆä¸­é€‰å–å…ƒç´ ï¼Œå¯é€‰æ‹©çš„èŒƒå›´éšç€é€‰æ‹©çš„è¿›è¡Œè€Œæ”¶ç¼©ï¼Œè°ƒæ•´å¯é€‰æ‹©çš„èŒƒå›´ã€‚
  - è€Œå¦‚ä½•é€šè¿‡æ ‡è¯†ç¼©å°èŒƒå›´å†…ï¼Œå°±æ˜¯é€šè¿‡ ç´¢å¼• index
- è€Œå›æº¯å°±æ˜¯çºµå‘é€‰æ‹©ï¼ŒäºŒè€…ç»“åˆåï¼Œå°±å¯ä»¥éå†æ•´ä¸ªæ ‘
- å›æº¯æ³•å°±æ˜¯è§£å†³è¿™ç§ k å±‚ for å¾ªç¯åµŒå¥—çš„é—®é¢˜ã€‚

```js
for (int i = startIndex; i <= n; i++) { // æ§åˆ¶æ ‘çš„æ¨ªå‘éå†
    path.push_back(i);         // å¤„ç†èŠ‚ç‚¹
    backtracking(n, k, i + 1); // é€’å½’ï¼šæ§åˆ¶æ ‘çš„çºµå‘éå†ï¼Œæ³¨æ„ä¸‹ä¸€å±‚æœç´¢è¦ä»i+1å¼€å§‹ï¼Œä¹Ÿå°±ç¼©å°äº†èŒƒå›´
    path.pop_back();           // å›æº¯ï¼Œæ’¤é”€å¤„ç†çš„èŠ‚ç‚¹
}
```

## 20231121 å‘¨äºŒ

### äºŒå‰æ ‘

#### äºŒå‰æ ‘çš„æ‰€æœ‰è·¯å¾„

```js
function binaryTreePaths(root) {
  if (!root) return []
  const res = [],
    stack = [root],
    paths = ['']

  while (stack.length) {
    // èŠ‚ç‚¹å’Œpathæ˜¯æˆå¯¹å­˜åœ¨
    const node = stack.pop() // ä»æ ˆé¡¶å¼¹å‡º
    const path = paths.pop() // å§‹ç»ˆåªæœ‰åŒæ—¶å¼¹å‡ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œå› æ­¤è·¯å¾„ä¸ä¹‹åŒ¹é…

    // å¦‚æœå·¦å³å­èŠ‚ç‚¹éƒ½æ²¡æœ‰ï¼Œåˆ™è¿”å›
    if (!node.left && !node.right) {
      path += node.val // æœ€åä¸€ä¸ªä¸éœ€è¦æ‹¼æ¥ -> äº†
      paths.push(path)
      continue // ç»§ç»­ä¸‹ä¸€ä¸ª
    }

    // å¦‚æœæœ‰å·¦å³èŠ‚ç‚¹ï¼Œåˆ™å‹å…¥ï¼Œè¿™é‡Œä¸åŒºåˆ†é¡ºåº
    if (node.left) {
      stack.push(node.left)
      paths.push(path)
    }
    if (node.right) {
      stack.push(node.right)
      paths.push(path)
    }
  }
  return res
}
```

### hash è¡¨

#### æ±‚ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†

```js
var intersection = function (nums1, nums2) {
  let map = {}
  const res = []

  nums1.forEach((num) => {
    map[num] = true
  })

  nums2.forEach((num) => {
    if (map[num]) {
      res.push(num)
    }
  })

  return res.filter((item, idx) => idx === res.indexOf(item))
}
```

#### ä¸‰æ•°ä¹‹å’Œ

```js
var threeSum = function (nums) {
  const res = []
  nums.sort((a, b) => a - b)
  let len = nums.length

  for (let i = 0; i < len; i++) {
    let left = i + 1
    let right = len - 1

    // å»é‡ç¬¬ä¸€ä¸ª
    if (i > 0 && nums[i] === nums[i - 1]) continue

    // å¼€å§‹éå†å·¦å³æŒ‡é’ˆ
    while (left < right) {
      const sum = nums[i] + nums[left] + nums[right]

      if (sum === 0) {
        res.push([nums[i], nums[left], nums[right]])

        // åªæœ‰å’Œç­‰äº0äº†ï¼Œè¯´æ˜æ‰å¼€å§‹æ‰§è¡Œä¸‹é¢çš„
        while (left < right && nums[left] === nums[left + 1]) left++
        while (left < right && nums[right] === nums[right - 1]) right--

        left++
        right--
      } else if (sum > 0) {
        right--
      } else {
        left++
      }
    }
  }

  return res
}
```

## 20231119 å‘¨æ—¥

### å›æº¯

#### ç»„åˆæ€»æ•°

> ç»™ä½ ä¸€ä¸ª æ— é‡å¤å…ƒç´  çš„æ•´æ•°æ•°ç»„ candidates å’Œä¸€ä¸ªç›®æ ‡æ•´æ•° target ï¼Œæ‰¾å‡º candidates ä¸­å¯ä»¥ä½¿æ•°å­—å’Œä¸ºç›®æ ‡æ•° target çš„ æ‰€æœ‰ ä¸åŒç»„åˆ ï¼Œå¹¶ä»¥åˆ—è¡¨å½¢å¼è¿”å›ã€‚ä½ å¯ä»¥æŒ‰ ä»»æ„é¡ºåº è¿”å›è¿™äº›ç»„åˆã€‚

```js
var combinationSum = function (candidates, target) {
  // ç»„åˆé—®é¢˜ï¼Œä¹Ÿæ˜¯ä½¿ç”¨å›æº¯ï¼Œè€Œå›æº¯å°±æ˜¯å›æ¥æ›¿æ¢å¤šå±‚å¾ªç¯

  function backtrack(path, sum, start) {
    // æ»¡è¶³æ¡ä»¶ï¼Œè¿™é‡Œæ³¨æ„ï¼Œçœ‹ä¹‹å‰é”™è¯¯çš„æäº¤è®°å½•
    // if (sum === target) { è¿™æ ·ä¸è¡Œï¼Œå› ä¸ºå¤§äºçš„ä¹Ÿéœ€è¦è¿”å›
    if (sum >= target) {
      sum === target && res.push(path.slice())
      return
    }

    // ç›®å‰ç®—æ³•å¯ä»¥ç»Ÿè®¡å‡ºå…¨éƒ¨çš„ï¼Œä½†æ˜¯æœ‰é‡å¤çš„ [[2,2,3],[2,3,2],[3,2,2],[7]]
    // å¦‚ä½•å»é‡å‘¢ï¼Ÿå»é‡çš„è¯ï¼Œè¿˜æ˜¯éœ€è¦ä¸ªstartç´¢å¼•ã€‚ã€‚ã€‚
    // forå¾ªç¯ï¼Œæ¯ä¸ªå¾ªç¯éƒ½æ˜¯ä»0å¼€å§‹ï¼Œå› ä¸ºå¯ä»¥é‡å¤ï¼Œè¿™é‡Œçš„é‡å¤ä¸æ˜¯åœ¨è¿™é‡Œé…ç½®ï¼Œè€Œæ˜¯backtrackçš„å…¥å‚3æ˜¯iï¼Œä»è€Œå®ç°çš„é‡å¤ï¼Œå¦‚æœæ˜¯i+1ï¼Œåˆ™å°±æ˜¯ä¸é‡å¤çš„
    // è¿™å…¶å®ä¾ç„¶æ˜¯ä¸€ä¸ªé›†åˆï¼Œç„¶åç»„åˆé—®é¢˜ï¼Œæ­¤æ—¶å°±éœ€è¦ä½¿ç”¨startç´¢å¼•ï¼Œå¦‚æœæ˜¯å¤šä¸ªé›†åˆï¼Œæ¯”å¦‚æ‹¨å·é”®ç»„åˆï¼Œå°±ä¸éœ€è¦ç´¢å¼•
    for (let i = start; i < candidates.length; i++) {
      // å¦‚æœå·²ç»å¤§äºtargetå°±ä¸å†å‹å…¥äº†
      if (sum > target) break
      path.push(candidates[i])
      sum += candidates[i]
      backtrack(path, sum, i)
      sum -= candidates[i]
      path.pop()
    }
  }

  const res = []
  backtrack([], 0, 0)
  return res
}
```

#### å…¨æ’åˆ—

```js
var permute = function (nums) {
  const res = []
  const used = new Set() // éœ€è¦å°†è¿™ä¸ªusedæ”¾åœ¨æœ€å¤–å±‚ï¼Œè€Œä¸æ˜¯å†…éƒ¨
  backtrack([])
  return res

  function backtrack(path) {
    if (path.length === nums.length) {
      res.push(path.slice())
      return
    }

    // æ”¾åœ¨å†…éƒ¨ï¼Œåªèƒ½å»é™¤åŒå±‚ä¸Šçš„é‡å¤ï¼Œä½†æ˜¯æ— æ³•å»é™¤åŒä¸€ä¸ªæ ‘æä¸Šçš„æ•°æ®
    // const used = new Set() // éœ€è¦å°†è¿™ä¸ªusedæ”¾åœ¨æœ€å¤–å±‚ï¼Œè€Œä¸æ˜¯å†…éƒ¨
    // æ¯ä¸€æ¬¡éƒ½æ˜¯ä»0å¼€å§‹éå†
    for (let i = 0; i < nums.length; i++) {
      if (used.has(nums[i])) continue

      used.add(nums[i])
      path.push(nums[i])
      backtrack(path.slice())
      path.pop()
      used.delete(nums[i])
    }
  }
}
```

### äºŒå‰æ ‘

#### æœ€å¤§å®½åº¦

- åˆ©ç”¨ç´¢å¼•
- å±‚åºéå†ï¼Œç´¢å¼•

```js
function widthOfBinaryTree(root) {
  if (root === null) {
    return 0
  }

  let maxWidth = 0
  const queue = [{ node: root, index: 0 }]

  while (queue.length > 0) {
    const levelSize = queue.length
    let leftmostIndex = queue[0].index
    const currentWidth = queue[queue.length - 1].index - leftmostIndex + 1
    maxWidth = Math.max(maxWidth, currentWidth)

    for (let i = 0; i < levelSize; i++) {
      const { node, index } = queue.shift()

      if (node.left) {
        queue.push({ node: node.left, index: 2 * index })
      }

      if (node.right) {
        queue.push({ node: node.right, index: 2 * index + 1 })
      }
    }
  }

  return maxWidth
}
```

#### æœ€å°æ·±åº¦

```js
var minDepth = function (root) {
  // æœ€å°æ·±åº¦
  if (!root) return 0
  const queue = [root]

  let minHeight = 0

  while (queue.length) {
    const len = queue.length
    minHeight++

    for (let i = 0; i < len; i++) {
      const node = queue.shift()
      // å±‚åºéå†ï¼Œé˜Ÿåˆ—ï¼Œå¦‚æœå·¦å³èŠ‚ç‚¹éƒ½æ²¡æœ‰å€¼ï¼Œåˆ™å°±æ˜¯æœ€å°
      if (!node.left && !node.right) {
        return minHeight
      }
      node.left && queue.push(node.left)
      node.right && queue.push(node.right)
    }
  }
  return minHeight
}
```

#### æœ€å¤§æ·±åº¦

```js
var maxDepth = function (root) {
  if (!root) return 0
  const queue = [root]

  let height = 0
  while (queue.length) {
    const len = queue.length
    height++

    // è¿™é‡Œé¢çš„å¾ªç¯æœ‰å¿…è¦ï¼Œå› ä¸ºlenæ˜¯ä¹‹å‰è®°å½•çš„ä¸€å±‚çš„é•¿åº¦ï¼Œæ˜¯ä¸å˜çš„
    for (let i = 0; i < len; i++) {
      const node = queue.shift()
      node.left && queue.push(node.left)
      node.right && queue.push(node.right)
    }
  }
  return height
}
```

#### ç¿»è½¬äºŒå‰æ ‘

```js
var invertTree = function (root) {
  if (!root) return root
  const queue = [root]

  while (queue.length) {
    const node = queue.shift()
    // å·¦å³å­èŠ‚ç‚¹äº¤æ¢å³å¯ï¼Œç„¶åç»§ç»­æ’å…¥å­—èŠ‚ç‚¹
    ;[node.left, node.right] = [node.right, node.left]

    node.left && queue.push(node.left)
    node.right && queue.push(node.right)
  }
  return root
}
```

#### å±‚åºéå†

```js
var levelOrder = function (root) {
  const res = []
  const queue = []

  root && queue.push(root)

  while (queue.length) {
    const len = queue.length // å½“å‰å±‚çš„æ•°é‡
    const curLevel = []

    // éå†
    for (let i = 0; i < len; i++) {
      const node = queue.shift() // å¼¹å‡ºé˜Ÿåˆ—æœ€å‰é¢çš„
      curLevel.push(node.val)
      // å°†å½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ”¾åœ¨é˜Ÿåˆ—é‡Œ
      node.left && queue.push(node.left)
      node.right && queue.push(node.right)
    }
    // ä¸€ä¸ªforå¾ªç¯ç»“æŸï¼Œè¡¨ç¤ºä¸€å±‚å·²ç»éå†å®Œï¼Œéœ€è¦ä¸€å±‚ä¸€å±‚çš„è¿”å›
    res.push(curLevel)
  }

  return res
}
```

#### ä¸­åºéå†

```js
var inorderTraversal = (root) => {
  const res = [] // ç»“æœ
  const stack = [] // äºŒå‰æ ‘éå†ï¼Œåˆ©ç”¨æ·±åº¦ä¼˜å…ˆ

  root && stack.push(root) // stack = [root] ä¹Ÿè¡Œï¼Œå°±æ˜¯éœ€è¦letå£°æ˜

  while (stack.length) {
    // 1/å…¶å®å°±æ˜¯ä½¿ç”¨æ ˆæ¥éå†æ•´ä¸ªäºŒå‰æ ‘
    const node = stack.pop()

    // 3ã€å¼€å§‹å¤„ç†ä¹‹å‰æ”¾åœ¨é‡Œé¢çš„æ•°æ®
    // å…¶å®æ­¤æ—¶
    // console.log(stack)
    if (!node) {
      res.push(stack.pop().val)
      continue
    }

    // 2ã€å°†éå†çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½æ”¾åœ¨æ ˆé‡Œ
    // ä¸­åºï¼šå·¦ä¸­å³ -ã€‹å³ä¸­å·¦
    node.right && stack.push(node.right)
    stack.push(node)
    stack.push(null)
    node.left && stack.push(node.left)
  }

  return res
}
```

### hash è¡¨

#### ä¸‰æ•°ä¹‹å’Œ

```js
var threeSum = function (nums) {
  nums.sort((a, b) => a - b)

  // è¿™é‡Œä¹Ÿå¯ä»¥è¿”å›ï¼Œæ’åºåï¼Œå¦‚æœç¬¬ä¸€ä¸ªéƒ½å¤§äº0ï¼Œåˆ™ç›´æ¥è¿”å›ï¼Œä¸èƒ½ç›´æ¥ nums[0] å› ä¸ºæœ‰å¯èƒ½æœ‰è´Ÿå€¼
  if (nums[0] > 0) return []

  const len = nums.length
  const res = []

  for (let i = 0; i < len; i++) {
    let left = i + 1
    let right = len - 1

    // å¦‚æœä¸å¯¹ç¬¬ä¸€ä¸ªæ•°å»é‡ï¼Œåˆ™ä¼šå‡ºç°  [[-1,-1,2],[-1,0,1],[-1,0,1]] æƒ…å†µ
    if (nums[i] === nums[i - 1]) continue

    // ä¸€ä¸ªiï¼Œå°±éœ€è¦å¯¹åº”ä¸€æ¬¡ leftï¼Œrightçš„å¾ªç¯
    while (left < right) {
      const sum = nums[i] + nums[left] + nums[right]

      if (sum == 0) {
        res.push([nums[i], nums[left], nums[right]])

        // å»é‡ï¼Œä¸ä¸‹é¢bä½ç½®æ— å…³ï¼Œleft++åªæ˜¯èµ°åˆ°äº†ä¸‹ä¸€ä¸ªé‡å¤çš„ä½ç½®è€Œå·²
        // è¦ä¸åœçš„å»é‡ï¼Œè€Œä¸æ˜¯åªå»é‡ä¸€æ¬¡ï¼Œä¸èƒ½ä½¿ç”¨ifï¼Œè€Œåº”è¯¥ä½¿ç”¨while
        while (left < right && nums[left] === nums[left + 1]) left++
        while (left < right && nums[right] === nums[right - 1]) right--

        // bï¼šå½“å‰æ‰¾åˆ°ä¸€ä¸ªäº†ï¼Œé‚£å°±å¾—ç»§ç»­å¾€ä¸‹èµ°
        left++
        right--
      } else if (sum > 0) {
        right--
      } else {
        left++
      }
    }
  }

  return res
}
```

### é“¾è¡¨

#### åˆå¹¶é“¾è¡¨

```js
var mergeTwoLists = function (list1, list2) {
  let res = new ListNode(-1)
  let p = res // pæŒ‡é’ˆæ˜¯ç§»åŠ¨çš„ï¼Œ
  let p1 = list1
  let p2 = list2

  // å¦‚æœä¸¤ä¸ªæŒ‡é’ˆéƒ½æœ‰å€¼ï¼Œåˆ™å¯¹æ¯”
  while (p1 && p2) {
    if (p1.val > p2.val) {
      // å°†å°å€¼èµ‹å€¼ï¼ŒåŒæ—¶å‘ä¸‹ç§»åŠ¨æŒ‡é’ˆ
      // æ³¨æ„èµ‹å€¼çš„æ˜¯ä¸‹ä¸€ä¸ª
      // p = p2
      p.next = p2
      p2 = p2.next
    } else {
      p.next = p1
      p1 = p1.next
    }
    // æœ€åç§»åŠ¨pæŒ‡é’ˆ
    p = p.next
  }

  // ä¸Šé¢å¾ªç¯å®Œä»¥åï¼Œå°†å‰©ä½™çš„é“¾è¡¨ç»§ç»­æŒ‚ä¸Šå»ï¼ŒæŒ‚ä¸Šå»ä½¿ç”¨çš„p.nextï¼Œè€Œä¸æ˜¯p = p1
  // å› ä¸º p = p1 ç›¸å½“äºæŒ‡é’ˆç§»åŠ¨åˆ°p1
  p1 && (p.next = p1)
  p2 && (p.next = p2)

  // æ­¤æ—¶pä½äºæ–°å»ºé“¾è¡¨çš„ä¸­é—´æŸä¸ªä½ç½®ï¼Œéœ€è¦è¿”å›res.nextï¼Œä»¥ä¸ºå†…
  return res.next
}
```

#### é“¾è¡¨æ±‚å’Œ

```js
var addTwoNumbers = function (l1, l2) {
  // å› ä¸ºä¸¤ä¸ªé“¾è¡¨çš„å¤´ç»“ç‚¹éƒ½æ˜¯æœ€å°å€¼å¼€å§‹ï¼Œå› æ­¤å¯ä»¥ç›´æ¥éå†ç´¯åŠ 
  // å› ä¸ºéå†ä¸¤ä¸ªé“¾è¡¨åï¼Œè¿˜éœ€è¦ç”Ÿæˆä¸€ä¸ªæ–°çš„é“¾è¡¨ï¼Œå› æ­¤éœ€è¦é’ˆå¯¹æ–°é“¾è¡¨å®šä¹‰headã€tailå°¾
  let head = null
  let tail = null
  let carry = 0 // è¿›ä½

  while (l1 || l2) {
    // å–ä¸¤ä¸ªé“¾è¡¨çš„å€¼
    const n1 = l1 ? l1.val : 0
    const n2 = l2 ? l2.val : 0
    const sum = n1 + n2 + carry

    if (!head) {
      // å¦‚æœæ²¡æœ‰å¤´ç»“ç‚¹ï¼Œåˆ™éœ€è¦æ–°å»ºèŠ‚ç‚¹
      head = new ListNode(sum % 10)
      tail = head
    } else {
      // æ­¤æ—¶å·²ç»æœ‰é“¾è¡¨äº†ï¼Œåˆ™éœ€è¦è¿½åŠ ï¼Œæ¯è¿½åŠ ä¸€ä¸ªï¼Œéƒ½éœ€è¦æ–°å»ºèŠ‚ç‚¹
      tail.next = new ListNode(sum % 10)
      // ç§»åŠ¨tailæŒ‡é’ˆ
      tail = tail.next
    }
    carry = Math.floor(sum / 10)

    // ç§»åŠ¨ä¸¤ä¸ªé“¾è¡¨çš„æŒ‡é’ˆ
    l1 && (l1 = l1.next)
    l2 && (l2 = l2.next)
  }
  // å¾ªç¯ç»“æŸï¼Œå†åˆ¤æ–­è¿›ä½å³å¯
  carry && (tail.next = new ListNode(carry))

  return head
}
```

#### ç¯å½¢é“¾è¡¨ II

```js
var detectCycle = function (head) {
  const hasCircle = (head) => {
    let fast = (slow = head)

    while (fast && fast.next) {
      fast = fast.next.next
      slow = slow.next
      if (fast === slow) {
        mixed = slow
        return true
      }
    }
    return false
  }

  let mixed = null
  let start = head

  if (!hasCircle(head)) {
    return null
  } else {
    // å¦‚æœäºŒè€…ä¸ç­‰ï¼Œåˆ™ä¸€ç›´å¾ªç¯
    while (mixed !== start) {
      start = start.next
      mixed = mixed.next
    }
    return mixed
  }
}
```

#### åˆ é™¤é“¾è¡¨ä¸­å€’æ•°ç¬¬ n ä¸ªèŠ‚ç‚¹

```js
var removeNthFromEnd = function (head, n) {
  let newHead = new ListNode(0, head)

  // è™šæ‹Ÿå¤´èŠ‚ç‚¹
  let fast = newHead
  let slow = newHead

  // å¿«æŒ‡é’ˆå…ˆèµ°næ­¥ï¼Œè¿™é‡Œéœ€è¦ç­‰äºn
  for (let i = 0; i <= n; i++) {
    fast = fast.next
  }

  // ç„¶åå¿«æ…¢æŒ‡é’ˆä¸€å—èµ°
  while (fast) {
    fast = fast.next
    slow = slow.next
  }

  slow.next = slow.next.next

  return newHead.next
}
```

#### ç¿»è½¬é“¾è¡¨

```js
var reverseList = function (head) {
  let prev = null
  let cur = head
  // 1 -> 2 -> 3
  while (cur) {
    // æ¯”å¦‚ curä¸º1ï¼Œ åˆ™æš‚å­˜ 2
    const temp = cur.next
    cur.next = prev // ä¸Šé¢éƒ½å­˜èµ·æ¥äº†ï¼Œæ‰€ä»¥è¿™é‡Œç›´æ¥æ“ä½œ

    // ç»§ç»­ç§»åŠ¨prev
    // æƒ³è±¡ä¸‹ï¼šprev cur next ä¸‰è€…çš„å…³ç³»ï¼Œå› æ­¤å¦‚æœæƒ³ç»§ç»­è¿›è¡Œï¼Œåˆ™éœ€è¦å·¦ç§»
    prev = cur
    cur = temp
  }
  return prev
}
```

#### ç§»é™¤é“¾è¡¨ä¸­ç­‰äºæŸä¸ªå€¼çš„èŠ‚ç‚¹

```js
var removeElements = function (head, val) {
  // å¤´ç»“ç‚¹ä¹Ÿå¯èƒ½ç­‰äº valï¼Œå› æ­¤éœ€è¦ç»Ÿä¸€æ‰‹æ³•ï¼Œå› ä¸ºåˆ é™¤å¤´ç»“ç‚¹çš„æ“ä½œä¸æ–¹ä¾¿
  let virtual = new ListNode(0, head)

  let temp = virtual // æ¸¸èµ°æŒ‡é’ˆ

  while (temp.next) {
    if (temp.next.val === val) {
      temp.next = temp.next.next
    } else {
      temp = temp.next
    }
  }
  return virtual.next
}
```

### æ•°ç»„

#### [27]ç§»é™¤å…ƒç´ 

> ç»™ä½ ä¸€ä¸ªæ•°ç»„ nums å’Œä¸€ä¸ªå€¼ valï¼Œä½ éœ€è¦ åŸåœ° ç§»é™¤æ‰€æœ‰æ•°å€¼ç­‰äº val çš„å…ƒç´ ï¼Œå¹¶è¿”å›ç§»é™¤åæ•°ç»„çš„æ–°é•¿åº¦ã€‚

```js
var removeElement = function (nums, val) {
  // åˆ©ç”¨ä¸¤ä¸ªæŒ‡é’ˆ
  // ä¸€ä¸ªæŒ‡é’ˆå­˜å‚¨æœ‰æ•ˆçš„å€¼ï¼Œä¸€ä¸ªæŒ‡é’ˆåœ¨å‰é¢èµ°
  let left = 0
  for (let i = 0; i < nums.length; i++) {
    if (nums[i] !== val) {
      nums[left++] = nums[i]
    }
  }
  // å› ä¸ºåªè¦æ±‚æ–°é•¿åº¦ï¼Œleftå°±æ˜¯ï¼Œå…¶å®åé¢è¿˜æœ‰å†—ä½™çš„
  return left
}
```

#### [35]æ’å…¥ä½ç½®

```js
var searchInsert = function (nums, target) {
  let left = 0
  let right = nums.length - 1

  while (left <= right) {
    const mid = parseInt((left + right) / 2)
    // æ¯”æŸ¥æ‰¾æŸä¸ªæ•°å­—åœ¨æ•°ç»„çš„ä½ç½®ï¼Œè¦å¤šä¸€äº›é€»è¾‘
    if (nums[mid] === target) {
      return mid
    } else if (nums[mid] > target) {
      // å½“å¤§äºç›®æ ‡å€¼æ—¶ï¼Œç†è®ºä¸Šright - 1ï¼Œä½†æ­¤æ—¶è¦æ‰¾æ’å…¥çš„ä½ç½®ï¼Œå› æ­¤å°±æ˜¯mid
      right = mid - 1
    } else {
      // æ­¤æ—¶targetå¤§äºä¸­ä½æ•°çš„å€¼ï¼Œå·¦ä¾§ä¸€åŠéƒ½æ²¡æœ‰ç”¨
      left = mid + 1
    }
  }
  // å¦‚æœä¸åœ¨æ•°ç»„ä¸­ï¼Œåˆ™å¦‚æ­¤ï¼šnums[pos-1]<target<num[pos]
  // ä¹Ÿå°±æ˜¯ right + 1
  return right + 1
}
```

#### [704]äºŒåˆ†æŸ¥æ‰¾

> ç»™å®šä¸€ä¸ª n ä¸ªå…ƒç´ æœ‰åºçš„ï¼ˆå‡åºï¼‰æ•´å‹æ•°ç»„ nums å’Œä¸€ä¸ªç›®æ ‡å€¼ target ï¼Œå†™ä¸€ä¸ªå‡½æ•°æœç´¢ nums ä¸­çš„ targetï¼Œå¦‚æœç›®æ ‡å€¼å­˜åœ¨è¿”å›ä¸‹æ ‡ï¼Œå¦åˆ™è¿”å› -1ã€‚

```js
var search = function (nums, target) {
  let left = 0
  let right = nums.length - 1

  // è¿™é‡Œéœ€è¦ å°äºç­‰äº
  while (left <= right) {
    const mid = parseInt((left + right) / 2)

    if (nums[mid] === target) {
      return mid
    } else if (nums[mid] > target) {
      right = mid - 1
    } else {
      left = mid + 1
    }
  }
  return -1
}
```

#### ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº

```js
var maxProfit = function (prices) {
  // å‡å¦‚ç¬¬ 0 å¤©ä¹°å…¥ï¼Œç¬¬ 3 å¤©å–å‡ºï¼Œé‚£ä¹ˆåˆ©æ¶¦ä¸ºï¼šprices[3] - prices[0]ã€‚

  // ç›¸å½“äº(prices[3] - prices[2]) + (prices[2] - prices[1]) + (prices[1] - prices[0])ã€‚

  // æ­¤æ—¶å°±æ˜¯æŠŠåˆ©æ¶¦åˆ†è§£ä¸ºæ¯å¤©ä¸ºå•ä½çš„ç»´åº¦ï¼Œè€Œä¸æ˜¯ä» 0 å¤©åˆ°ç¬¬ 3 å¤©æ•´ä½“å»è€ƒè™‘ï¼

  // é‚£ä¹ˆæ ¹æ® prices å¯ä»¥å¾—åˆ°æ¯å¤©çš„åˆ©æ¶¦åºåˆ—ï¼š(prices[i] - prices[i - 1]).....(prices[1] - prices[0])ã€‚

  // å› æ­¤ï¼Œåªéœ€è¦ç»Ÿè®¡æ­£æ•°å³å¯
  let res = 0

  for (let i = 1; i < prices.length; i++) {
    const val = prices[i] - prices[i - 1]
    if (val > 0) {
      res += val
    }
  }
  return res
}
```

#### åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„

```js
var merge = function (nums1, m, nums2, n) {
  let len1 = m - 1 // ä¸¤ä¸ªæ•°ç»„æœ‰åºçš„æœ€åä¸€ä¸ªå€¼
  let len2 = n - 1
  let len = m + n - 1 // æœ€ç»ˆæ•°ç»„çš„é•¿åº¦

  // å…¶å®å°±æ˜¯ä¸¤ä¸ªæ•°ç»„æ¯”è¾ƒï¼Œç„¶åå°†æ¯”è¾ƒçš„æ–°å€¼æ”¾åœ¨æœ€å
  while (len1 >= 0 && len2 >= 0) {
    nums1[len--] = nums1[len1] > nums2[len2] ? nums1[len1--] : nums2[len2--]
  }
  // ä¸€éå¾ªç¯å®Œï¼Œè¦ä¹ˆå‰©ä½™ nums2æ²¡æ’å…¥è¿›å»ï¼Œæ­¤æ—¶må·²ç»éå†å®Œäº†ï¼Œä¹Ÿå°±æ˜¯ä¸€å®šåˆ°ç´¢å¼•0çš„ä½ç½®äº†ï¼Œå› æ­¤ä»0å¼€å§‹
  // è¦ä¹ˆå°±æ˜¯nums2æ’å…¥å®Œäº†ï¼Œæ‰§è¡Œä¸‹é¢çš„ä¹Ÿæ— æ‰€è°“
  nums1.splice(0, len2 + 1, ...nums2.slice(0, len2 + 1))
  return nums1
}
```

### å­—ç¬¦ä¸²

#### [344]ç¿»è½¬å­—ç¬¦ä¸²

```js
var reverseString = function (s) {
  let len = s.length

  let left = 0
  let right = len - 1

  while (left <= right) {
    ;[s[left], s[right]] = [s[right], s[left]]
    left++
    right--
  }
  return s
}
```

#### [1047]åˆ é™¤å­—ç¬¦ä¸²ä¸­ç›¸é‚»çš„å­—ç¬¦

```js
var removeDuplicates = function (s) {
  const stack = []
  for (const char of s) {
    // æ¯æ¬¡å¯¹æ¯”ä¸€ä¸ªï¼Œå¦‚æœç›¸åŒå°±å¼¹å‡ºï¼Œè¿™é‡Œä¸éœ€è¦whileå¾ªç¯
    if (stack[stack.length - 1] === char) {
      stack.pop()
    } else {
      stack.push(char)
    }
  }
  return stack.join('')
}
```

#### [3]æ— é‡å¤çš„æœ€é•¿å­ä¸²

```js
var lengthOfLongestSubstring = function (s) {
  let max = 0
  let str = ''

  for (let i = 0; i < s.length; i++) {
    const idx = str.indexOf(s[i])
    // å¦‚æœé‡å¤äº†ï¼Œå°±ä»ä¸‹ä¸€ä½å¼€å§‹æˆªå–
    // dvdy -ã€‹dv -> dv d idx ä¸º0ï¼Œéœ€è¦ä»vå¼€å§‹æˆªå–
    if (idx !== -1) {
      str = str.slice(idx + 1)
    }
    str += s[i]
    max = Math.max(str.length, max)
  }
  return max
}

// ç”¨æŒ‡é’ˆï¼Œç”¨æŒ‡é’ˆçš„è¯ï¼Œå°±å¯ä»¥é¿å…ä¸Šé¢iä¸€ç›´åœ¨æ‰§è¡Œçš„é—®é¢˜
var lengthOfLongestSubstring = function (s) {
  let right = 0
  let max = 0
  let str = ''

  // è¿™é‡Œè¿˜ä¸èƒ½ = s.lengthï¼Œå› ä¸ºç´¢å¼•å°±åˆ°length
  while (right < s.length) {
    if (str.indexOf(s[right]) === -1) {
      str += s[right]
      right++
      max = Math.max(max, str.length)
    } else {
      // åŒæ—¶å­—ç¬¦ä¸²ï¼Œè¿˜éœ€è¦å»æ‰ç¬¬ä¸€ä¸ªï¼Œå› ä¸ºå¿…å®šæ˜¯ç¬¬ä¸€ä¸ªå¼€å§‹ç›¸åŒ
      str = str.slice(1)
    }
  }
  return max
}
```

### å¸¸è§„ç®—æ³•

#### promiseLimit

```js
const promiseLimit = (ps, limit) => {
  // å¼‚æ­¥ç¼–ç¨‹ï¼Œè‚¯å®šéœ€è¦promise
  return new Promise((resolve, reject) => {
    let running = 0
    let idx = 0
    let results = []

    // runTask è¾…åŠ©å‡½æ•°ï¼šæ‰§è¡Œå…·ä½“çš„å¼‚æ­¥ä»»åŠ¡
    const runTask = (task) => {
      running++
      console.log('è¿è¡Œä¸­çš„æ•°é‡ï¼š', running)
      // taskæœ¬èº«æ˜¯promiseï¼Œæ‰€ä»¥ç›´æ¥then
      task()
        .then((res) => {
          // åˆ°è¿™é‡Œä¸€ä¸ªä»»åŠ¡å°±ç»“æŸäº†
          running--
          results.push(res)
          // ç„¶åå¼€å¯æ–°çš„ä»»åŠ¡
          walk()
        })
        .catch((err) => reject(err))
    }

    // ä¸»å‡½æ•°ï¼Œæ‰§è¡Œå…¥å£
    const walk = () => {
      // æ­£åœ¨è¿è¡Œçš„æ•°é‡å°äºlimitï¼Œåˆ™æŒç»­å‹å…¥
      while (running < limit && idx < ps.length) {
        runTask(ps[idx])
        idx++
      }
      // whileå¾ªç¯ç»“æŸåï¼Œå¦‚æœrunningä¸º0ï¼Œè¯´æ˜å·²ç»å…¨éƒ¨ç»“æŸ
      if (!running) resolve(results)
    }
    walk()
  })
}

const tasks = [
  () => new Promise((resolve) => setTimeout(() => resolve(1), 1000)),
  () => new Promise((resolve) => setTimeout(() => resolve(2), 2000)),
  () => new Promise((resolve) => setTimeout(() => resolve(3), 3000)),
  () => new Promise((resolve) => setTimeout(() => resolve(4), 4000)),
  () => new Promise((resolve) => setTimeout(() => resolve(5), 5000)),
  () => new Promise((resolve) => setTimeout(() => resolve(6), 6000)),
]

promiseLimit(tasks, 2)
  .then((results) => {
    console.log(results)
  })
  .catch((error) => {
    console.error(error)
  })
```

#### ç»§æ‰¿

##### 1ã€ åŸå‹é“¾ç»§æ‰¿

çˆ¶ç±»çš„å®ä¾‹ï¼Œä½œä¸ºå­ç±»çš„åŸå‹å¯¹è±¡

```js
function Parent() {
  this.name = 'parent'
}
Parent.prototype.sayHi = function () {
  console.log('hi')
}

function Child() {
  this.name = 'child'
  this.age = 12
}

Child.prototype = new Parent()

var child = new Child()

console.log(child.name, child.age) // parent 12
child.sayHi() // hi

child.name = 'child'
console.log(child.name) // child
console.log(new Parent().name) // child

// åŒ…å«å¼•ç”¨ç±»å‹å€¼çš„åŸå‹å±æ€§ä¼šè¢«æ‰€æœ‰å®ä¾‹å…±äº«
function SuperType() {
  this.colors = ['red', 'blue', 'green']
}

function SubType() {}

//inherit from SuperType
SubType.prototype = new SuperType()

var instance1 = new SubType()

instance1.colors.push('black')
console.log(instance1.colors) //"red,blue,green,black"

var instance2 = new SubType()
console.log(instance2.colors) //"red,blue,green,black"
```

ç‰¹ç‚¹ï¼š

- çˆ¶ç±»å¼•ç”¨ç±»å‹ï¼Œä¼šè¢«å­ç±»å®ä¾‹ç»§æ‰¿ï¼Œå®¹æ˜“é€ æˆä¿®æ”¹çš„ç›¸äº’å½±å“
- æ²¡åŠæ³•ä¼ å‚æ•°

##### 2ã€ å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿

```js
function Parent() {
  this.arr = [1, 2, 3]
}
function Child() {
  Parent.call(this)
}

var child1 = new Child()
child1.arr.push('4')
console.log(child1.arr) // [1,2,3,4]

var child2 = new Child()
console.log(child2.arr) // [1,2,3]
```

ä¸Šé¢çš„ä»£ç ï¼Œå¼•ç”¨ç±»å‹ï¼Œä¸ä¼šå†åœ¨æ‰€æœ‰å®ä¾‹é—´å…±äº«äº†

é‚£å‚æ•°å‘¢ï¼Ÿ

```js
function Parent(name = 'parent default') {
  this.name = name
}
function Child(name) {
  Parent.call(this, name)
  this.age = 18
}

var child1 = new Child()
console.log(child1.name) // parent default

var child2 = new Child('son')
console.log(child2.name) // son
```

##### 3ã€ç»„åˆç»§æ‰¿

å°†**åŸå‹é“¾ç»§æ‰¿å’Œå€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿**ï¼Œç»„åˆåˆ°ä¸€å—

```js
function Parent(name) {
  this.name = name
  this.arr = [1, 2, 3]
}
Parent.prototype.sayName = function () {
  console.log(this.name)
}

function Child(name, age) {
  Parent.call(this, name)
  this.age = age
}
Child.prototype = new Parent()
Child.prototype.sayAge = function () {
  console.log(this.age)
}

var c1 = new Child('c1', 20)
c1.arr.push(4)

console.log(c1.arr) // [1,2,3,4]
c1.sayAge() // 20
c1.sayName() // c1

var c2 = new Child('c2', 22)

console.log(c2.arr) // [1,2,3,4]
c2.sayAge() // 22
c2.sayName() // c2
```

##### 4ã€åŸå‹å¼ç»§æ‰¿

é€šè¿‡åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„ä¸­é—´å¯¹è±¡ï¼Œ å°†è¯¥å¯¹è±¡ä½œä¸ºæ–°åˆ›å»ºå¯¹è±¡çš„åŸå‹ï¼Œå®ç°ç»§æ‰¿

- å®šä¹‰ä¸€ä¸ªç©ºå‡½æ•° Fï¼Œè®¾ç½® F.prototype = objï¼Œç„¶åè¿”å› new F()

```js
function createObj(obj) {
  function F() {}
  // å’ŒåŸå‹é“¾å¼ç›¸æ¯”ï¼Œè¿™é‡Œç›´æ¥ä½¿ç”¨çš„objï¼Œè€Œä¸æ˜¯ æ–°å®ä¾‹
  F.prototype = obj
  return new F()
}
var person = {
  name: 'p1',
  friends: [1, 2, 3],
}
var p1 = createObj(person)
console.log(p1.name) // p1
p1.friends.push(4)
console.log(p1.friends) // [1,2,3,4]

var p2 = createObj(person)
console.log(p2.name) // p1
console.log(p2.friends) // [1,2,3,4]
```

##### 5ã€å¯„ç”Ÿå¼ç»§æ‰¿

å…¶å®å°±æ˜¯ä½¿ç”¨ Object.create åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åå†æ“ä½œå¯¹è±¡ï¼Œå¯ä»¥ç†è§£ä¸ºå¯„ç”Ÿåœ¨ Object.create é‡Œ

```js
function createObj(proto) {
  var obj = Object.create(proto)
  // ä¸ºå¯¹è±¡æ·»åŠ å‡½æ•°ï¼Œä¼šç”±äºä¸èƒ½åšåˆ°å‡½æ•°å¤ç”¨è€Œé™ä½æ•ˆç‡
  obj.greet = function () {
    console.log('hello')
  }
  return obj
}
var parent = {
  name: 'Parent',
  sayHello: function () {
    console.log('Hello')
  },
}

var child = createObj(parent)
console.log(child.name) // è¾“å‡ºï¼š'Parent'
```

##### 6ã€ç»„åˆå¼ç»§æ‰¿

ç»„åˆå¼æ˜¯ï¼šå€Ÿç”¨æ„é€ å‡½æ•°å¼ + å¯„ç”Ÿå¼

```js
function Parent(name) {
  this.name = name
}

Parent.prototype.sayHello = function () {
  console.log('Hello, I am ' + this.name)
}

function Child(name, age) {
  Parent.call(this, name)
  this.age = age
}

Child.prototype = Object.create(Parent.prototype)
Child.prototype.constructor = Child

Child.prototype.sayAge = function () {
  console.log('I am ' + this.age + ' years old')
}

var child = new Child('Alice', 10)
console.log(child.name) // è¾“å‡ºï¼š'Alice'
child.sayHello() // è¾“å‡ºï¼š'Hello, I am Alice'
child.sayAge() // è¾“å‡ºï¼š'I am 10 years old'
```

##### 7ã€å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿

- å…¶å®å°±æ˜¯ å€Ÿç”¨æ„é€ å‡½æ•° + åŸå‹å¼ + å¯„ç”Ÿå¼

```js
function object(o) {
  function F() {}
  F.prototype = o
  return new F()
}

function inheritPrototype(subType, superType) {
  var prototype = object(superType.prototype) // åˆ›å»ºå¯¹è±¡
  prototype.constructor = subType // å¢å¼ºå¯¹è±¡
  subType.prototype = prototype // æŒ‡å®šå¯¹è±¡
}

function SuperType(name) {
  this.name = name
  this.colors = ['red', 'blue', 'green']
}

SuperType.prototype.sayName = function () {
  alert(this.name)
}

function SubType(name, age) {
  SuperType.call(this, name)

  this.age = age
}

inheritPrototype(SubType, SuperType)

SubType.prototype.sayAge = function () {
  alert(this.age)
}

var instance1 = new SubType('Nicholas', 29)
instance1.colors.push('black')
alert(instance1.colors) //"red,blue,green,black"
instance1.sayName() //"Nicholas";
instance1.sayAge() //29

var instance2 = new SubType('Greg', 27)
alert(instance2.colors) //"red,blue,green"
instance2.sayName() //"Greg";
instance2.sayAge() //27
```

#### bindã€callã€apply å®ç°

æ‰‹åŠ¨å®ç° applyï¼Œæˆ‘ä»¬è¦çŸ¥é“ apply ï¼Œå°±æ˜¯ä¿®æ”¹ this æŒ‡å‘ï¼Œç„¶åç«‹å³æ‰§è¡Œå‡½æ•°ç½¢äº†

- è€Œå¦‚ä½•ä¿®æ”¹ this æŒ‡å‘å‘¢ï¼Ÿ å¯¹è±¡è°ƒç”¨å°± okï¼Œ
- æ³¨æ„åœ¨ä½¿ç”¨ this æ—¶ï¼Œç®­å¤´å‡½æ•°åŠ¡å¿…è¦æ³¨æ„

```js
// å®ç°apply
Function.prototype.myApply = function (ctx, args) {
  ctx = ctx || window

  const uuid = Symbol()
  ctx[uuid] = this // è¿™é‡ŒæŠŠthisï¼Œä¹Ÿå°±æ˜¯åç»­çš„å‡½æ•°ï¼ŒæŒ‚è½½åœ¨ä¸€ä¸ªå±æ€§ä¸Šï¼Œç±»ä¼¼ ctx.fn = this
  // const args = [...arguments].slice(1)[0] // applyçš„å‚æ•°äºŒæ˜¯ä¸ªæ•°ç»„ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨æˆªå–

  // è°ƒç”¨ // æ³¨æ„ï¼šè¿™é‡Œå‡½æ•°çš„å…¥å‚ ...args è¿™æ ·å†™ï¼Œç›®çš„æ˜¯ä¸ºäº†æ‹‰é½ï¼ŒåŸç”Ÿçš„applyï¼Œè™½ç„¶ä¸çŸ¥é“åŸç”Ÿåº•å±‚å¦‚ä½•å®ç°
  const res = ctx[uuid](...args)
  // åˆ é™¤å¤šä½™å±æ€§
  delete ctx[uuid]

  // è¿”å›ç»“æœ
  return res
}

// æ³¨æ„ï¼šè¿™é‡Œå‡½æ•°çš„å…¥å‚ ...arr è¿™æ ·å†™ï¼Œç›®çš„æ˜¯ä¸ºäº†æ‹‰é½ï¼ŒåŸç”Ÿçš„applyï¼Œè™½ç„¶ä¸çŸ¥é“åŸç”Ÿåº•å±‚å¦‚ä½•å®ç°
function greet(...arr) {
  // ...arr ç›¸å½“äºå°†å¤šä¸ªå‚æ•°ï¼Œæ”¾åœ¨æ•°ç»„arré‡Œ
  // console.log(arr) // æ‰“å°æ•°ç»„
  console.log('hello', this.name, arr.join(' '))
}

var obj = { name: 'test' }

console.log(greet.apply(obj, ['hi apply', 'hello'])) // hello test hi apply hello
console.log(greet.myApply(obj, ['hi myapply', 'hello'])) // hello test hi myapply hello

// å®ç° call
Function.prototype.myCall = function (ctx) {
  ctx = ctx || window

  // ç¬¬ä¸€é¡¹æ˜¯ ctxï¼Œç¬¬äºŒé¡¹æ‰æ˜¯ call çš„å…¥å‚
  const args = [...arguments].slice(1)

  const uuid = Symbol() // é˜²æ­¢é‡å¤
  ctx[uuid] = this // æŒ‡å‘æœªæ¥çš„å‡½æ•°

  const res = ctx[uuid](...args)
  delete ctx[uuid]
  return res
}

var obj = { name: 'obj' }
function greet(args) {
  console.log('hello', this.name, args.join(' '))
}

greet.myCall(obj, ['hello', 'mycall']) // hello obj hello mycall
greet.call(obj, ['hello', 'call']) // hello obj hello call

// å®ç°bind
Function.prototype.mybind = function (ctx) {
  ctx = ctx || window

  const uuid = Symbol()
  ctx[uuid] = this

  const args = [...arguments].slice(1)

  return function (...args1) {
    const res = ctx[uuid](...args1, ...args)
    delete ctx[uuid]
    return res
  }
}

var obj = { name: 'bind' }

function greet(...args) {
  console.log('hi', this.name, args.join(' '))
}

var myGreet = greet.bind(obj, 'outer', 'haha')
myGreet()

var myGreet1 = greet.mybind(obj, 'outer', 'haha')
myGreet1()
```

#### æ·±æ‹·è´

- æ€è·¯ï¼Œå…¶å®å°±æ˜¯éå†å¯¹è±¡ï¼Œç„¶åé€’å½’æ‹·è´
- éœ€è¦å¤„ç†ç‰¹æ®Šæ•°æ®ç±»å‹

```js
const originalObj1 = {
  name: 'John',
  age: 30,
  address: {
    city: 'New York',
    country: 'USA',
  },
  nu: null,
  undf: undefined,
  reg: /\d/g,
  arr: [1, 2],
  fn: () => console.log('fn'),
  date: new Date(),
  symbol: Symbol(), // ä¸æ˜¯æ„é€ å‡½æ•°ï¼Œä¸èƒ½ç”¨ new
}

const deepClone = (target) => {
  const wMap = new WeakMap()

  const isType = (v) => Object.prototype.toString.call(v).slice(8, -1)
  // éœ€è¦é€’å½’
  const _deep = (obj) => {
    // æ—¶é—´ç±»å‹
    if (isType(obj) === 'Date') {
      return new Date(obj)
    }
    // å¦‚æœä¸æ˜¯æ•°ç»„æˆ–è€…å¯¹è±¡ï¼Œç›´æ¥è¿”å›
    if (!['Array', 'Object'].includes(isType(obj))) {
      return obj
    }

    // å¦‚æœæ˜¯å¯¹è±¡ï¼Œåˆ™å¼€å§‹å¤„ç†å¯¹è±¡
    const res = Array.isArray(obj) ? [] : Object.create(null)

    // å·²å¯¹è±¡æœ¬èº«ä½œä¸ºkeyï¼Œç„¶åresä½œä¸ºvalï¼Œé˜²æ­¢å¾ªç¯å¼•ç”¨
    if (wMap.has(obj)) {
      return wMap.get(obj)
    }
    wMap.set(obj, res) // å¦åˆ™å°±å­˜å…¥map

    // éå†å¯¹è±¡ï¼Œé€’å½’æ‹·è´
    Object.keys(obj).forEach((key) => {
      if (res[key]) return // å¦‚æœå·²ç»å¤åˆ¶ï¼Œç›´æ¥è¿”å›
      res[key] = _deep(obj[key]) // é€’å½’æ‹·è´
    })

    // æœ€åè¿”å›
    return res
  }

  return _deep(target)
}

const originalObj2 = deepClone(originalObj1)

console.log(originalObj2.address === originalObj1.address) // false
```

#### èŠ‚æµ

æ€è·¯ï¼š

- å¦‚æœç«‹å³æ‰§è¡Œçš„è¯ï¼Œä¸éœ€è¦åƒé˜²æŠ–é‚£æ ·ç”¨ flag
- å¦‚æœæ²¡æœ‰å‰©ä½™æ—¶é—´ï¼Œåˆ™ç«‹å³æ‰§è¡Œï¼ŒåŒæ—¶æ¸…ç©º timer
- å¦‚æœæœ‰å‰©ä½™æ—¶é—´ï¼Œä¸”æ²¡æœ‰å®šæ—¶å™¨ï¼Œåˆ™æ–°å»ºå®šæ—¶å™¨

```js
const throttle = (fn, duration = 300) => {
  let timer = null
  let lastTime = 0

  return function (...args) {
    let currentTime = Date.now()
    let restTime = duration - (currentTime - lastTime)

    // å¦‚æœæ²¡æœ‰å‰©ä½™æ—¶é—´ï¼Œåˆ™ç«‹å³æ‰§è¡Œï¼ŒåŒæ—¶æ¸…é™¤å®šæ—¶å™¨
    if (restTime <= 0) {
      clearTimeout(timer) // å¯ä»¥é˜²æ­¢å®šæ—¶å™¨æ³„éœ²
      timer = null
      fn.apply(this, args)
      lastTime = currentTime // lastTimeæ˜¯ä¸Šæ¬¡æ‰§è¡Œçš„æ—¶é—´ï¼Œå› æ­¤è¿™é‡Œè¿™æ ·èµ‹å€¼
    } else if (!timer) {
      timer = setTimeout(() => {
        fn.apply(this, args)
        timer = null
        lastTime = Date.now()
      }, restTime)
    }
  }
}

window.addEventListener(
  'resize',
  throttleImmediate(() => {
    console.log('èŠ‚æµ')
  }, 1000)
)
```

#### é˜²æŠ–

æ€è·¯ï¼š

1. è¿”å›å‡½æ•°
2. å†æ¬¡è§¦å‘ï¼Œæ¸…ç©ºå®šæ—¶å™¨ï¼Œå¹¶å»¶è¿Ÿ

```js
// ç®€å•çš„
function debounce(fn, interval = 300) {
  let timer = null
  return () => {
    clearTimeout(timer)
    timer = setTimeout(fn, interval)
  }
}
const fun = () => console.log(1111)
window.addEventListener(
  'resize',
  debounce(() => console.log(1111), 1000)
)
window.addEventListener('resize', debounce(fun, 1000))
```

ä¸Šé¢çš„åªæ˜¯æ™®é€šçš„é˜²æŠ–ï¼Œè¿˜å¯ä»¥ç«‹å³æ‰§è¡Œ

```js
// å¸¦ç«‹å³æ‰§è¡Œçš„
function debounceImmediate(fn, interval = 300, immediate = true) {
  let timer = null
  return () => {
    clearTimeout(timer)
    if (immediate) {
      // å¦‚æœç«‹å³æ‰§è¡Œï¼Œåˆ™æ¸…é™¤å®šæ—¶å™¨ï¼Œå¹¶æ‰§è¡Œ
      immediate = false
      fn.apply(null)
    } else {
      timer = setTimeout(() => {
        fn.apply(null)
        immediate = true
      }, interval)
    }
  }
}

const fun2 = () => console.log(2222)
window.addEventListener('resize', debounceImmediate(fun2, 1000))
```
