---
title: 'js中的那些技术点'
date: Sat May 13 2023 23:13:13 GMT+0800 (中国标准时间)
lastmod: '2023-05-13'
tags: ['js']
draft: false
summary: '哪些js中的技能点'
layout: PostSimple
bibliography: references-data.bib
canonicalUrl: https://dume.vercel.app/blog/2023/some-js-skills
---

## 时间循环

### 宏任务和微任务

在 JavaScript 中，宏任务和微任务是异步编程中的两个重要概念。

- 宏任务（macro-task）通常是指由浏览器或 Node.js 引擎提供的任务，例如 setTimeout、setInterval、I/O 操作、DOM 事件等。宏任务会被放入任务队列中，等待执行。
- 微任务（micro-task）通常是指由 JavaScript 引擎提供的任务，例如 Promise、process.nextTick 等。微任务会被放入微任务队列中，等待执行。

页面中的大部分任务都是在主线程上执行的，这些任务包括了：

- 渲染事件（如解析 DOM、计算布局、绘制）；
- 用户交互事件（如鼠标点击、滚动页面、放大缩小等）；
- JavaScript 脚本执行事件；
- 网络请求完成、文件读写完成事件。

为了协调这些任务有条不紊地在主线程上执行，页面进程引入了消息队列和事件循环机制，渲染进程内部会维护多个消息队列，比如延迟执行队列和普通的消息队列。然后主线程采用一个 for 循环，不断地从这些任务队列中取出任务并执行任务。我们把这些消息队列中的任务称为**宏任务**。

宏任务可以满足我们大部分的日常需求，不过如果有对时间精度要求较高或者优先级更高的需求，宏任务就难以胜任了。

页面的渲染事件、各种 IO 的完成事件、执行 JavaScript 脚本的事件、用户交互的事件等都随时有可能被添加到消息队列中，而且添加事件是由系统操作的，JavaScript 代码不能准确掌控任务要添加到队列中的位置，控制不了任务在消息队列中的位置，所以很难控制开始执行任务的时间。

## Promise

### 原理

Promise 是 JavaScript 中一种**处理异步操作的方式，它的原理是基于异步操作的状态机**包含三种状态：pending（等待中）、fulfilled（已成功）、rejected（已失败）。

当 Promise 对象的状态改变时，会触发相应的回调函数。

## 时间循环

## 时间循环

## 时间循环

## 时间循环

## 时间循环

## 时间循环

## 时间循环

## 时间循环

## 时间循环
